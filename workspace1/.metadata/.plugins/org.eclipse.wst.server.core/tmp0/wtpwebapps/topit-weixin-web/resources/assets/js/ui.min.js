/*!
 * Project BI
 * Author he.ff (RTX 3113)
 * Email he.ff@wonhigh.cn
 * Date 2015/02/05
 * Description EasyUI for BI v1.0.0 (http://www.wonhigh.cn/)
 */
!function(a){a.parser={auto:!0,onComplete:function(){},plugins:["draggable","droppable","resizable","pagination","tooltip","linkbutton","menu","menubutton","splitbutton","progressbar","tree","combobox","combotree","combogrid","numberbox","validatebox","searchbox","numberspinner","timespinner","calendar","datebox","datetimebox","slider","layout","panel","datagrid","propertygrid","treegrid","tabs","accordion","window","dialog"],parse:function(b){for(var c=[],d=0;d<a.parser.plugins.length;d++){var e=a.parser.plugins[d],f=a(".easyui-"+e,b);f.length&&(f[e]?f[e]():c.push({name:e,jq:f}))}if(c.length&&window.easyloader){for(var g=[],d=0;d<c.length;d++)g.push(c[d].name);easyloader.load(g,function(){for(var d=0;d<c.length;d++){var e=c[d].name,f=c[d].jq;f[e]()}a.parser.onComplete.call(a.parser,b)})}else a.parser.onComplete.call(a.parser,b)},parseOptions:function(b,c){var d=a(b),e={},f=a.trim(d.attr("data-options"));if(f&&("{"!=f.substring(0,1)&&(f="{"+f+"}"),e=new Function("return "+f)()),c){for(var g={},h=0;h<c.length;h++){var i=c[h];if("string"==typeof i)g[i]="width"==i||"height"==i||"left"==i||"top"==i?parseInt(b.style[i])||void 0:d.attr(i);else for(var j in i){var k=i[j];"boolean"==k?g[j]=d.attr(j)?"true"==d.attr(j):void 0:"number"==k&&(g[j]="0"==d.attr(j)?0:parseFloat(d.attr(j))||void 0)}}a.extend(e,g)}return e}},a(function(){var b=a('<div style="position:absolute;top:-1000px;width:100px;height:100px;padding:5px"></div>').appendTo("body");b.width(100),a._boxModel=100==parseInt(b.width()),b.remove(),!window.easyloader&&a.parser.auto&&a.parser.parse()}),a.fn._outerWidth=function(b){return void 0==b?this[0]==window?this.width()||document.body.clientWidth:this.outerWidth()||0:this.each(function(){a(this).width(a._boxModel?b-(a(this).outerWidth()-a(this).width()):b)})},a.fn._outerHeight=function(b){return void 0==b?this[0]==window?this.height()||document.body.clientHeight:this.outerHeight()||0:this.each(function(){a(this).height(a._boxModel?b-(a(this).outerHeight()-a(this).height()):b)})},a.fn._scrollLeft=function(b){return void 0==b?this.scrollLeft():this.each(function(){a(this).scrollLeft(b)})},a.fn._propAttr=a.fn.prop||a.fn.attr,a.fn._fit=function(b){b=void 0==b?!0:b;var c=this[0],d="BODY"==c.tagName?c:this.parent()[0],e=d.fcount||0;return b?c.fitted||(c.fitted=!0,d.fcount=e+1,a(d).addClass("panel-noscroll"),"BODY"==d.tagName&&a("html").addClass("panel-fit")):c.fitted&&(c.fitted=!1,d.fcount=e-1,0==d.fcount&&(a(d).removeClass("panel-noscroll"),"BODY"==d.tagName&&a("html").removeClass("panel-fit"))),{width:a(d).width(),height:a(d).height()}}}(jQuery),function(a){a.fn.resizable=function(b,c){function d(b){var c=b.data,d=a.data(c.target,"resizable").options;if(-1!=c.dir.indexOf("e")){var e=c.startWidth+b.pageX-c.startX;e=Math.min(Math.max(e,d.minWidth),d.maxWidth),c.width=e}if(-1!=c.dir.indexOf("s")){var f=c.startHeight+b.pageY-c.startY;f=Math.min(Math.max(f,d.minHeight),d.maxHeight),c.height=f}if(-1!=c.dir.indexOf("w")){var e=c.startWidth-b.pageX+c.startX;e=Math.min(Math.max(e,d.minWidth),d.maxWidth),c.width=e,c.left=c.startLeft+c.startWidth-c.width}if(-1!=c.dir.indexOf("n")){var f=c.startHeight-b.pageY+c.startY;f=Math.min(Math.max(f,d.minHeight),d.maxHeight),c.height=f,c.top=c.startTop+c.startHeight-c.height}}function e(b){var c=b.data,d=a(c.target);d.css({left:c.left,top:c.top}),d.outerWidth()!=c.width&&d._outerWidth(c.width),d.outerHeight()!=c.height&&d._outerHeight(c.height)}function f(b){return a.fn.resizable.isResizing=!0,a.data(b.data.target,"resizable").options.onStartResize.call(b.data.target,b),!1}function g(b){return d(b),0!=a.data(b.data.target,"resizable").options.onResize.call(b.data.target,b)&&e(b),!1}function h(b){return a.fn.resizable.isResizing=!1,d(b,!0),e(b),a.data(b.data.target,"resizable").options.onStopResize.call(b.data.target,b),a(document).unbind(".resizable"),a("body").css("cursor",""),!1}return"string"==typeof b?a.fn.resizable.methods[b](this,c):this.each(function(){function c(b){var c=a(b.data.target),e="",f=c.offset(),g=c.outerWidth(),h=c.outerHeight(),i=d.edge;b.pageY>f.top&&b.pageY<f.top+i?e+="n":b.pageY<f.top+h&&b.pageY>f.top+h-i&&(e+="s"),b.pageX>f.left&&b.pageX<f.left+i?e+="w":b.pageX<f.left+g&&b.pageX>f.left+g-i&&(e+="e");for(var j=d.handles.split(","),k=0;k<j.length;k++){var l=j[k].replace(/(^\s*)|(\s*$)/g,"");if("all"==l||l==e)return e}return""}var d=null,e=a.data(this,"resizable");e?(a(this).unbind(".resizable"),d=a.extend(e.options,b||{})):(d=a.extend({},a.fn.resizable.defaults,a.fn.resizable.parseOptions(this),b||{}),a.data(this,"resizable",{options:d})),1!=d.disabled&&a(this).bind("mousemove.resizable",{target:this},function(b){if(!a.fn.resizable.isResizing){var d=c(b);""==d?a(b.data.target).css("cursor",""):a(b.data.target).css("cursor",d+"-resize")}}).bind("mouseleave.resizable",{target:this},function(b){a(b.data.target).css("cursor","")}).bind("mousedown.resizable",{target:this},function(b){function d(c){var d=parseInt(a(b.data.target).css(c));return isNaN(d)?0:d}var e=c(b);if(""!=e){var i={target:b.data.target,dir:e,startLeft:d("left"),startTop:d("top"),left:d("left"),top:d("top"),startX:b.pageX,startY:b.pageY,startWidth:a(b.data.target).outerWidth(),startHeight:a(b.data.target).outerHeight(),width:a(b.data.target).outerWidth(),height:a(b.data.target).outerHeight(),deltaWidth:a(b.data.target).outerWidth()-a(b.data.target).width(),deltaHeight:a(b.data.target).outerHeight()-a(b.data.target).height()};a(document).bind("mousedown.resizable",i,f),a(document).bind("mousemove.resizable",i,g),a(document).bind("mouseup.resizable",i,h),a("body").css("cursor",e+"-resize")}})})},a.fn.resizable.methods={options:function(b){return a.data(b[0],"resizable").options},enable:function(b){return b.each(function(){a(this).resizable({disabled:!1})})},disable:function(b){return b.each(function(){a(this).resizable({disabled:!0})})}},a.fn.resizable.parseOptions=function(b){var c=a(b);return a.extend({},a.parser.parseOptions(b,["handles",{minWidth:"number",minHeight:"number",maxWidth:"number",maxHeight:"number",edge:"number"}]),{disabled:c.attr("disabled")?!0:void 0})},a.fn.resizable.defaults={disabled:!1,handles:"n, e, s, w, ne, se, sw, nw, all",minWidth:10,minHeight:10,maxWidth:1e4,maxHeight:1e4,edge:5,onStartResize:function(){},onResize:function(){},onStopResize:function(){}},a.fn.resizable.isResizing=!1}(jQuery),function(a){function b(b){function c(b){var c={id:b.attr("id"),disabled:b.attr("disabled")?!0:void 0,plain:!0,text:a.trim(b.html()),iconCls:b.attr("icon")||b.attr("iconCls"),type:"button",href:b.attr("href"),align:"left",onclick:b.attr("onclick")};return(b.attr("type")&&"button"!=b.attr("type")||b.attr("menu"))&&(c=a.extend(c,{menu:b.attr("menu"),duration:b.attr("duration"),type:"menubutton"})),c}var d=a.data(b,"toolbar").options;a.each(a(b).children(),function(){var b=c(a(this));d.items.push(b)}),d.items&&(a(b).empty(),d.randerTo&&a(b).appendTo(d.randerTo),a(b).css({height:28,background:"#f4f4f4",padding:"2px 5px 1px 5px","border-bottom":"1px solid #ddd"}),a.each(d.items,function(){var c=this;if(1==c.length)a("<div/>").appendTo(b).css({height:24,borderLeft:"1px solid #CCC",borderRight:"1px solid white",margin:"2px 1px"});else{c.type=c.type||"button",c=a.extend(c,{plain:!0});var d=a("<a/>");c.href||(c.href="javascript:void(0)"),d.attr("href","javascript:void(0)"),c.onclick?(c.href="javascript:void(0)",d.attr("onclick",c.onclick)):c.handler&&"function"==typeof c.handler&&(c.disabled||d.click(c.handler)),d.appendTo(b),"button"==c.type?d.linkbutton(c):"menubutton"==c.type&&d.menubutton(c)}}),"right"==d.align?a(b).children().css("float","right"):a(b).children().css("float","left"))}a.fn.toolbar=function(c,d){return"string"==typeof c?a(this).toolbar.methods[c].call(this,d):(c=c||{},this.each(function(){var d=a.data(this,"toolbar");d?a.extend(d.options,c):(a.data(this,"toolbar",{options:a.extend({},a.fn.toolbar.defaults,c)}),b(this))}))},a.fn.toolbar.methods={options:function(){return this.data().toolbar.options},select:function(b){return this.each(function(){var c=a(this).data().toolbar.options.items,d=a(this);d.children().removeClass("l-btn-plain-selected").removeClass("l-btn-selected");var e=d.children().eq(b),f=c[b];"menubutton"==f.type?e.menubutton("select",b):e.linkbutton("select",b)})},disabledALl:function(){return this.each(function(){var b=a(this).data().toolbar.options.items,c=a(this);a.each(b,function(a,b){var d=c.children().eq(a);"-"!=b&&("menubutton"==b.type?d.menubutton("disable"):d.linkbutton("disable"),b.handler&&d.unbind("click"))})})},enableAll:function(){return this.each(function(){var b=a(this).data().toolbar.options.items,c=a(this);a.each(b,function(a,b){var d=c.children().eq(a);"-"!=b&&("menubutton"==b.type?d.menubutton("enable"):d.linkbutton("enable"),b.handler&&d.click(b.handler))})})},disabled:function(b){return this.each(function(){var c=a(this).data().toolbar.options.items,d=a(this);a.each(c,function(a,c){if(c.text==b){var e=d.children().eq(a);"menubutton"==c.type?e.menubutton("disable"):e.linkbutton("disable"),c.handler&&e.unbind("click")}})})},enable:function(b){return this.each(function(){var c=a(this).data().toolbar.options.items,d=a(this);a.each(c,function(a,c){if(c.text==b){var e=d.children().eq(a);"menubutton"==c.type?e.menubutton("enable"):e.linkbutton("enable"),c.handler&&e.click(c.handler)}})})}},a.fn.toolbar.defaults={randerTo:null,items:[]},a.parser&&a.parser.plugins.push("toolbar")}(jQuery),function($){function _1(a){a._remove()}function _3(a,b){var c=$.data(a,"panel").options,d=$.data(a,"panel").panel,e=d.children("div.panel-header"),f=d.children("div.panel-body");b&&$.extend(c,{width:b.width,height:b.height,left:b.left,top:b.top}),c.fit?$.extend(c,d._fit()):d._fit(!1),d.css({left:c.left,top:c.top}),isNaN(c.width)?d.width("auto"):d._outerWidth(c.width),e.add(f)._outerWidth(d.width()),isNaN(c.height)?f.height("auto"):(d._outerHeight(c.height),f._outerHeight(d.height()-e._outerHeight())),d.css("height",""),c.onResize.apply(a,[c.width,c.height]),$(a).find(">div,>form>div").triggerHandler("_resize")}function _a(a,b){var c=$.data(a,"panel").options,d=$.data(a,"panel").panel;b&&(null!=b.left&&(c.left=b.left),null!=b.top&&(c.top=b.top)),d.css({left:c.left,top:c.top}),c.onMove.apply(a,[c.left,c.top])}function _f(a){$(a).addClass("panel-body");var b=$('<div class="panel"></div>').insertBefore(a);return b[0].appendChild(a),b.bind("_resize",function(){var b=$.data(a,"panel").options;return 1==b.fit&&_3(a),!1}),b}function _13(_14){var _15=$.data(_14,"panel").options,_16=$.data(_14,"panel").panel;if(_15.tools&&"string"==typeof _15.tools&&_16.find(">div.panel-header>div.panel-tool .panel-tool-a").appendTo(_15.tools),_1(_16.children("div.panel-header")),_15.title&&!_15.noheader||_15.minSplit){var _17=$('<div class="panel-header"><div class="panel-title">'+_15.title+"</div></div>").prependTo(_16);_15.iconCls&&(_17.find(".panel-title").addClass("panel-with-icon"),$('<div class="panel-icon"></div>').addClass(_15.iconCls).appendTo(_17));var _18=$('<div class="panel-tool"></div>').appendTo(_17);if(_18.bind("click",function(a){a.stopPropagation()}),_15.tools)if($.isArray(_15.tools))for(var i=0;i<_15.tools.length;i++){var t=$('<a href="javascript:void(0)"></a>').addClass(_15.tools[i].iconCls).appendTo(_18);_15.tools[i].handler&&t.bind("click",eval(_15.tools[i].handler))}else $(_15.tools).children().each(function(){$(this).addClass($(this).attr("iconCls")).addClass("panel-tool-a").appendTo(_18)});_15.collapsible&&$('<a class="panel-tool-collapse" href="javascript:void(0)"></a>').appendTo(_18).bind("click",function(){return 1==_15.collapsed?_3c(_14,!0):_2c(_14,!0),!1}),_15.minimizable&&$('<a class="panel-tool-min" href="javascript:void(0)"></a>').appendTo(_18).bind("click",function(){return _47(_14),!1}),_15.maximizable&&$('<a class="panel-tool-max" href="javascript:void(0)"></a>').appendTo(_18).bind("click",function(){return 1==_15.maximized?_4b(_14):_2b(_14),!1}),_15.closable&&$('<a class="panel-tool-close" href="javascript:void(0)"></a>').appendTo(_18).bind("click",function(){return _19(_14),!1}),_16.children("div.panel-body").removeClass("panel-body-noheader")}else _16.children("div.panel-body").addClass("panel-body-noheader")}function _1a(a){function b(b){$(a).html(b),$.parser&&$.parser.parse($(a))}var c=$.data(a,"panel"),d=c.options;if(d.href){if(!c.isLoaded||!d.cache){if(0==d.onBeforeLoad.call(a))return;c.isLoaded=!1,_1e(a),d.loadingMessage&&$(a).html($('<div class="panel-loading"></div>').html(d.loadingMessage)),$.ajax({url:d.href,cache:!1,dataType:"html",success:function(e){b(d.extractor.call(a,e)),d.onLoad.apply(a,arguments),c.isLoaded=!0}})}}else d.content&&(c.isLoaded||(_1e(a),b(d.content),c.isLoaded=!0))}function _1e(a){var b=$(a);b.find(".combo-f").each(function(){$(this).combo("destroy")}),b.find(".m-btn").each(function(){$(this).menubutton("destroy")}),b.find(".s-btn").each(function(){$(this).splitbutton("destroy")}),b.find(".tooltip-f").each(function(){$(this).tooltip("destroy")})}function _23(a){$(a).find("div.panel:visible,div.accordion:visible,div.tabs-container:visible,div.layout:visible").each(function(){$(this).triggerHandler("_resize",[!0])})}function _25(a,b){var c=$.data(a,"panel").options,d=$.data(a,"panel").panel;if(1==b||0!=c.onBeforeOpen.call(a)){d.show(),c.closed=!1,c.minimized=!1;var e=d.children("div.panel-header").find("a.panel-tool-restore");e.length&&(c.maximized=!0),c.onOpen.call(a),1==c.maximized&&(c.maximized=!1,_2b(a)),1==c.collapsed&&(c.collapsed=!1,_2c(a)),c.collapsed||(_1a(a),_23(a))}}function _19(a,b){var c=$.data(a,"panel").options,d=$.data(a,"panel").panel;(1==b||0!=c.onBeforeClose.call(a))&&(d._fit(!1),d.hide(),c.closed=!0,c.onClose.call(a))}function _31(a,b){var c=$.data(a,"panel").options,d=$.data(a,"panel").panel;(1==b||0!=c.onBeforeDestroy.call(a))&&(_1e(a),_1(d),c.onDestroy.call(a))}function _2c(a,b){var c=$.data(a,"panel").options,d=$.data(a,"panel").panel,e=d.children("div.panel-body"),f=d.children("div.panel-header").find("a.panel-tool-collapse");1!=c.collapsed&&(e.stop(!0,!0),0!=c.onBeforeCollapse.call(a)&&(f.addClass("panel-tool-expand"),1==b?e.slideUp("normal",function(){c.collapsed=!0,c.onCollapse.call(a)}):(e.hide(),c.collapsed=!0,c.onCollapse.call(a))))}function _3c(a,b){var c=$.data(a,"panel").options,d=$.data(a,"panel").panel,e=d.children("div.panel-body"),f=d.children("div.panel-header").find("a.panel-tool-collapse");0!=c.collapsed&&(e.stop(!0,!0),0!=c.onBeforeExpand.call(a)&&(f.removeClass("panel-tool-expand"),1==b?e.slideDown("normal",function(){c.collapsed=!1,c.onExpand.call(a),_1a(a),_23(a)}):(e.show(),c.collapsed=!1,c.onExpand.call(a),_1a(a),_23(a))))}function _2b(a){var b=$.data(a,"panel").options,c=$.data(a,"panel").panel,d=c.children("div.panel-header").find("a.panel-tool-max");1!=b.maximized&&(d.addClass("panel-tool-restore"),$.data(a,"panel").original||($.data(a,"panel").original={width:b.width,height:b.height,left:b.left,top:b.top,fit:b.fit}),b.left=0,b.top=0,b.fit=!0,_3(a),b.minimized=!1,b.maximized=!0,b.onMaximize.call(a))}function _47(a){var b=$.data(a,"panel").options,c=$.data(a,"panel").panel;c._fit(!1),c.hide(),b.minimized=!0,b.maximized=!1,b.onMinimize.call(a)}function _4b(a){var b=$.data(a,"panel").options,c=$.data(a,"panel").panel,d=c.children("div.panel-header").find("a.panel-tool-max");0!=b.maximized&&(c.show(),d.removeClass("panel-tool-restore"),$.extend(b,$.data(a,"panel").original),_3(a),b.minimized=!1,b.maximized=!1,$.data(a,"panel").original=null,b.onRestore.call(a))}function _50(a){var b=$.data(a,"panel").options,c=$.data(a,"panel").panel,d=$(a).panel("header"),e=$(a).panel("body");c.css(b.style),c.addClass(b.cls),b.border?(d.removeClass("panel-header-noborder"),e.removeClass("panel-body-noborder")):(d.addClass("panel-header-noborder"),e.addClass("panel-body-noborder")),d.addClass(b.headerCls),e.addClass(b.bodyCls),b.id?$(a).attr("id",b.id):$(a).attr("id","")}function setFitWidth(){var a=$("body").find(".fit-width");if(a[0]){var b=a.parent().parent();setTimeout(function(){var c=b.width()-2;a.width(c),a.prev(0).width(c-10)},0)}}function _56(a,b){$.data(a,"panel").options.title=b,$(a).panel("header").find("div.panel-title").html(b)}$.fn._remove=function(){return this.each(function(){$(this).remove();try{this.outerHTML=""}catch(a){}})};var TO=!1,_59=!0;$(window).unbind(".panel").bind("resize.panel",function(){_59&&(TO!==!1&&clearTimeout(TO),TO=setTimeout(function(){_59=!1,setFitWidth();var a=$("body.layout");a.length?a.layout("resize"):$("body").children("div.panel,div.accordion,div.tabs-container,div.layout").triggerHandler("_resize"),_59=!0,TO=!1},200))}),$.fn.panel=function(a,b){return"string"==typeof a?$.fn.panel.methods[a](this,b):(a=a||{},this.each(function(){var b,c=$.data(this,"panel");c?(b=$.extend(c.options,a),c.isLoaded=!1):(b=$.extend({},$.fn.panel.defaults,$.fn.panel.parseOptions(this),a),$(this).attr("title",""),c=$.data(this,"panel",{options:b,panel:_f(this),isLoaded:!1})),_13(this),_50(this),1==b.doSize&&(c.panel.css("display","block"),_3(this)),1==b.closed||1==b.minimized?c.panel.hide():_25(this)}))},$.fn.panel.methods={options:function(a){return $.data(a[0],"panel").options},panel:function(a){return $.data(a[0],"panel").panel},header:function(a){return $.data(a[0],"panel").panel.find(">div.panel-header")},body:function(a){return $.data(a[0],"panel").panel.find(">div.panel-body")},setTitle:function(a,b){return a.each(function(){_56(this,b)})},open:function(a,b){return a.each(function(){_25(this,b)})},close:function(a,b){return a.each(function(){_19(this,b)})},destroy:function(a,b){return a.each(function(){_31(this,b)})},refresh:function(a,b){return a.each(function(){$.data(this,"panel").isLoaded=!1,b&&($.data(this,"panel").options.href=b),_1a(this)})},resize:function(a,b){return a.each(function(){_3(this,b)})},move:function(a,b){return a.each(function(){_a(this,b)})},maximize:function(a){return a.each(function(){_2b(this)})},minimize:function(a){return a.each(function(){_47(this)})},restore:function(a){return a.each(function(){_4b(this)})},collapse:function(a,b){return a.each(function(){_2c(this,b)})},expand:function(a,b){return a.each(function(){_3c(this,b)})}},$.fn.panel.parseOptions=function(a){var b=$(a);return $.extend({},$.parser.parseOptions(a,["id","width","height","left","top","title","iconCls","cls","headerCls","bodyCls","tools","href",{cache:"boolean",fit:"boolean",border:"boolean",noheader:"boolean"},{collapsible:"boolean",minimizable:"boolean",maximizable:"boolean"},{closable:"boolean",collapsed:"boolean",minimized:"boolean",maximized:"boolean",closed:"boolean"}]),{loadingMessage:void 0!=b.attr("loadingMessage")?b.attr("loadingMessage"):void 0})},$.fn.panel.defaults={id:null,title:null,iconCls:null,width:"auto",height:"auto",left:null,top:null,cls:null,headerCls:null,bodyCls:null,style:{},href:null,cache:!0,fit:!1,border:!0,doSize:!0,noheader:!1,content:null,collapsible:!1,minimizable:!1,maximizable:!1,closable:!1,collapsed:!1,minimized:!1,maximized:!1,closed:!1,tools:null,href:null,loadingMessage:"Loading...",extractor:function(a){var b=/<body[^>]*>((.|[\n\r])*)<\/body>/im,c=b.exec(a);return c?c[1]:a},onBeforeLoad:function(){},onLoad:function(){},onBeforeOpen:function(){},onOpen:function(){},onBeforeClose:function(){},onClose:function(){},onBeforeDestroy:function(){},onDestroy:function(){},onResize:function(){},onMove:function(){},onMaximize:function(){},onRestore:function(){},onMinimize:function(){},onBeforeCollapse:function(){},onBeforeExpand:function(){},onCollapse:function(){},onExpand:function(){}}}(jQuery),function(a){function b(b){function c(a){var b=a.panel("options");return Math.min(Math.max(b.height,b.minHeight),b.maxHeight)}function d(a){var b=a.panel("options");return Math.min(Math.max(b.width,b.minWidth),b.maxWidth)}function e(a,b){if(a.length){var d=a.panel("options"),e=c(a);a.panel("resize",{width:k.width(),height:e,left:0,top:"n"==b?0:k.height()-e}),a.panel("panel").is(":visible")&&(l.height-=e),"n"==b&&a.panel("panel").is(":visible")&&(l.top+=e,d.split||!d.border||d.minSplit||l.top--),d.split||!d.border||d.minSplit||l.height++}}function f(a,b){if(a.length){var c=a.panel("options"),e=d(a);a.panel("resize",{width:e,height:l.height,left:"e"==b?k.width()-e:0,top:l.top}),a.panel("panel").is(":visible")&&(l.width-=e),"w"==b&&a.panel("panel").is(":visible")&&(l.left+=e,c.split||!c.border||c.minSplit||l.left--),c.split||!c.border||c.minSplit||l.width++}}var g=a.data(b,"layout"),i=g.options,j=g.panels,k=a(b);"BODY"==b.tagName?k._fit():i.fit?k.css(k._fit()):k._fit(!1);var l={top:0,left:0,width:k.width(),height:k.height()};e(h(j.expandNorth)?j.expandNorth:j.north,"n"),e(h(j.expandSouth)?j.expandSouth:j.south,"s"),f(h(j.expandEast)?j.expandEast:j.east,"e"),f(h(j.expandWest)?j.expandWest:j.west,"w"),j.center.panel("resize",l)}function c(c){function e(b){b.children("div").each(function(){var b=a.fn.layout.parsePanelOptions(this);"north,south,east,west,center".indexOf(b.region)>=0&&d(c,b,this)})}var f=a(c);f.addClass("layout"),e(f.children("form").length?f.children("form"):f),f.append('<div class="layout-split-proxy-h"></div><div class="layout-split-proxy-v"></div>'),f.bind("_resize",function(d,e){var f=a.data(c,"layout").options;return(1==f.fit||e)&&b(c),!1})}function d(c,d,e){d.region=d.region||"center";var g=a.data(c,"layout").panels,h=a(c),i=d.region;if(!g[i].length){var k=a(e);k.length||(k=a("<div></div>").appendTo(h));var l=a.extend({},a.fn.layout.paneldefaults,{width:k.length?parseInt(k[0].style.width)||k.outerWidth():"auto",height:k.length?parseInt(k[0].style.height)||k.outerHeight():"auto",doSize:!1,collapsible:!0,cls:"layout-panel layout-panel-"+i,bodyCls:"layout-body",onOpen:function(){var b=a(this).panel("header").children("div.panel-tool");b.children("a.panel-tool-collapse").hide();var d={north:"up",south:"down",east:"right",west:"left"};if(d[i]){var e="layout-button-"+d[i],g=b.children("a."+e);g.length||(g=a('<a href="javascript:void(0)"></a>').addClass(e).appendTo(b),g.bind("click",{dir:i},function(a){return f(c,a.data.dir),!1})),a(this).panel("options").collapsible?g.show():g.hide()}}},d);if(k.panel(l),g[i]=k,k.panel("options").split||k.panel("options").minSplit){var m=k.panel("panel");m.addClass("layout-split-"+i),k.panel("options").minSplit&&(m.addClass("layout-min-split"),m.append('<a class="layout-button-left" href="javascript:void(0)"></a>'));var n=k.panel("panel");n.addClass("layout-split-"+i);var o="";"north"==i&&(o="s"),"south"==i&&(o="n"),"east"==i&&(o="w"),"west"==i&&(o="e"),a(".layout-button-left,.layout-button-right,.layout-button-down,.layout-button-up").mousedown(function(){return!1}),n.resizable(a.extend({},{handles:o,onStartResize:function(){if(j=!0,"north"==i||"south"==i)var b=a(">div.layout-split-proxy-v",c);else var b=a(">div.layout-split-proxy-h",c);var d={display:"block"};"north"==i?(d.top=parseInt(n.css("top"))+n.outerHeight()-b.height(),d.left=parseInt(n.css("left")),d.width=n.outerWidth(),d.height=b.height()):"south"==i?(d.top=parseInt(n.css("top")),d.left=parseInt(n.css("left")),d.width=n.outerWidth(),d.height=b.height()):"east"==i?(d.top=parseInt(n.css("top"))||0,d.left=parseInt(n.css("left"))||0,d.width=b.width(),d.height=n.outerHeight()):"west"==i&&(d.top=parseInt(n.css("top"))||0,d.left=n.outerWidth()-b.width(),d.width=b.width(),d.height=n.outerHeight()),b.css(d),a('<div class="layout-mask"></div>').css({left:0,top:0,width:h.width(),height:h.height()}).appendTo(h)},onResize:function(b){if("north"==i||"south"==i){var d=a(">div.layout-split-proxy-v",c);d.css("top",b.pageY-a(c).offset().top-d.height()/2)}else{var d=a(">div.layout-split-proxy-h",c);d.css("left",b.pageX-a(c).offset().left-d.width()/2)}return!1},onStopResize:function(a){h.children("div.layout-split-proxy-v,div.layout-split-proxy-h").hide(),k.panel("resize",a.data),b(c),j=!1,h.find(">div.layout-mask").remove()}},d))}}}function e(b,c){var d=a.data(b,"layout").panels;if(d[c].length){d[c].panel("destroy"),d[c]=a();var e="expand"+c.substring(0,1).toUpperCase()+c.substring(1);d[e]&&(d[e].panel("destroy"),d[e]=void 0)}}function f(b,c,d){function e(d){var e;"east"==d?e="layout-button-left":"west"==d?e="layout-button-right":"north"==d?e="layout-button-down":"south"==d&&(e="layout-button-up");var f=a("<div></div>").appendTo(b);return f.panel(a.extend({},a.fn.layout.paneldefaults,{cls:"layout-expand layout-expand-"+d,title:"&nbsp;",closed:!0,doSize:!1,tools:[{iconCls:e,handler:function(){return g(b,c),!1}}]})),k[c].panel("options").minSplit&&f.panel("panel").addClass("layout-min-split layout-expand-"+c),f.panel("panel").hover(function(){a(this).addClass("layout-expand-over")},function(){a(this).removeClass("layout-expand-over")}),f}function i(){var d=28,e=a(b),f=k.center.panel("options");if("east"==c){var g=k.east.panel("options");g.minSplit&&(d=5);var i=f.width+m.width-d;return(m.split||!m.border||m.minSplit)&&i++,{resizeC:{width:i},expand:{left:e.width()-m.width},expandP:{top:f.top,left:e.width()-d,width:d,height:f.height},collapse:{left:e.width(),top:f.top,height:f.height}}}if("west"==c){var g=k.west.panel("options");g.minSplit&&(d=5);var i=f.width+m.width-d;return(m.split||!m.border||m.minSplit)&&i++,{resizeC:{width:i,left:d},expand:{left:0},expandP:{left:0,top:f.top,width:d,height:f.height},collapse:{left:-m.width,top:f.top,height:f.height}}}if("north"==c){var j=f.height;return h(k.expandNorth)||(j+=m.height-d+(m.split||!m.border?1:0)),k.east.add(k.west).add(k.expandEast).add(k.expandWest).panel("resize",{top:d,height:j}),{resizeC:{top:d,height:j},expand:{top:0},expandP:{top:0,left:0,width:e.width(),height:d},collapse:{top:-m.height,width:e.width()}}}if("south"==c){var g=k.south.panel("options");g.minSplit&&(d=5);var j=f.height;return h(k.expandSouth)||(j+=m.height-d+(m.split||!m.border?1:0)),k.east.add(k.west).add(k.expandEast).add(k.expandWest).panel("resize",{height:j}),{resizeC:{height:j},expand:{top:e.height()-m.height},expandP:{top:e.height()-d,left:0,width:e.width(),height:d},collapse:{top:e.height(),width:e.width()}}}}void 0==d&&(d=150);var k=a.data(b,"layout").panels,l=k[c],m=l.panel("options");if(0!=m.onBeforeCollapse.call(l)){var n="expand"+c.substring(0,1).toUpperCase()+c.substring(1);k[n]||(k[n]=e(c),k[n].panel("panel").bind("click",function(){var d=i();return l.panel("expand",!1).panel("open").panel("resize",d.collapse),l.panel("panel").animate(d.expand,function(){a(this).unbind(".layout").bind("mouseleave.layout",{region:c},function(a){1!=j&&f(b,a.data.region)})}),!1}));var o=i();h(k[n])||k.center.panel("resize",o.resizeC),l.panel("panel").animate(o.collapse,d,function(){l.panel("collapse",!1).panel("close"),k[n].panel("open").panel("resize",o.expandP),a(this).unbind(".layout")})}}function g(c,d){function e(){var b=a(c),e=f.center.panel("options");return"east"==d&&f.expandEast?{collapse:{left:b.width(),top:e.top,height:e.height},expand:{left:b.width()-f.east.panel("options").width}}:"west"==d&&f.expandWest?{collapse:{left:-f.west.panel("options").width,top:e.top,height:e.height},expand:{left:0}}:"north"==d&&f.expandNorth?{collapse:{top:-f.north.panel("options").height,width:b.width()},expand:{top:0}}:"south"==d&&f.expandSouth?{collapse:{top:b.height(),width:b.width()},expand:{top:b.height()-f.south.panel("options").height}}:void 0}var f=a.data(c,"layout").panels,g=f[d],h=g.panel("options");if(0!=h.onBeforeExpand.call(g)){var i=e(),j="expand"+d.substring(0,1).toUpperCase()+d.substring(1);f[j]&&(f[j].panel("close"),g.panel("panel").stop(!0,!0),g.panel("expand",!1).panel("open").panel("resize",i.collapse),g.panel("panel").animate(i.expand,function(){b(c)}))}}function h(a){return a&&a.length?a.panel("panel").is(":visible"):!1}function i(b){var c=a.data(b,"layout").panels;c.east.length&&c.east.panel("options").collapsed&&f(b,"east",0),c.west.length&&c.west.panel("options").collapsed&&f(b,"west",0),c.north.length&&c.north.panel("options").collapsed&&f(b,"north",0),c.south.length&&c.south.panel("options").collapsed&&f(b,"south",0)}var j=!1;a.fn.layout=function(d,e){return"string"==typeof d?a.fn.layout.methods[d](this,e):(d=d||{},this.each(function(){var e=a.data(this,"layout");if(e)a.extend(e.options,d);else{var f=a.extend({},a.fn.layout.defaults,a.fn.layout.parseOptions(this),d);a.data(this,"layout",{options:f,panels:{center:a(),north:a(),south:a(),east:a(),west:a()}}),c(this)}b(this),i(this)}))},a.fn.layout.methods={resize:function(a){return a.each(function(){b(this)})},panel:function(b,c){return a.data(b[0],"layout").panels[c]},collapse:function(a,b){return a.each(function(){f(this,b)})},expand:function(a,b){return a.each(function(){g(this,b)})},add:function(c,e){return c.each(function(){d(this,e),b(this),a(this).layout("panel",e.region).panel("options").collapsed&&f(this,e.region,0)})},remove:function(a,c){return a.each(function(){e(this,c),b(this)})}},a.fn.layout.parseOptions=function(b){return a.extend({},a.parser.parseOptions(b,[{fit:"boolean"}]))},a.fn.layout.defaults={fit:!1},a.fn.layout.parsePanelOptions=function(b){a(b);return a.extend({},a.fn.panel.parseOptions(b),a.parser.parseOptions(b,["region",{split:"boolean",minWidth:"number",minHeight:"number",maxWidth:"number",maxHeight:"number"}]))},a.fn.layout.paneldefaults=a.extend({},a.fn.panel.defaults,{region:null,split:!1,minWidth:0,minHeight:0,maxWidth:1e4,maxHeight:1e4})}(jQuery),function(a){function b(b){var e=a.data(b,"linkbutton").options,f=a(b);f.addClass("l-btn").removeClass("l-btn-plain l-btn-selected l-btn-plain-selected"),e.plain&&f.addClass("l-btn-plain"),e.selected&&f.addClass(e.plain?"l-btn-selected l-btn-plain-selected":"l-btn-selected"),f.attr("group",e.group||""),f.attr("id",e.id||""),f.html('<span class="l-btn-left"><span class="l-btn-text"></span></span>'),e.text?(f.find(".l-btn-text").html(e.text),e.iconCls&&f.find(".l-btn-text").addClass(e.iconCls).addClass("left"==e.iconAlign?"l-btn-icon-left":"l-btn-icon-right")):(f.find(".l-btn-text").html('<span class="l-btn-empty">&nbsp;</span>'),e.iconCls&&f.find(".l-btn-empty").addClass(e.iconCls)),f.unbind(".linkbutton").bind("focus.linkbutton",function(){e.disabled||a(this).find(".l-btn-text").addClass("l-btn-focus")}).bind("blur.linkbutton",function(){a(this).find(".l-btn-text").removeClass("l-btn-focus")}),e.toggle&&!e.disabled&&f.bind("click.linkbutton",function(){a(this).linkbutton(e.selected?"unselect":"select")}),c(b,e.selected),d(b,e.disabled)}function c(b,c){var d=a.data(b,"linkbutton").options;c?(d.group&&a('a.l-btn[group="'+d.group+'"]').each(function(){var b=a(this).linkbutton("options");b.toggle&&(a(this).removeClass("l-btn-selected l-btn-plain-selected"),b.selected=!1)}),a(b).addClass(d.plain?"l-btn-selected l-btn-plain-selected":"l-btn-selected"),d.selected=!0):d.group||(a(b).removeClass("l-btn-selected l-btn-plain-selected"),d.selected=!1)}function d(b,c){var d=a.data(b,"linkbutton"),e=d.options;if(a(b).removeClass("l-btn-disabled l-btn-plain-disabled"),c){e.disabled=!0;var f=a(b).attr("href");f&&(d.href=f,a(b).attr("href","javascript:void(0)")),b.onclick&&(d.onclick=b.onclick,b.onclick=null),a(b).addClass(e.plain?"l-btn-disabled l-btn-plain-disabled":"l-btn-disabled")}else e.disabled=!1,d.href&&a(b).attr("href",d.href),d.onclick&&(b.onclick=d.onclick)}a.fn.linkbutton=function(c,d){return"string"==typeof c?a.fn.linkbutton.methods[c](this,d):(c=c||{},this.each(function(){var d=a.data(this,"linkbutton");d?a.extend(d.options,c):(a.data(this,"linkbutton",{options:a.extend({},a.fn.linkbutton.defaults,a.fn.linkbutton.parseOptions(this),c)}),a(this).removeAttr("disabled")),b(this)}))},a.fn.linkbutton.methods={options:function(b){return a.data(b[0],"linkbutton").options},enable:function(a){return a.each(function(){d(this,!1)})},disable:function(a){return a.each(function(){d(this,!0)})},select:function(a){return a.each(function(){c(this,!0)})},unselect:function(a){return a.each(function(){c(this,!1)})}},a.fn.linkbutton.parseOptions=function(b){var c=a(b);return a.extend({},a.parser.parseOptions(b,["id","iconCls","iconAlign","group",{plain:"boolean",toggle:"boolean",selected:"boolean"}]),{disabled:c.attr("disabled")?!0:void 0,text:a.trim(c.html()),iconCls:c.attr("icon")||c.attr("iconCls")})
},a.fn.linkbutton.defaults={id:null,disabled:!1,toggle:!1,selected:!1,group:null,plain:!1,text:"",iconCls:null,iconAlign:"left"}}(jQuery),function($){function _1(_2){function _9(a){var b=_4.nav[a],c=$('<a href="javascript:void(0)"></a>').appendTo(tr);return c.wrap("<td></td>"),c.linkbutton({iconCls:b.iconCls,plain:!0}).unbind(".pagination").bind("click.pagination",function(){b.handler.call(_2)}),c}function _6(a,b){var c=$.inArray(b,a);return c>=0&&a.splice(c,1),a}var _3=$.data(_2,"pagination"),_4=_3.options,bb=_3.bb={},_5=$(_2).addClass("pagination").html('<table cellspacing="0" cellpadding="0" border="0"><tr></tr></table>'),tr=_5.find("tr"),aa=$.extend([],_4.layout);_4.showPageList||_6(aa,"list"),_4.showRefresh||_6(aa,"refresh"),"sep"==aa[0]&&aa.shift(),"sep"==aa[aa.length-1]&&aa.pop();for(var _7=0;_7<aa.length;_7++){var _8=aa[_7];if("list"==_8){var ps=$('<select class="pagination-page-list"></select>');ps.bind("change",function(){_4.pageSize=parseInt($(this).val()),_4.onChangePageSize.call(_2,_4.pageSize),_10(_2,_4.pageNumber)});for(var i=0;i<_4.pageList.length;i++)$("<option></option>").text(_4.pageList[i]).appendTo(ps);$("<td></td>").append(ps).appendTo(tr)}else"sep"==_8?$('<td><div class="pagination-btn-separator"></div></td>').appendTo(tr):"first"==_8?bb.first=_9("first"):"prev"==_8?bb.prev=_9("prev"):"next"==_8?bb.next=_9("next"):"last"==_8?bb.last=_9("last"):"manual"==_8?($('<span style="padding-left:6px;"></span>').html(_4.beforePageText).appendTo(tr).wrap("<td></td>"),bb.num=$('<input class="pagination-num" type="text" value="1" size="2">').appendTo(tr).wrap("<td></td>"),bb.num.unbind(".pagination").bind("keydown.pagination",function(a){if(13==a.keyCode){var b=parseInt($(this).val())||1;return _10(_2,b),!1}}),bb.after=$('<span style="padding-right:6px;"></span>').appendTo(tr).wrap("<td></td>")):"refresh"==_8?bb.refresh=_9("refresh"):"links"==_8&&$('<td class="pagination-links"></td>').appendTo(tr)}if(_4.buttons)if($('<td><div class="pagination-btn-separator"></div></td>').appendTo(tr),$.isArray(_4.buttons))for(var i=0;i<_4.buttons.length;i++){var _b=_4.buttons[i];if("-"==_b)$('<td><div class="pagination-btn-separator"></div></td>').appendTo(tr);else{var td=$("<td></td>").appendTo(tr),a=$('<a href="javascript:void(0)"></a>').appendTo(td);a[0].onclick=eval(_b.handler||function(){}),a.linkbutton($.extend({},_b,{plain:!0}))}}else{var td=$("<td></td>").appendTo(tr);$(_4.buttons).appendTo(td).show()}$('<div class="pagination-info"></div>').appendTo(_5),$('<div style="clear:both;"></div>').appendTo(_5)}function _10(a,b){var c=$.data(a,"pagination").options;_14(a,{pageNumber:b}),c.onSelectPage.call(a,c.pageNumber,c.pageSize)}function _14(a,b){var c=$.data(a,"pagination"),d=c.options,e=c.bb;$.extend(d,b||{});var f=$(a).find("select.pagination-page-list");f.length&&(f.val(d.pageSize+""),d.pageSize=parseInt(f.val()));var g=Math.ceil(d.total/d.pageSize)||1;d.pageNumber<1&&(d.pageNumber=1),d.pageNumber>g&&(d.pageNumber=g),e.num&&e.num.val(d.pageNumber),e.after&&e.after.html(d.afterPageText.replace(/{pages}/,g));var h=$(a).find("td.pagination-links");if(h.length){h.empty();var i=d.pageNumber-Math.floor(d.links/2);1>i&&(i=1);var j=i+d.links-1;j>g&&(j=g),i=j-d.links+1,1>i&&(i=1);for(var k=i;j>=k;k++){var l=$('<a class="pagination-link" href="javascript:void(0)"></a>').appendTo(h);l.linkbutton({plain:!0,text:k}),k==d.pageNumber?l.linkbutton("select"):l.unbind(".pagination").bind("click.pagination",{pageNumber:k},function(b){_10(a,b.data.pageNumber)})}}var m=d.displayMsg;m=m.replace(/{from}/,0==d.total?0:d.pageSize*(d.pageNumber-1)+1),m=m.replace(/{to}/,Math.min(d.pageSize*d.pageNumber,d.total)),m=m.replace(/{total}/,d.total),$(a).find("div.pagination-info").html(m),e.first&&e.first.linkbutton({disabled:1==d.pageNumber}),e.prev&&e.prev.linkbutton({disabled:1==d.pageNumber}),e.next&&e.next.linkbutton({disabled:d.pageNumber==g}),e.last&&e.last.linkbutton({disabled:d.pageNumber==g}),_1d(a,d.loading)}function _1d(a,b){var c=$.data(a,"pagination"),d=c.options;d.loading=b,d.showRefresh&&c.bb.refresh&&c.bb.refresh.linkbutton({iconCls:d.loading?"pagination-loading":"pagination-load"})}$.fn.pagination=function(a,b){return"string"==typeof a?$.fn.pagination.methods[a](this,b):(a=a||{},this.each(function(){var b,c=$.data(this,"pagination");c?b=$.extend(c.options,a):(b=$.extend({},$.fn.pagination.defaults,$.fn.pagination.parseOptions(this),a),$.data(this,"pagination",{options:b})),_1(this),_14(this)}))},$.fn.pagination.methods={options:function(a){return $.data(a[0],"pagination").options},loading:function(a){return a.each(function(){_1d(this,!0)})},loaded:function(a){return a.each(function(){_1d(this,!1)})},refresh:function(a,b){return a.each(function(){_14(this,b)})},select:function(a,b){return a.each(function(){_10(this,b)})}},$.fn.pagination.parseOptions=function(_28){var t=$(_28);return $.extend({},$.parser.parseOptions(_28,[{total:"number",pageSize:"number",pageNumber:"number",links:"number"},{loading:"boolean",showPageList:"boolean",showRefresh:"boolean"}]),{pageList:t.attr("pageList")?eval(t.attr("pageList")):void 0})},$.fn.pagination.defaults={total:1,pageSize:10,pageNumber:1,pageList:[10,20,30,50],loading:!1,buttons:null,showPageList:!0,showRefresh:!0,links:10,layout:["list","sep","first","prev","sep","manual","sep","next","last","sep","refresh"],onSelectPage:function(){},onBeforeRefresh:function(){},onRefresh:function(){},onChangePageSize:function(){},beforePageText:"Page",afterPageText:"of {pages}",displayMsg:"Displaying {from} to {to} of {total} items",nav:{first:{iconCls:"pagination-first",handler:function(){var a=$(this).pagination("options");a.pageNumber>1&&$(this).pagination("select",1)}},prev:{iconCls:"pagination-prev",handler:function(){var a=$(this).pagination("options");a.pageNumber>1&&$(this).pagination("select",a.pageNumber-1)}},next:{iconCls:"pagination-next",handler:function(){var a=$(this).pagination("options"),b=Math.ceil(a.total/a.pageSize);a.pageNumber<b&&$(this).pagination("select",a.pageNumber+1)}},last:{iconCls:"pagination-last",handler:function(){var a=$(this).pagination("options"),b=Math.ceil(a.total/a.pageSize);a.pageNumber<b&&$(this).pagination("select",b)}},refresh:{iconCls:"pagination-refresh",handler:function(){var a=$(this).pagination("options");0!=a.onBeforeRefresh.call(this,a.pageNumber,a.pageSize)&&($(this).pagination("select",a.pageNumber),a.onRefresh.call(this,a.pageNumber,a.pageSize))}}}}}(jQuery),function($){function _2(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return c;return-1}function _4(a,b,c){if("string"==typeof b){for(var d=0,e=a.length;e>d;d++)if(a[d][b]==c)return void a.splice(d,1)}else{var f=_2(a,b);-1!=f&&a.splice(f,1)}}function _7(a,b,c){for(var d=0,e=a.length;e>d;d++)if(a[d][b]==c[b])return;a.push(c)}function _9(a){var b=a||$("head"),c=$.data(b[0],"ss");return c||(c=$.data(b[0],"ss",{cache:{},dirty:[]})),{add:function(a){for(var d=['<style type="text/css">'],e=0;e<a.length;e++)c.cache[a[e][0]]={width:a[e][1]};var f=0;for(var g in c.cache){var h=c.cache[g];h.index=f++,d.push(g+"{width:"+h.width+"}")}d.push("</style>"),$(d.join("\n")).appendTo(b),setTimeout(function(){b.children("style:not(:last)").remove()},0)},getRule:function(a){var c=b.children("style:last")[0],d=c.styleSheet?c.styleSheet:c.sheet||document.styleSheets[document.styleSheets.length-1],e=d.cssRules||d.rules;return e[a]},set:function(a,b){var d=c.cache[a];if(d){d.width=b;var e=this.getRule(d.index);e&&(e.style.width=b)}},remove:function(a){var b=[];for(var d in c.cache)-1==d.indexOf(a)&&b.push([d,c.cache[d].width]);c.cache={},this.add(b)},dirty:function(a){a&&c.dirty.push(a)},clean:function(){for(var a=0;a<c.dirty.length;a++)this.remove(c.dirty[a]);c.dirty=[]}}}function _19(a,b){var c=$.data(a,"datagrid").options,d=$.data(a,"datagrid").panel;if(b&&(b.width&&(c.width=b.width),b.height&&(c.height=b.height)),1==c.fit){var e=d.panel("panel").parent();c.width=e.width(),c.height=e.height()}d.panel("resize",{width:c.width,height:c.height})}function _1e(a){var b=$.data(a,"datagrid").options,c=$.data(a,"datagrid").dc,d=$.data(a,"datagrid").panel,e=d.width(),f=d.height(),g=c.view,h=c.view1,i=c.view2,j=h.children("div.datagrid-header"),k=i.children("div.datagrid-header"),l=j.find("table"),m=k.find("table");g.width(e);var n=j.children("div.datagrid-header-inner").show();h.width(n.find("table").width()),b.showHeader||n.hide(),i.width(e-h._outerWidth()),h.children("div.datagrid-header,div.datagrid-body,div.datagrid-footer").width(h.width()),i.children("div.datagrid-header,div.datagrid-body,div.datagrid-footer").width(i.width());var o;if(j.css("height",""),k.css("height",""),l.css("height",""),m.css("height",""),o=Math.max(l.height(),m.height()),l.height(o),m.height(o),j.add(k)._outerHeight(o),"auto"!=b.height){var p=f-i.children("div.datagrid-header")._outerHeight()-i.children("div.datagrid-footer")._outerHeight()-d.children("div.datagrid-toolbar")._outerHeight();d.children("div.datagrid-pager").each(function(){p-=$(this)._outerHeight()}),c.body1.add(c.body2).children("table.datagrid-btable-frozen").css({position:"absolute",top:c.header2._outerHeight()});var q=c.body2.children("table.datagrid-btable-frozen")._outerHeight();h.add(i).children("div.datagrid-body").css({marginTop:q,height:p-q})}g.height(i.height())}function _2e(a,b,c){function d(a,b){for(var c=0;c<b.length;c++){var d=$(a[c]),e=$(b[c]);d.css("height",""),e.css("height","");var f=Math.max(d.height(),e.height());d.css("height",f),e.css("height",f)}}function e(a){var b=0,c=0;return $(a).children().each(function(){var a=$(this);a.is(":visible")&&(c+=a._outerHeight(),b<a._outerWidth()&&(b=a._outerWidth()))}),{width:b,height:c}}var f=($.data(a,"datagrid").data.rows,$.data(a,"datagrid").options),g=$.data(a,"datagrid").dc;if(!g.body1.is(":empty")&&(!f.nowrap||f.autoRowHeight||c))if(void 0!=b){var h=f.finder.getTr(a,b,"body",1),i=f.finder.getTr(a,b,"body",2);d(h,i)}else{var h=f.finder.getTr(a,0,"allbody",1),i=f.finder.getTr(a,0,"allbody",2);if(d(h,i),f.showFooter){var h=f.finder.getTr(a,0,"allfooter",1),i=f.finder.getTr(a,0,"allfooter",2);d(h,i)}}if(_1e(a),"auto"==f.height){var j=g.body1.parent(),k=g.body2,l=e(k),m=l.height;l.width>k.width()&&(m+=18),j.height(m),k.height(m),g.view.height(g.view2.height())}g.body2.triggerHandler("scroll")}function _3f(a,b){function c(c){var d=c?1:2,g=e.finder.getTr(a,b,"body",d);(c?f.body1:f.body2).children("table.datagrid-btable-frozen").append(g)}var d=$.data(a,"datagrid"),e=d.options,f=d.dc;f.body2.children("table.datagrid-btable-frozen").length||f.body1.add(f.body2).prepend('<table class="datagrid-btable datagrid-btable-frozen" cellspacing="0" cellpadding="0"></table>'),c(!0),c(!1),_1e(a)}function _47(_48,_49){function _4a(){var _4b=[],_4c=[];return $(_48).children("thead").each(function(){var opt=$.parser.parseOptions(this,[{frozen:"boolean"}]);$(this).find("tr").each(function(){var _4d=[];$(this).find("th").each(function(){var th=$(this),col=$.extend({},$.parser.parseOptions(this,["field","align","halign","order",{sortable:"boolean",checkbox:"boolean",resizable:"boolean",fixed:"boolean"},{rowspan:"number",colspan:"number",width:"number"}]),{title:th.html()||void 0,hidden:th.attr("hidden")?!0:void 0,formatter:th.attr("formatter")?eval(th.attr("formatter")):void 0,styler:th.attr("styler")?eval(th.attr("styler")):void 0,sorter:th.attr("sorter")?eval(th.attr("sorter")):void 0});if(th.attr("editor")){var s=$.trim(th.attr("editor"));col.editor="{"==s.substr(0,1)?eval("("+s+")"):s}_4d.push(col)}),opt.frozen?_4b.push(_4d):_4c.push(_4d)})}),[_4b,_4c]}var _4e=$('<div class="datagrid-wrap"><div class="datagrid-view"><div class="datagrid-view1"><div class="datagrid-header"><div class="datagrid-header-inner"></div></div><div class="datagrid-body"><div class="datagrid-body-inner"></div></div><div class="datagrid-footer"><div class="datagrid-footer-inner"></div></div></div><div class="datagrid-view2"><div class="datagrid-header"><div class="datagrid-header-inner"></div></div><div class="datagrid-body"></div><div class="datagrid-footer"><div class="datagrid-footer-inner"></div></div></div></div></div>').insertAfter(_48);_4e.panel({doSize:!1}),_4e.panel("panel").addClass("datagrid").bind("_resize",function(a,b){var c=$.data(_48,"datagrid").options;return(1==c.fit||b)&&(_19(_48),setTimeout(function(){$.data(_48,"datagrid")&&_51(_48)},0)),!1}),$(_48).hide().appendTo(_4e.children("div.datagrid-view"));var cc=_4a(),_52=_4e.children("div.datagrid-view"),_53=_52.children("div.datagrid-view1"),_54=_52.children("div.datagrid-view2"),_55=_4e.closest("div.datagrid-view");_55.length||(_55=_52);var ss=_9(_55);return{panel:_4e,frozenColumns:cc[0],columns:cc[1],dc:{view:_52,view1:_53,view2:_54,header1:_53.children("div.datagrid-header").children("div.datagrid-header-inner"),header2:_54.children("div.datagrid-header").children("div.datagrid-header-inner"),body1:_53.children("div.datagrid-body").children("div.datagrid-body-inner"),body2:_54.children("div.datagrid-body"),footer1:_53.children("div.datagrid-footer").children("div.datagrid-footer-inner"),footer2:_54.children("div.datagrid-footer").children("div.datagrid-footer-inner")},ss:ss}}function _56(_57){function _5d(a,b,c){if(b){$(a).show(),$(a).empty();var d=[],e=[];_59.sortName&&(d=_59.sortName.split(","),e=_59.sortOrder.split(","));for(var f=$('<table class="datagrid-htable" border="0" cellspacing="0" cellpadding="0"><tbody></tbody></table>').appendTo(a),g=0;g<b.length;g++)for(var h=$('<tr class="datagrid-header-row"></tr>').appendTo($("tbody",f)),i=b[g],j=0;j<i.length;j++){var k=i[j],l="";k.rowspan&&(l+='rowspan="'+k.rowspan+'" '),k.colspan&&(l+='colspan="'+k.colspan+'" ');var m=$("<td "+l+"></td>").appendTo(h);if(k.checkbox)m.attr("field",k.field),$('<div class="datagrid-header-check"></div>').html('<input type="checkbox"/>').appendTo(m);else if(k.field){m.attr("field",k.field),m.append('<div class="datagrid-cell"><span></span><span class="datagrid-sort-icon"></span></div>'),$("span",m).html(k.title),$("span.datagrid-sort-icon",m).html("&nbsp;");var n=m.find("div.datagrid-cell"),o=_2(d,k.field);o>=0&&n.addClass("datagrid-sort-"+e[o]),0==k.resizable&&n.attr("resizable","false"),k.width?(n._outerWidth(k.width),k.boxWidth=parseInt(n[0].style.width)):k.auto=!0,n.css("text-align",k.halign||k.align||""),k.cellClass=_58.cellClassPrefix+"-"+k.field.replace(/[\.|\s]/g,"-"),n.addClass(k.cellClass).css("width","")}else $('<div class="datagrid-cell-group"></div>').html(k.title).appendTo(m);k.hidden&&m.hide()}if(c&&_59.rownumbers){var m=$('<td rowspan="'+_59.frozenColumns.length+'"><div class="datagrid-header-rownumber"></div></td>');0==$("tr",f).length?m.wrap('<tr class="datagrid-header-row"></tr>').parent().appendTo($("tbody",f)):m.prependTo($("tr:first",f))}}}function _5e(){for(var a=[],b=_6e(_57,!0).concat(_6e(_57)),c=0;c<b.length;c++){var d=_6f(_57,b[c]);d&&!d.checkbox&&a.push(["."+d.cellClass,d.boxWidth?d.boxWidth+"px":"auto"])}_58.ss.add(a),_58.ss.dirty(_58.cellSelectorPrefix),_58.cellSelectorPrefix="."+_58.cellClassPrefix}var _58=$.data(_57,"datagrid"),_59=_58.options,dc=_58.dc,_5a=_58.panel;if(_5a.panel($.extend({},_59,{id:null,doSize:!1,onResize:function(a,b){setTimeout(function(){$.data(_57,"datagrid")&&(_1e(_57),_8d(_57),_59.onResize.call(_5a,a,b))},0)},onExpand:function(){_2e(_57),_59.onExpand.call(_5a)}})),_58.rowIdPrefix="datagrid-row-r"+ ++_1,_58.cellClassPrefix="datagrid-cell-c"+_1,_5d(dc.header1,_59.frozenColumns,!0),_5d(dc.header2,_59.columns,!1),_5e(),dc.header1.add(dc.header2).css("display",_59.showHeader?"block":"none"),dc.footer1.add(dc.footer2).css("display",_59.showFooter?"block":"none"),_59.toolbar)if($.isArray(_59.toolbar)){$("div.datagrid-toolbar",_5a).remove();for(var tb=$('<div class="datagrid-toolbar"><table cellspacing="0" cellpadding="0"><tr></tr></table></div>').prependTo(_5a),tr=tb.find("tr"),i=0;i<_59.toolbar.length;i++){var btn=_59.toolbar[i];if("-"==btn)$('<td><div class="datagrid-btn-separator"></div></td>').appendTo(tr);else{var td=$("<td></td>").appendTo(tr),_5f=$('<a href="javascript:void(0)"></a>').appendTo(td);_5f[0].onclick=eval(btn.handler||function(){}),_5f.linkbutton($.extend({},btn,{plain:!0}))}}}else $(_59.toolbar).addClass("datagrid-toolbar").prependTo(_5a),$(_59.toolbar).show();else $("div.datagrid-toolbar",_5a).remove();if($("div.datagrid-pager",_5a).remove(),_59.pagination){var _60=$('<div class="datagrid-pager"></div>');if("bottom"==_59.pagePosition)_60.appendTo(_5a);else if("top"==_59.pagePosition)_60.addClass("datagrid-pager-top").prependTo(_5a);else{var _61=$('<div class="datagrid-pager datagrid-pager-top"></div>').prependTo(_5a);_60.appendTo(_5a),_60=_60.add(_61)}_60.pagination({total:_59.pageNumber*_59.pageSize,pageNumber:_59.pageNumber,pageSize:_59.pageSize,pageList:_59.pageList,onSelectPage:function(a,b){_59.pageNumber=a,_59.pageSize=b,_60.pagination("refresh",{pageNumber:a,pageSize:b}),_16b(_57)}}),_59.pageSize=_60.pagination("options").pageSize}}function _70(a){function b(a){return a.attr("datagrid-row-index")?parseInt(a.attr("datagrid-row-index")):a.attr("node-id")}function c(a){return a.length&&a.parent().length}var d=$.data(a,"datagrid"),e=d.panel,f=d.options,g=d.dc,h=g.header1.add(g.header2);h.find("input[type=checkbox]").unbind(".datagrid").bind("click.datagrid",function(b){return f.singleSelect&&f.selectOnCheck?!1:($(this).is(":checked")?_106(a):_10c(a),void b.stopPropagation())});var i=h.find("div.datagrid-cell");i.closest("td").unbind(".datagrid").bind("mouseenter.datagrid",function(){d.resizing||$(this).addClass("datagrid-header-over")}).bind("mouseleave.datagrid",function(){$(this).removeClass("datagrid-header-over")}).bind("contextmenu.datagrid",function(b){var c=$(this).attr("field");f.onHeaderContextMenu.call(a,b,c)}),i.unbind(".datagrid").bind("click.datagrid",function(b){var c=$(this).offset().left+5,e=$(this).offset().left+$(this)._outerWidth()-5;if(b.pageX<e&&b.pageX>c){var g=$(this).parent().attr("field"),h=_6f(a,g);if(!h.sortable||d.resizing)return;var j=[],k=[];f.sortName&&(j=f.sortName.split(","),k=f.sortOrder.split(","));var l=_2(j,g),m=h.order||"asc";if(l>=0){$(this).removeClass("datagrid-sort-asc datagrid-sort-desc");var n="asc"==k[l]?"desc":"asc";f.multiSort&&n==m?(j.splice(l,1),k.splice(l,1)):(k[l]=n,$(this).addClass("datagrid-sort-"+n))}else f.multiSort?(j.push(g),k.push(m)):(j=[g],k=[m],i.removeClass("datagrid-sort-asc datagrid-sort-desc")),$(this).addClass("datagrid-sort-"+m);if(f.sortName=j.join(","),f.sortOrder=k.join(","),f.remoteSort)_16b(a);else{var o=$.data(a,"datagrid").data;_c6(a,o)}f.onSortColumn.call(a,f.sortName,f.sortOrder)}}).bind("dblclick.datagrid",function(b){var c=$(this).offset().left+5,d=$(this).offset().left+$(this)._outerWidth()-5,e="right"==f.resizeHandle?b.pageX>d:"left"==f.resizeHandle?b.pageX<c:b.pageX<c||b.pageX>d;if(e){var g=$(this).parent().attr("field"),h=_6f(a,g);if(0==h.resizable)return;$(a).datagrid("autoSizeColumn",g),h.auto=!1}});var j="right"==f.resizeHandle?"e":"left"==f.resizeHandle?"w":"e,w";i.each(function(){$(this).resizable({handles:j,disabled:$(this).attr("resizable")?"false"==$(this).attr("resizable"):!1,minWidth:25,onStartResize:function(a){d.resizing=!0,h.css("cursor",$("body").css("cursor")),d.proxy||(d.proxy=$('<div class="datagrid-resize-proxy"></div>').appendTo(g.view)),d.proxy.css({left:a.pageX-$(e).offset().left-1,display:"none"}),setTimeout(function(){d.proxy&&d.proxy.show()},500)},onResize:function(a){return d.proxy.css({left:a.pageX-$(e).offset().left-1,display:"block"}),!1},onStopResize:function(){h.css("cursor",""),$(this).css("height",""),$(this)._outerWidth($(this)._outerWidth());var b=$(this).parent().attr("field"),c=_6f(a,b);c.width=$(this)._outerWidth(),c.boxWidth=parseInt(this.style.width),c.auto=void 0,$(this).css("width",""),_51(a,b),d.proxy.remove(),d.proxy=null,$(this).parents("div:first.datagrid-header").parent().hasClass("datagrid-view1")&&_1e(a),_8d(a),f.onResizeColumn.call(a,b,c.width),setTimeout(function(){d.resizing=!1},0)}})}),g.body1.add(g.body2).unbind().bind("mouseover",function(e){if(!d.resizing){var f=$(e.target).closest("tr.datagrid-row");if(c(f)){var g=b(f);_eb(a,g),e.stopPropagation()}}}).bind("mouseout",function(d){var e=$(d.target).closest("tr.datagrid-row");if(c(e)){var g=b(e);f.finder.getTr(a,g).removeClass("datagrid-row-over"),d.stopPropagation()}}).bind("click",function(d){var e=$(d.target),g=e.closest("tr.datagrid-row");if(c(g)){var h=b(g);if(e.parent().hasClass("datagrid-cell-check"))f.singleSelect&&f.selectOnCheck?(f.checkOnSelect||_10c(a,!0),_f8(a,h)):e.is(":checked")?_f8(a,h):_100(a,h);else{var i=f.finder.getRow(a,h),j=e.closest("td[field]",g);if(j.length){var k=j.attr("field");f.onClickCell.call(a,h,k,i[k])}1==f.singleSelect?_f0(a,h):g.hasClass("datagrid-row-selected")?_f9(a,h):_f0(a,h),f.onClickRow.call(a,h,i)}d.stopPropagation()}}).bind("dblclick",function(d){var e=$(d.target),g=e.closest("tr.datagrid-row");if(c(g)){var h=b(g),i=f.finder.getRow(a,h),j=e.closest("td[field]",g);if(j.length){var k=j.attr("field");f.onDblClickCell.call(a,h,k,i[k])}f.onDblClickRow.call(a,h,i),d.stopPropagation()}}).bind("contextmenu",function(d){var e=$(d.target).closest("tr.datagrid-row");if(c(e)){var g=b(e),h=f.finder.getRow(a,g);f.onRowContextMenu.call(a,d,g,h),d.stopPropagation()}}),g.body2.bind("scroll",function(){var a=g.view1.children("div.datagrid-body");a.scrollTop($(this).scrollTop());var b=g.body1.children(":first"),c=g.body2.children(":first");if(b.length&&c.length){var d=b.offset().top,e=c.offset().top;d!=e&&a.scrollTop(a.scrollTop()+d-e)}g.view2.children("div.datagrid-header,div.datagrid-footer")._scrollLeft($(this)._scrollLeft()),g.body2.children("table.datagrid-btable-frozen").css("left",-$(this)._scrollLeft())})}function _8d(a){function b(a,b){a.width+=b,a.boxWidth+=b;var c=60;a.minWidth&&(c=a.minWidth),a.boxWidth<c&&(a.boxWidth=c)}function c(a){return a.hidden||a.checkbox||a.auto||a.fixed?void 0:!0}var d=$.data(a,"datagrid"),e=d.options,f=d.dc;if(e.fitColumns){d.leftWidth||(d.leftWidth=0);for(var g,h=f.view2.children("div.datagrid-header"),i=0,j=_6e(a,!1),k=0;k<j.length;k++){var l=_6f(a,j[k]);c(l)&&(i+=l.width,g=l)}if(i){g&&b(g,-d.leftWidth);var m=h.children("div.datagrid-header-inner").show(),n=h.width()-h.find("table").width()-e.scrollbarSize+d.leftWidth,o=n/i;e.showHeader||m.hide();for(var k=0;k<j.length;k++){var l=_6f(a,j[k]);if(c(l)){var p=parseInt(l.width*o);b(l,p),n-=p}}d.leftWidth=n,g&&b(g,d.leftWidth),_51(a)}}}function _9c(a,b){function c(b){function c(c){function f(a){return a.is(":visible")?a._outerWidth():g.html(a.html())._outerWidth()}var h=0;return"header"==c?h=f(d):e.finder.getTr(a,0,c).find('td[field="'+b+'"] div.datagrid-cell').each(function(){var a=f($(this));a>h&&(h=a)}),h}var d=f.view.find('div.datagrid-header td[field="'+b+'"] div.datagrid-cell');d.css("width","");var h=$(a).datagrid("getColumnOption",b);h.width=void 0,h.boxWidth=void 0,h.auto=!0,$(a).datagrid("fixColumnSize",b);var i=Math.max(c("header"),c("allbody"),c("allfooter"));d._outerWidth(i),h.width=i,h.boxWidth=parseInt(d[0].style.width),d.css("width",""),$(a).datagrid("fixColumnSize",b),e.onResizeColumn.call(a,b,h.width)}var d=$.data(a,"datagrid"),e=d.options,f=d.dc,g=$('<div class="datagrid-cell" style="position:absolute;left:-9999px"></div>').appendTo("body");if(b)c(b),e.fitColumns&&(_1e(a),_8d(a));else{for(var h=!1,i=_6e(a,!0).concat(_6e(a,!1)),j=0;j<i.length;j++){var b=i[j],k=_6f(a,b);k.auto&&(c(b),h=!0)}h&&e.fitColumns&&(_1e(a),_8d(a))}g.remove()}function _51(a,b){function c(b){var c=_6f(a,b);c.checkbox||d.ss.set("."+c.cellClass,c.boxWidth?c.boxWidth+"px":"auto")}var d=$.data(a,"datagrid"),e=(d.options,d.dc),f=e.view.find("table.datagrid-btable,table.datagrid-ftable");if(f.css("table-layout","fixed"),b)c(b);else for(var g=_6e(a,!0).concat(_6e(a,!1)),h=0;h<g.length;h++)c(g[h]);f.css("table-layout","auto"),_b0(a),setTimeout(function(){_2e(a),_b5(a)},0)}function _b0(a){var b=$.data(a,"datagrid").dc;b.body1.add(b.body2).find("td.datagrid-td-merged").each(function(){for(var b=$(this),c=b.attr("colspan")||1,d=_6f(a,b.attr("field")).width,e=1;c>e;e++)b=b.next(),d+=_6f(a,b.attr("field")).width+1;$(this).children("div.datagrid-cell")._outerWidth(d)})}function _b5(a){var b=$.data(a,"datagrid").dc;b.view.find("div.datagrid-editable").each(function(){var b=$(this),c=b.parent().attr("field"),d=$(a).datagrid("getColumnOption",c);b._outerWidth(d.width);var e=$.data(this,"datagrid.editor");e.actions.resize&&e.actions.resize(e.target,b.width())})}function _6f(a,b){function c(a){if(a)for(var c=0;c<a.length;c++)for(var d=a[c],e=0;e<d.length;e++){var f=d[e];if(f.field==b)return f}return null}var d=$.data(a,"datagrid").options,e=c(d.columns);return e||(e=c(d.frozenColumns)),e}function _6e(a,b){function c(a){for(var b=0,c=0;;){if(void 0==g[c]){if(b==a)return c;b++}c++}}function d(a){for(var b=[],d=0,e=0;e<f[a].length;e++){var h=f[a][e];h.field&&b.push([d,h.field]),d+=parseInt(h.colspan||"1")}for(var e=0;e<b.length;e++)b[e][0]=c(b[e][0]);for(var e=0;e<b.length;e++){var i=b[e];g[i[0]]=i[1]}}var e=$.data(a,"datagrid").options,f=1==b?e.frozenColumns||[[]]:e.columns;if(0==f.length)return[];for(var g=[],h=0;h<f.length;h++)d(h);return g}function _c6(a,b){function c(){function c(a,b){for(var c=0;c<a.length;c++)if(a[c][e.idField]==b[e.idField])return a[c]=b,!0;return!1}if(e.idField)for(var f=0;f<b.rows.length;f++){var g=b.rows[f];c(d.selectedRows,g)&&e.finder.getTr(a,f).addClass("datagrid-row-selected"),c(d.checkedRows,g)&&e.finder.getTr(a,f).find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!0)}}var d=$.data(a,"datagrid"),e=d.options,f=d.dc;if(b=e.loadFilter.call(a,b),b.total=parseInt(b.total),d.data=b,b.footer&&(d.footer=b.footer),!e.remoteSort&&e.sortName){var g=e.sortName.split(","),h=e.sortOrder.split(",");b.rows.sort(function(b,c){for(var d=0,e=0;e<g.length;e++){var f=g[e],i=h[e],j=_6f(a,f),k=j.sorter||function(a,b){return a==b?0:a>b?1:-1};if(d=k(b[f],c[f])*("asc"==i?1:-1),0!=d)return d}return d})}e.view.onBeforeRender&&e.view.onBeforeRender.call(e.view,a,b.rows),e.view.render.call(e.view,a,f.body2,!1),e.view.render.call(e.view,a,f.body1,!0),e.showFooter&&(e.view.renderFooter.call(e.view,a,f.footer2,!1),e.view.renderFooter.call(e.view,a,f.footer1,!0)),e.view.onAfterRender&&e.view.onAfterRender.call(e.view,a),d.ss.clean(),e.onLoadSuccess.call(a,b);var i=$(a).datagrid("getPager");if(i.length){var j=i.pagination("options");j.total!=b.total&&(i.pagination("refresh",{total:b.total}),e.pageNumber!=j.pageNumber&&(e.pageNumber=j.pageNumber,_16b(a)))}_2e(a),f.body2.triggerHandler("scroll"),c(),$(a).datagrid("autoSizeColumn")}function _d2(a,b){var c=$.data(a,"datagrid"),d=c.options,e=c.data.rows;if("object"==typeof b)return _2(e,b);for(var f=0;f<e.length;f++)if(e[f][d.idField]==b)return f;return-1}function _d7(a){var b=$.data(a,"datagrid"),c=b.options,d=b.data;if(c.idField)return b.selectedRows;var e=[];return c.finder.getTr(a,"","selected",2).each(function(){var a=parseInt($(this).attr("datagrid-row-index"));e.push(d.rows[a])}),e}function _de(a){var b=$.data(a,"datagrid"),c=b.options;if(c.idField)return b.checkedRows;var d=[];return c.finder.getTr(a,"","checked",2).each(function(){d.push(c.finder.getRow(a,$(this)))}),d}function _e3(a,b){var c=$.data(a,"datagrid"),d=c.dc,e=c.options,f=e.finder.getTr(a,b);if(f.length){if(f.closest("table").hasClass("datagrid-btable-frozen"))return;var g=d.view2.children("div.datagrid-header")._outerHeight(),h=d.body2,i=h.outerHeight(!0)-h.outerHeight(),j=f.position().top-g-i;0>j?h.scrollTop(h.scrollTop()+j):j+f._outerHeight()>h.height()-18&&h.scrollTop(h.scrollTop()+j+f._outerHeight()-h.height()+18)}}function _eb(a,b){var c=$.data(a,"datagrid"),d=c.options;d.finder.getTr(a,c.highlightIndex).removeClass("datagrid-row-over"),d.finder.getTr(a,b).addClass("datagrid-row-over"),c.highlightIndex=b}function _f0(a,b,c){var d=$.data(a,"datagrid"),e=(d.dc,d.options),f=d.selectedRows;e.singleSelect&&(_f7(a),f.splice(0,f.length)),!c&&e.checkOnSelect&&_f8(a,b,!0);var g=e.finder.getRow(a,b);e.idField&&_7(f,e.idField,g),e.finder.getTr(a,b).addClass("datagrid-row-selected"),e.onSelect.call(a,b,g),_e3(a,b)}function _f9(a,b,c){var d=$.data(a,"datagrid"),e=(d.dc,d.options),f=$.data(a,"datagrid").selectedRows;!c&&e.checkOnSelect&&_100(a,b,!0),e.finder.getTr(a,b).removeClass("datagrid-row-selected");var g=e.finder.getRow(a,b);e.idField&&_4(f,e.idField,g[e.idField]),e.onUnselect.call(a,b,g)}function _101(a,b){var c=$.data(a,"datagrid"),d=c.options,e=c.data.rows,f=$.data(a,"datagrid").selectedRows;if(!b&&d.checkOnSelect&&_106(a,!0),d.finder.getTr(a,"","allbody").addClass("datagrid-row-selected"),d.idField)for(var g=0;g<e.length;g++)_7(f,d.idField,e[g]);d.onSelectAll.call(a,e)}function _f7(a,b){var c=$.data(a,"datagrid"),d=c.options,e=c.data.rows,f=$.data(a,"datagrid").selectedRows;if(!b&&d.checkOnSelect&&_10c(a,!0),d.finder.getTr(a,"","selected").removeClass("datagrid-row-selected"),d.idField)for(var g=0;g<e.length;g++)_4(f,d.idField,e[g][d.idField]);d.onUnselectAll.call(a,e)}function _f8(a,b,c){var d=$.data(a,"datagrid"),e=d.options;!c&&e.selectOnCheck&&_f0(a,b,!0);var f=e.finder.getTr(a,b).addClass("datagrid-row-checked"),g=f.find("div.datagrid-cell-check input[type=checkbox]");if(g._propAttr("checked",!0),f=e.finder.getTr(a,"","checked",2),f.length==d.data.rows.length){var h=d.dc,i=h.header1.add(h.header2);i.find("input[type=checkbox]")._propAttr("checked",!0)}var j=e.finder.getRow(a,b);e.idField&&_7(d.checkedRows,e.idField,j),e.onCheck.call(a,b,j)}function _100(a,b,c){var d=$.data(a,"datagrid"),e=d.options;!c&&e.selectOnCheck&&_f9(a,b,!0);var f=e.finder.getTr(a,b).removeClass("datagrid-row-checked"),g=f.find("div.datagrid-cell-check input[type=checkbox]");g._propAttr("checked",!1);var h=d.dc,i=h.header1.add(h.header2);i.find("input[type=checkbox]")._propAttr("checked",!1);var j=e.finder.getRow(a,b);e.idField&&_4(d.checkedRows,e.idField,j[e.idField]),e.onUncheck.call(a,b,j)}function _106(a,b){var c=$.data(a,"datagrid"),d=c.options,e=c.data.rows;!b&&d.selectOnCheck&&_101(a,!0);var f=c.dc,g=f.header1.add(f.header2).find("input[type=checkbox]"),h=d.finder.getTr(a,"","allbody").addClass("datagrid-row-checked").find("div.datagrid-cell-check input[type=checkbox]");if(g.add(h)._propAttr("checked",!0),d.idField)for(var i=0;i<e.length;i++)_7(c.checkedRows,d.idField,e[i]);d.onCheckAll.call(a,e)}function _10c(a,b){var c=$.data(a,"datagrid"),d=c.options,e=c.data.rows;!b&&d.selectOnCheck&&_f7(a,!0);var f=c.dc,g=f.header1.add(f.header2).find("input[type=checkbox]"),h=d.finder.getTr(a,"","checked").removeClass("datagrid-row-checked").find("div.datagrid-cell-check input[type=checkbox]");if(g.add(h)._propAttr("checked",!1),d.idField)for(var i=0;i<e.length;i++)_4(c.checkedRows,d.idField,e[i][d.idField]);d.onUncheckAll.call(a,e)}function _11e(a,b){var c=$.data(a,"datagrid").options,d=c.finder.getTr(a,b),e=c.finder.getRow(a,b);d.hasClass("datagrid-row-editing")||0!=c.onBeforeEdit.call(a,b,e)&&(d.addClass("datagrid-row-editing"),_121(a,b),_b5(a),d.find("div.datagrid-editable").each(function(){var a=$(this).parent().attr("field"),b=$.data(this,"datagrid.editor");b.actions.setValue(b.target,e[a])}),_123(a,b))}function _124(a,b,c){var d=$.data(a,"datagrid").options,e=$.data(a,"datagrid").updatedRows,f=$.data(a,"datagrid").insertedRows,g=d.finder.getTr(a,b),h=d.finder.getRow(a,b);if(g.hasClass("datagrid-row-editing")){if(!c){if(!_123(a,b))return;var i=!1,j={};g.find("div.datagrid-editable").each(function(){var a=$(this).parent().attr("field"),b=$.data(this,"datagrid.editor"),c=b.actions.getValue(b.target);h[a]!=c&&(h[a]=c,i=!0,j[a]=c)}),i&&-1==_2(f,h)&&-1==_2(e,h)&&e.push(h)}g.removeClass("datagrid-row-editing"),_12e(a,b),$(a).datagrid("refreshRow",b),c?d.onCancelEdit.call(a,b,h):d.onAfterEdit.call(a,b,h,j)}}function _12f(a,b){var c=$.data(a,"datagrid").options,d=c.finder.getTr(a,b),e=[];return d.children("td").each(function(){var a=$(this).find("div.datagrid-editable");if(a.length){var b=$.data(a[0],"datagrid.editor");e.push(b)}}),e}function _133(a,b){for(var c=_12f(a,void 0!=b.index?b.index:b.id),d=0;d<c.length;d++)if(c[d].field==b.field)return c[d];
return null}function _121(a,b){var c=$.data(a,"datagrid").options,d=c.finder.getTr(a,b);d.children("td").each(function(){var b=$(this).find("div.datagrid-cell"),d=$(this).attr("field"),e=_6f(a,d);if(e&&e.editor){var f,g;"string"==typeof e.editor?f=e.editor:(f=e.editor.type,g=e.editor.options);var h=c.editors[f];if(h){var i=b.html(),j=b._outerWidth();b.addClass("datagrid-editable"),b._outerWidth(j),b.html('<table border="0" cellspacing="0" cellpadding="1"><tr><td></td></tr></table>'),b.children("table").bind("click dblclick contextmenu",function(a){a.stopPropagation()}),$.data(b[0],"datagrid.editor",{actions:h,target:h.init(b.find("td"),g),field:d,type:f,oldHtml:i})}}}),_2e(a,b,!0)}function _12e(a,b){var c=$.data(a,"datagrid").options,d=c.finder.getTr(a,b);d.children("td").each(function(){var a=$(this).find("div.datagrid-editable");if(a.length){var b=$.data(a[0],"datagrid.editor");b.actions.destroy&&b.actions.destroy(b.target),a.html(b.oldHtml),$.removeData(a[0],"datagrid.editor"),a.removeClass("datagrid-editable"),a.css("width","")}})}function _123(a,b){var c=$.data(a,"datagrid").options.finder.getTr(a,b);if(!c.hasClass("datagrid-row-editing"))return!0;var d=c.find(".validatebox-text");d.validatebox("validate"),d.trigger("mouseleave");var e=c.find(".validatebox-invalid");return 0==e.length}function _144(a,b){var c=$.data(a,"datagrid").insertedRows,d=$.data(a,"datagrid").deletedRows,e=$.data(a,"datagrid").updatedRows;if(!b){var f=[];return f=f.concat(c),f=f.concat(d),f=f.concat(e)}return"inserted"==b?c:"deleted"==b?d:"updated"==b?e:[]}function _14a(a,b){var c=$.data(a,"datagrid"),d=c.options,e=c.data,f=c.insertedRows,g=c.deletedRows;$(a).datagrid("cancelEdit",b);var h=e.rows[b];_2(f,h)>=0?_4(f,h):g.push(h),_4(c.selectedRows,d.idField,e.rows[b][d.idField]),_4(c.checkedRows,d.idField,e.rows[b][d.idField]),d.view.deleteRow.call(d.view,a,b),"auto"==d.height&&_2e(a),$(a).datagrid("getPager").pagination("refresh",{total:e.total})}function _150(a,b){var c=$.data(a,"datagrid").data,d=$.data(a,"datagrid").options.view,e=$.data(a,"datagrid").insertedRows;d.insertRow.call(d,a,b.index,b.row),e.push(b.row),$(a).datagrid("getPager").pagination("refresh",{total:c.total})}function _154(a,b){var c=$.data(a,"datagrid").data,d=$.data(a,"datagrid").options.view,e=$.data(a,"datagrid").insertedRows;d.insertRow.call(d,a,null,b),e.push(b),$(a).datagrid("getPager").pagination("refresh",{total:c.total})}function _157(a){for(var b=$.data(a,"datagrid"),c=b.data,d=c.rows,e=[],f=0;f<d.length;f++)e.push($.extend({},d[f]));b.originalRows=e,b.updatedRows=[],b.insertedRows=[],b.deletedRows=[]}function _15b(a){for(var b=$.data(a,"datagrid").data,c=!0,d=0,e=b.rows.length;e>d;d++)_123(a,d)?_124(a,d,!1):c=!1;c&&_157(a)}function _15d(a){function b(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c][e.idField]);return b}function c(b,c){for(var d=0;d<b.length;d++){var e=_d2(a,b[d]);e>=0&&("s"==c?_f0:_f8)(a,e,!0)}}for(var d=$.data(a,"datagrid"),e=d.options,f=d.originalRows,g=d.insertedRows,h=d.deletedRows,i=d.selectedRows,j=d.checkedRows,k=d.data,l=0;l<k.rows.length;l++)_124(a,l,!0);var m=b(i),n=b(j);i.splice(0,i.length),j.splice(0,j.length),k.total+=h.length-g.length,k.rows=f,_c6(a,k),c(m,"s"),c(n,"c"),_157(a)}function _16b(a,b){function c(){var b=d.loader.call(a,e,function(b){setTimeout(function(){$(a).datagrid("loaded")},0),_c6(a,b),setTimeout(function(){_157(a)},0)},function(){setTimeout(function(){$(a).datagrid("loaded")},0),d.onLoadError.apply(a,arguments)});0==b&&$(a).datagrid("loaded")}var d=$.data(a,"datagrid").options;b&&(d.queryParams=b);var e=$.extend({},d.queryParams);d.pagination&&$.extend(e,{page:d.pageNumber,rows:d.pageSize}),d.sortName&&$.extend(e,{sort:d.sortName,order:d.sortOrder}),0!=d.onBeforeLoad.call(a,e)&&($(a).datagrid("loading"),setTimeout(function(){c()},0))}function _171(a,b){var c=$.data(a,"datagrid").options;if(b.rowspan=b.rowspan||1,b.colspan=b.colspan||1,1!=b.rowspan||1!=b.colspan){var d=c.finder.getTr(a,void 0!=b.index?b.index:b.id);if(d.length){var e=c.finder.getRow(a,d),f=e[b.field],g=d.find('td[field="'+b.field+'"]');g.attr("rowspan",b.rowspan).attr("colspan",b.colspan),g.addClass("datagrid-td-merged");for(var h=1;h<b.colspan;h++)g=g.next(),g.hide(),e[g.attr("field")]=f;for(var h=1;h<b.rowspan&&(d=d.next(),d.length);h++){var e=c.finder.getRow(a,d),g=d.find('td[field="'+b.field+'"]').hide();e[g.attr("field")]=f;for(var i=1;i<b.colspan;i++)g=g.next(),g.hide(),e[g.attr("field")]=f}_b0(a)}}}var _1=0;$.fn.datagrid=function(a,b){return"string"==typeof a?$.fn.datagrid.methods[a](this,b):(a=a||{},this.each(function(){var b,c=$.data(this,"datagrid");if(c)b=$.extend(c.options,a),c.options=b;else{b=$.extend({},$.extend({},$.fn.datagrid.defaults,{queryParams:{}}),$.fn.datagrid.parseOptions(this),a),$(this).css("width","").css("height","");var d=_47(this,b.rownumbers);b.columns||(b.columns=d.columns),b.frozenColumns||(b.frozenColumns=d.frozenColumns),b.columns=$.extend(!0,[],b.columns),b.frozenColumns=$.extend(!0,[],b.frozenColumns),b.view=$.extend({},b.view),$.data(this,"datagrid",{options:b,panel:d.panel,dc:d.dc,ss:d.ss,selectedRows:[],checkedRows:[],data:{total:0,rows:[]},originalRows:[],updatedRows:[],insertedRows:[],deletedRows:[]})}if(_56(this),b.data)_c6(this,b.data),_157(this);else{var e=$.fn.datagrid.parseData(this);e.total>0&&(_c6(this,e),_157(this))}_19(this),_16b(this),_70(this)}))};var _179={text:{init:function(a,b){var c=$('<input type="text" class="datagrid-editable-input">').appendTo(a);return b=b||{},c.attr("disabled",b.disabled||!1),c},getValue:function(a){return $(a).val()},setValue:function(a,b){$(a).val(b)},resize:function(a,b){$(a)._outerWidth(b)._outerHeight(22)}},textarea:{init:function(a){var b=$('<textarea class="datagrid-editable-input"></textarea>').appendTo(a);return b},getValue:function(a){return $(a).val()},setValue:function(a,b){$(a).val(b)},resize:function(a,b){$(a)._outerWidth(b)}},checkbox:{init:function(a,b){var c=$('<input type="checkbox">').appendTo(a);return c.val(b.on),c.attr("offval",b.off),c},getValue:function(a){return $(a).is(":checked")?$(a).val():$(a).attr("offval")},setValue:function(a,b){var c=!1;$(a).val()==b&&(c=!0),$(a)._propAttr("checked",c)}},numberbox:{init:function(a,b){var c=$('<input type="text" class="datagrid-editable-input">').appendTo(a);return c.numberbox(b),c},destroy:function(a){$(a).numberbox("destroy")},getValue:function(a){return $(a).blur(),$(a).numberbox("getValue")},setValue:function(a,b){$(a).numberbox("setValue",b)},resize:function(a,b){$(a)._outerWidth(b)._outerHeight(22)}},validatebox:{init:function(a,b){var c=$('<input type="text" class="datagrid-editable-input">').appendTo(a);return c.validatebox(b),c},destroy:function(a){$(a).validatebox("destroy")},getValue:function(a){return $(a).val()},setValue:function(a,b){$(a).val(b)},resize:function(a,b){$(a)._outerWidth(b)._outerHeight(22)}},combobox:{init:function(a,b){var c=$('<input type="text">').appendTo(a);return c.combobox(b||{}),c},destroy:function(a){$(a).combobox("destroy")},getValue:function(a){var b=$(a).combobox("options");return b.multiple?$(a).combobox("getValues").join(b.separator):$(a).combobox("getValue")},setValue:function(a,b){var c=$(a).combobox("options");c.multiple?b?$(a).combobox("setValues",b.split(c.separator)):$(a).combobox("clear"):$(a).combobox("setValue",b)},resize:function(a,b){$(a).combobox("resize",b)}},combotree:{init:function(a,b){var c=$('<input type="text">').appendTo(a);return c.combotree(b),c},destroy:function(a){$(a).combotree("destroy")},getValue:function(a){return $(a).combotree("getValue")},setValue:function(a,b){$(a).combotree("setValue",b)},resize:function(a,b){$(a).combotree("resize",b)}}};$.fn.datagrid.methods={options:function(a){var b=$.data(a[0],"datagrid").options,c=$.data(a[0],"datagrid").panel.panel("options"),d=$.extend(b,{width:c.width,height:c.height,closed:c.closed,collapsed:c.collapsed,minimized:c.minimized,maximized:c.maximized});return d},getPanel:function(a){return $.data(a[0],"datagrid").panel},getPager:function(a){return $.data(a[0],"datagrid").panel.children("div.datagrid-pager")},getColumnFields:function(a,b){return _6e(a[0],b)},getColumnOption:function(a,b){return _6f(a[0],b)},resize:function(a,b){return a.each(function(){_19(this,b)})},load:function(a,b){return a.each(function(){var a=$(this).datagrid("options");a.pageNumber=1;var c=$(this).datagrid("getPager");c.pagination("refresh",{pageNumber:1}),_16b(this,b)})},reload:function(a,b){return a.each(function(){_16b(this,b)})},reloadFooter:function(a,b){return a.each(function(){var a=$.data(this,"datagrid").options,c=$.data(this,"datagrid").dc;b&&($.data(this,"datagrid").footer=b),a.showFooter&&(a.view.renderFooter.call(a.view,this,c.footer2,!1),a.view.renderFooter.call(a.view,this,c.footer1,!0),a.view.onAfterRender&&a.view.onAfterRender.call(a.view,this),$(this).datagrid("fixRowHeight"))})},loading:function(a){return a.each(function(){var a=$.data(this,"datagrid").options;if($(this).datagrid("getPager").pagination("loading"),a.loadMsg){var b=$(this).datagrid("getPanel");if(!b.children("div.datagrid-mask").length){$('<div class="datagrid-mask" style="display:block"></div>').appendTo(b);var c=$('<div class="datagrid-mask-msg" style="display:block;left:50%"></div>').html(a.loadMsg).appendTo(b);c._outerHeight(40),c.css({marginLeft:-c.outerWidth()/2,lineHeight:c.height()+"px"})}}})},loaded:function(a){return a.each(function(){$(this).datagrid("getPager").pagination("loaded");var a=$(this).datagrid("getPanel"),b=$(this).datagrid("options");a.children("div.datagrid-mask-msg").remove(),a.children("div.datagrid-mask").remove(),$(this).datagrid("getRows").length<=0&&""!=b.emptyMsg?$(this).before('<div class="datagrid-empty-msg">'+b.emptyMsg+"</div>"):$(".datagrid-empty-msg",a).remove()})},fitColumns:function(a){return a.each(function(){_8d(this)})},fixColumnSize:function(a,b){return a.each(function(){_51(this,b)})},fixRowHeight:function(a,b){return a.each(function(){_2e(this,b)})},freezeRow:function(a,b){return a.each(function(){_3f(this,b)})},autoSizeColumn:function(a,b){return a.each(function(){_9c(this,b)})},loadData:function(a,b){return a.each(function(){_c6(this,b),_157(this)})},getData:function(a){return $.data(a[0],"datagrid").data},getRows:function(a){return $.data(a[0],"datagrid").data.rows},getFooterRows:function(a){return $.data(a[0],"datagrid").footer},getRowIndex:function(a,b){return _d2(a[0],b)},getChecked:function(a){return _de(a[0])},getSelected:function(a){var b=_d7(a[0]);return b.length>0?b[0]:null},getSelections:function(a){return _d7(a[0])},clearSelections:function(a){return a.each(function(){var a=$.data(this,"datagrid").selectedRows;a.splice(0,a.length),_f7(this)})},clearChecked:function(a){return a.each(function(){var a=$.data(this,"datagrid").checkedRows;a.splice(0,a.length),_10c(this)})},scrollTo:function(a,b){return a.each(function(){_e3(this,b)})},highlightRow:function(a,b){return a.each(function(){_eb(this,b),_e3(this,b)})},selectAll:function(a){return a.each(function(){_101(this)})},unselectAll:function(a){return a.each(function(){_f7(this)})},selectRow:function(a,b){return a.each(function(){_f0(this,b)})},selectRecord:function(a,b){return a.each(function(){var a=$.data(this,"datagrid").options;if(a.idField){var c=_d2(this,b);c>=0&&$(this).datagrid("selectRow",c)}})},unselectRow:function(a,b){return a.each(function(){_f9(this,b)})},checkRow:function(a,b){return a.each(function(){_f8(this,b)})},uncheckRow:function(a,b){return a.each(function(){_100(this,b)})},checkAll:function(a){return a.each(function(){_106(this)})},uncheckAll:function(a){return a.each(function(){_10c(this)})},beginEdit:function(a,b){return a.each(function(){_11e(this,b)})},endEdit:function(a,b){return a.each(function(){_124(this,b,!1)})},cancelEdit:function(a,b){return a.each(function(){_124(this,b,!0)})},getEditors:function(a,b){return _12f(a[0],b)},getEditor:function(a,b){return _133(a[0],b)},refreshRow:function(a,b){return a.each(function(){var a=$.data(this,"datagrid").options;a.view.refreshRow.call(a.view,this,b)})},validateRow:function(a,b){return _123(a[0],b)},updateRow:function(a,b){return a.each(function(){var a=$.data(this,"datagrid").options;a.view.updateRow.call(a.view,this,b.index,b.row)})},appendRow:function(a,b){return a.each(function(){_154(this,b)})},insertRow:function(a,b){return a.each(function(){_150(this,b)})},deleteRow:function(a,b){return a.each(function(){_14a(this,b)})},getChanges:function(a,b){return _144(a[0],b)},acceptChanges:function(a){return a.each(function(){_15b(this)})},rejectChanges:function(a){return a.each(function(){_15d(this)})},mergeCells:function(a,b){return a.each(function(){_171(this,b)})},showColumn:function(a,b){return a.each(function(){var a=$(this).datagrid("getPanel");a.find('td[field="'+b+'"]').show(),$(this).datagrid("getColumnOption",b).hidden=!1,$(this).datagrid("fitColumns")})},hideColumn:function(a,b){return a.each(function(){var a=$(this).datagrid("getPanel");a.find('td[field="'+b+'"]').hide(),$(this).datagrid("getColumnOption",b).hidden=!0,$(this).datagrid("fitColumns")})}},$.fn.datagrid.parseOptions=function(_1e6){var t=$(_1e6);return $.extend({},$.fn.panel.parseOptions(_1e6),$.parser.parseOptions(_1e6,["url","toolbar","idField","sortName","sortOrder","pagePosition","resizeHandle",{fitColumns:"boolean",autoRowHeight:"boolean",striped:"boolean",nowrap:"boolean"},{rownumbers:"boolean",singleSelect:"boolean",checkOnSelect:"boolean",selectOnCheck:"boolean"},{pagination:"boolean",pageSize:"number",pageNumber:"number"},{multiSort:"boolean",remoteSort:"boolean",showHeader:"boolean",showFooter:"boolean"},{scrollbarSize:"number"}]),{pageList:t.attr("pageList")?eval(t.attr("pageList")):void 0,loadMsg:void 0!=t.attr("loadMsg")?t.attr("loadMsg"):void 0,rowStyler:t.attr("rowStyler")?eval(t.attr("rowStyler")):void 0})},$.fn.datagrid.parseData=function(a){var b=$(a),c={total:0,rows:[]},d=b.datagrid("getColumnFields",!0).concat(b.datagrid("getColumnFields",!1));return b.find("tbody tr").each(function(){c.total++;var a={};$.extend(a,$.parser.parseOptions(this,["iconCls","state"]));for(var b=0;b<d.length;b++)a[d[b]]=$(this).find("td:eq("+b+")").html();c.rows.push(a)}),c};var _1e9={render:function(a,b,c){var d=$.data(a,"datagrid"),e=d.options,f=d.data.rows,g=$(a).datagrid("getColumnFields",c);if(!c||e.rownumbers||e.frozenColumns&&e.frozenColumns.length){for(var h=['<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'],i=0;i<f.length;i++){var j=e.rowStyler?e.rowStyler.call(a,i,f[i]):"",k="",l="";"string"==typeof j?l=j:j&&(k=j["class"]||"",l=j.style||"");var m='class="datagrid-row '+(i%2&&e.striped?"datagrid-row-alt ":" ")+k+'"',n=l?'style="'+l+'"':"",o=d.rowIdPrefix+"-"+(c?1:2)+"-"+i;h.push('<tr id="'+o+'" datagrid-row-index="'+i+'" '+m+" "+n+">"),h.push(this.renderRow.call(this,a,g,c,i,f[i])),h.push("</tr>")}h.push("</tbody></table>"),$(b).html(h.join(""))}},renderFooter:function(a,b,c){for(var d=($.data(a,"datagrid").options,$.data(a,"datagrid").footer||[]),e=$(a).datagrid("getColumnFields",c),f=['<table class="datagrid-ftable" cellspacing="0" cellpadding="0" border="0"><tbody>'],g=0;g<d.length;g++)f.push('<tr class="datagrid-row" datagrid-row-index="'+g+'">'),f.push(this.renderRow.call(this,a,e,c,g,d[g])),f.push("</tr>");f.push("</tbody></table>"),$(b).html(f.join(""))},renderRow:function(_1f9,_1fa,_1fb,_1fc,_1fd){var opts=$.data(_1f9,"datagrid").options,cc=[];if(_1fb&&opts.rownumbers){var _1fe=_1fc+1;opts.pagination&&(_1fe+=(opts.pageNumber-1)*opts.pageSize),cc.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">'+_1fe+"</div></td>")}for(var i=0;i<_1fa.length;i++){var _1ff=_1fa[i],col=$(_1f9).datagrid("getColumnOption",_1ff);if(col){var _200=eval("_1fd['"+_1ff.replace(/\./g,"']['")+"']"),css=col.styler?col.styler(_200,_1fd,_1fc)||"":"",_201="",_202="";"string"==typeof css?_202=css:cc&&(_201=css["class"]||"",_202=css.style||"");var cls=_201?'class="'+_201+'"':"",_203=col.hidden?'style="display:none;'+_202+'"':_202?'style="'+_202+'"':"";if(cc.push('<td field="'+_1ff+'" '+cls+" "+_203+">"),col.checkbox)var _203="";else{var _203=_202;col.align&&(_203+=";text-align:"+col.align+";"),opts.nowrap?opts.autoRowHeight&&(_203+=";height:auto;"):_203+=";white-space:normal;height:auto;"}cc.push('<div style="'+_203+'" '),cc.push(col.checkbox?'class="datagrid-cell-check"':'class="datagrid-cell '+col.cellClass+'"'),cc.push(">"),cc.push(col.checkbox?'<input type="checkbox" name="'+_1ff+'" value="'+(void 0!=_200?_200:"")+'">':col.formatter?col.formatter(_200,_1fd,_1fc):_200),cc.push("</div>"),cc.push("</td>")}}return cc.join("")},refreshRow:function(a,b){this.updateRow.call(this,a,b,{})},updateRow:function(a,b,c){function d(c){var d=$(a).datagrid("getColumnFields",c),g=e.finder.getTr(a,b,"body",c?1:2),j=g.find("div.datagrid-cell-check input[type=checkbox]").is(":checked");g.html(this.renderRow.call(this,a,d,c,b,f[b])),g.attr("style",i).attr("class",g.hasClass("datagrid-row-selected")?h+" datagrid-row-selected":h),j&&g.find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!0)}var e=$.data(a,"datagrid").options,f=$(a).datagrid("getRows");$.extend(f[b],c);var g=e.rowStyler?e.rowStyler.call(a,b,f[b]):"",h="",i="";"string"==typeof g?i=g:g&&(h=g["class"]||"",i=g.style||"");var h="datagrid-row "+(b%2&&e.striped?"datagrid-row-alt ":" ")+h;d.call(this,!0),d.call(this,!1),$(a).datagrid("fixRowHeight",b)},insertRow:function(a,b,c){function d(c){for(var d=c?1:2,e=i.rows.length-1;e>=b;e--){var h=g.finder.getTr(a,e,"body",d);if(h.attr("datagrid-row-index",e+1),h.attr("id",f.rowIdPrefix+"-"+d+"-"+(e+1)),c&&g.rownumbers){var j=e+2;g.pagination&&(j+=(g.pageNumber-1)*g.pageSize),h.find("div.datagrid-cell-rownumber").html(j)}g.striped&&h.removeClass("datagrid-row-alt").addClass((e+1)%2?"datagrid-row-alt":"")}}function e(c){var d=c?1:2,e=($(a).datagrid("getColumnFields",c),f.rowIdPrefix+"-"+d+"-"+b),j='<tr id="'+e+'" class="datagrid-row" datagrid-row-index="'+b+'"></tr>';if(b>=i.rows.length)if(i.rows.length)g.finder.getTr(a,"","last",d).after(j);else{var k=c?h.body1:h.body2;k.html('<table cellspacing="0" cellpadding="0" border="0"><tbody>'+j+"</tbody></table>")}else g.finder.getTr(a,b+1,"body",d).before(j)}var f=$.data(a,"datagrid"),g=f.options,h=f.dc,i=f.data;(void 0==b||null==b)&&(b=i.rows.length),b>i.rows.length&&(b=i.rows.length),d.call(this,!0),d.call(this,!1),e.call(this,!0),e.call(this,!1),i.total+=1,i.rows.splice(b,0,c),this.refreshRow.call(this,a,b)},deleteRow:function(a,b){function c(c){for(var g=c?1:2,h=b+1;h<f.rows.length;h++){var i=e.finder.getTr(a,h,"body",g);if(i.attr("datagrid-row-index",h-1),i.attr("id",d.rowIdPrefix+"-"+g+"-"+(h-1)),c&&e.rownumbers){var j=h;e.pagination&&(j+=(e.pageNumber-1)*e.pageSize),i.find("div.datagrid-cell-rownumber").html(j)}e.striped&&i.removeClass("datagrid-row-alt").addClass((h-1)%2?"datagrid-row-alt":"")}}var d=$.data(a,"datagrid"),e=d.options,f=d.data;e.finder.getTr(a,b).remove(),c.call(this,!0),c.call(this,!1),f.total-=1,f.rows.splice(b,1)},onBeforeRender:function(){},onAfterRender:function(a){var b=$.data(a,"datagrid").options;if(b.showFooter){var c=$(a).datagrid("getPanel").find("div.datagrid-footer");c.find("div.datagrid-cell-rownumber,div.datagrid-cell-check").css("visibility","hidden")}}};$.fn.datagrid.defaults=$.extend({},$.fn.panel.defaults,{border:!1,frozenColumns:void 0,columns:void 0,fit:!0,fitColumns:!1,resizeHandle:"right",autoRowHeight:!0,toolbar:null,striped:!1,method:"post",nowrap:!0,idField:null,url:null,data:null,loadMsg:"数据加载中，请稍后...",emptyMsg:"暂无数据",rownumbers:!1,singleSelect:!0,selectOnCheck:!0,checkOnSelect:!1,pagination:!0,pagePosition:"bottom",pageNumber:1,pageSize:20,pageList:[10,20,30,40,50],queryParams:{},sortName:null,sortOrder:"asc",multiSort:!1,remoteSort:!0,showHeader:!0,showFooter:!1,scrollbarSize:18,rowStyler:function(){},loader:function(a,b,c){var d=$(this).datagrid("options");return d.url?void $.ajax({type:d.method,url:d.url,data:a,dataType:"json",success:function(a){b(a)},error:function(){c.apply(this,arguments)}}):!1},loadFilter:function(a){return"number"==typeof a.length&&"function"==typeof a.splice?{total:a.length,rows:a}:a},editors:_179,finder:{getTr:function(a,b,c,d){c=c||"body",d=d||0;var e=$.data(a,"datagrid"),f=e.dc,g=e.options;if(0==d){var h=g.finder.getTr(a,b,c,1),i=g.finder.getTr(a,b,c,2);return h.add(i)}if("body"==c){var j=$("#"+e.rowIdPrefix+"-"+d+"-"+b);return j.length||(j=(1==d?f.body1:f.body2).find(">table>tbody>tr[datagrid-row-index="+b+"]")),j}return"footer"==c?(1==d?f.footer1:f.footer2).find(">table>tbody>tr[datagrid-row-index="+b+"]"):"selected"==c?(1==d?f.body1:f.body2).find(">table>tbody>tr.datagrid-row-selected"):"highlight"==c?(1==d?f.body1:f.body2).find(">table>tbody>tr.datagrid-row-over"):"checked"==c?(1==d?f.body1:f.body2).find(">table>tbody>tr.datagrid-row-checked"):"last"==c?(1==d?f.body1:f.body2).find(">table>tbody>tr[datagrid-row-index]:last"):"allbody"==c?(1==d?f.body1:f.body2).find(">table>tbody>tr[datagrid-row-index]"):"allfooter"==c?(1==d?f.footer1:f.footer2).find(">table>tbody>tr[datagrid-row-index]"):void 0},getRow:function(a,b){var c="object"==typeof b?b.attr("datagrid-row-index"):b;return $.data(a,"datagrid").data.rows[parseInt(c)]}},view:_1e9,onBeforeLoad:function(){},onLoadSuccess:function(){},onLoadError:function(){},onClickRow:function(){},onDblClickRow:function(){},onClickCell:function(){},onDblClickCell:function(){},onSortColumn:function(){},onResizeColumn:function(){},onSelect:function(){},onUnselect:function(){},onSelectAll:function(){},onUnselectAll:function(){},onCheck:function(){},onUncheck:function(){},onCheckAll:function(){},onUncheckAll:function(){},onBeforeEdit:function(){},onAfterEdit:function(){},onCancelEdit:function(){},onHeaderContextMenu:function(){},onRowContextMenu:function(){}})}(jQuery);var detailview=$.extend({},$.fn.datagrid.defaults.view,{render:function(a,b,c){var d=$.data(a,"datagrid"),e=d.options;if(!c||e.rownumbers||e.frozenColumns&&e.frozenColumns.length){var f=d.data.rows,g=$(a).datagrid("getColumnFields",c),h=[];h.push('<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>');for(var i=0;i<f.length;i++){var j=e.rowStyler?e.rowStyler.call(a,i,f[i]):"",k="",l="";"string"==typeof j?l=j:j&&(k=j["class"]||"",l=j.style||"");var m='class="datagrid-row '+(i%2&&e.striped?"datagrid-row-alt ":" ")+k+'"',n=l?'style="'+l+'"':"",o=d.rowIdPrefix+"-"+(c?1:2)+"-"+i;h.push('<tr id="'+o+'" datagrid-row-index="'+i+'" '+m+" "+n+">"),h.push(this.renderRow.call(this,a,g,c,i,f[i])),h.push("</tr>"),h.push('<tr style="display:none;">'),h.push(c?"<td colspan="+(g.length+2)+' style="border-right:0">':'<td style="vertical-align:top;padding-right:10px;" colspan='+g.length+">"),h.push('<div class="datagrid-row-detail">'),h.push(c?"&nbsp;":e.detailFormatter.call(a,i,f[i])),h.push("</div>"),h.push("</td>"),h.push("</tr>")}h.push("</tbody></table>"),$(b).html(h.join(""))}},renderRow:function(a,b,c,d,e){var f=$.data(a,"datagrid").options,g=[];if(c&&f.rownumbers){var h=d+1;f.pagination&&(h+=(f.pageNumber-1)*f.pageSize),g.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">'+h+"</div></td>")}for(var i=0;i<b.length;i++){var j=b[i],k=$(a).datagrid("getColumnOption",j);if(k){var l=e[j],m=k.styler?k.styler(l,e,d)||"":"",n="",o="";"string"==typeof m?o=m:g&&(n=m["class"]||"",o=m.style||"");var p=n?'class="'+n+'"':"",q=k.hidden?'style="display:none;'+o+'"':o?'style="'+o+'"':"";g.push('<td field="'+j+'" '+p+" "+q+">"),k.checkbox?q="":k.expander?q="text-align:center;height:16px;":(q=o,k.align&&(q+=";text-align:"+k.align+";"),f.nowrap?f.autoRowHeight&&(q+=";height:auto;"):q+=";white-space:normal;height:auto;"),g.push('<div style="'+q+'" '),g.push(k.checkbox?'class="datagrid-cell-check ':'class="datagrid-cell '+k.cellClass),g.push('">'),g.push(k.checkbox?'<input type="checkbox" name="'+j+'" value="'+(void 0!=l?l:"")+'">':k.expander?'<span class="datagrid-row-expander datagrid-row-expand" style="display:inline-block;width:16px;height:16px;cursor:pointer;" />':k.formatter?k.formatter(l,e,d):l),g.push("</div>"),g.push("</td>")}}return g.join("")},insertRow:function(a,b,c){function d(d){var f=d?g:h,j=f.find("tr[datagrid-row-index="+b+"]");if(i)var k=j.next().clone();else var k=j.next().next().clone();k.insertAfter(j),k.hide(),d||k.find("div.datagrid-row-detail").html(e.detailFormatter.call(a,b,c))}var e=$.data(a,"datagrid").options,f=$.data(a,"datagrid").dc,g=($(a).datagrid("getPanel"),f.view1),h=f.view2,i=!1,j=$(a).datagrid("getRows").length;return 0==j?void $(a).datagrid("loadData",{total:1,rows:[c]}):((void 0==b||null==b||b>=j)&&(b=j,i=!0,this.canUpdateDetail=!1),$.fn.datagrid.defaults.view.insertRow.call(this,a,b,c),d(!0),d(!1),void(this.canUpdateDetail=!0))},deleteRow:function(a,b){var c=$.data(a,"datagrid").options,d=$.data(a,"datagrid").dc,e=c.finder.getTr(a,b);e.next().remove(),$.fn.datagrid.defaults.view.deleteRow.call(this,a,b),d.body2.triggerHandler("scroll")},updateRow:function(a,b,c){var d=($.data(a,"datagrid").dc,$.data(a,"datagrid").options),e=$(a).datagrid("getExpander",b).attr("class");if($.fn.datagrid.defaults.view.updateRow.call(this,a,b,c),$(a).datagrid("getExpander",b).attr("class",e),this.canUpdateDetail){var c=$(a).datagrid("getRows")[b],f=$(a).datagrid("getRowDetail",b);f.html(d.detailFormatter.call(a,b,c))}},bindEvents:function(a){var b=$.data(a,"datagrid"),c=b.dc,d=(b.options,c.body1.add(c.body2)),e=($.data(d[0],"events")||$._data(d[0],"events")).click[0].handler;d.unbind("click").bind("click",function(b){var c=$(b.target),d=c.closest("tr.datagrid-row");if(d.length){if(c.hasClass("datagrid-row-expander")){var f=parseInt(d.attr("datagrid-row-index"));if($(a).datagrid("selectRow",f),c.hasClass("datagrid-row-expand")){for(var g=0;g<$(a).datagrid("getRows").length;g++)$("#ddv-"+g).empty(),$(a).datagrid("collapseRow",g);$(window).resize(function(){if($("#ddv-"+f)[0]){var a=$(window).width()-50;$("#ddv-"+f).width(a)}}),$(a).datagrid("expandRow",f)}else $(a).datagrid("collapseRow",f);$(a).datagrid("fixRowHeight")}else e(b);b.stopPropagation()}})},onBeforeRender:function(a){for(var b=$.data(a,"datagrid"),c=b.options,d=b.dc,e=$(a),f=!1,g=e.datagrid("getColumnFields",!0).concat(e.datagrid("getColumnFields")),h=0;h<g.length;h++){var i=e.datagrid("getColumnOption",g[h]);if(i.expander){f=!0;break}}if(!f){c.frozenColumns&&c.frozenColumns.length?c.frozenColumns[0].splice(0,0,{field:"_expander",expander:!0,width:24,resizable:!1,fixed:!0}):c.frozenColumns=[[{field:"_expander",expander:!0,width:24,resizable:!1,fixed:!0}]];var e=d.view1.children("div.datagrid-header").find("table"),j=$('<td rowspan="'+c.frozenColumns.length+'"><div class="datagrid-header-expander" style="width:24px;"></div></td>');0==$("tr",e).length?j.wrap("<tr></tr>").parent().appendTo($("tbody",e)):c.rownumbers?j.insertAfter(e.find("td:has(div.datagrid-header-rownumber)")):j.prependTo(e.find("tr:first"))}var k=this;setTimeout(function(){k.bindEvents(a)},0)},onAfterRender:function(a){function b(){var a=d.view2.children("div.datagrid-header").find("table").width();d.body2.children("table").width(a)}var c=$.data(a,"datagrid"),d=c.dc,e=c.options,f=$(a).datagrid("getPanel");$.fn.datagrid.defaults.view.onAfterRender.call(this,a),c.onResizeColumn||(c.onResizeColumn=e.onResizeColumn),c.onResize||(c.onResize=e.onResize),e.onResizeColumn=function(d,e){b();for(var f=$(a).datagrid("getRows").length,g=0;f>g;g++)$(a).datagrid("fixDetailRowHeight",g);c.onResizeColumn.call(a,d,e)},e.onResize=function(a,d){b(),c.onResize.call(f,a,d)},this.canUpdateDetail=!0,d.footer1.find("span.datagrid-row-expander").css("visibility","hidden"),$(a).datagrid("resize")}});$.extend($.fn.datagrid.methods,{fixDetailRowHeight:function(a,b){return a.each(function(){var a=$.data(this,"datagrid").options;!(a.rownumbers||a.frozenColumns&&a.frozenColumns.length);var c=$.data(this,"datagrid").dc,d=a.finder.getTr(this,b,"body",1).next(),e=a.finder.getTr(this,b,"body",2).next();if(e.is(":visible")){d.css("height",150),e.css("height","");var f=Math.max(d.height(),e.height());d.css("height",f),e.css("height",f)}c.body2.triggerHandler("scroll")})},getExpander:function(a,b){var c=$.data(a[0],"datagrid").options;return c.finder.getTr(a[0],b).find("span.datagrid-row-expander")},getRowDetail:function(a,b){var c=$.data(a[0],"datagrid").options,d=c.finder.getTr(a[0],b,"body",2);return d.next().find("div.datagrid-row-detail")},expandRow:function(a,b){return a.each(function(){var a=$(this).datagrid("options"),c=($.data(this,"datagrid").dc,$(this).datagrid("getExpander",b));if(c.hasClass("datagrid-row-expand")){c.removeClass("datagrid-row-expand").addClass("datagrid-row-collapse");var d=a.finder.getTr(this,b,"body",1).next(),e=a.finder.getTr(this,b,"body",2).next();if(d.show().height(150),e.show(),$(this).datagrid("fixDetailRowHeight",b),a.onExpandRow){var f=$(this).datagrid("getRows")[b];a.onExpandRow.call(this,b,f)}}})},collapseRow:function(a,b){return a.each(function(){var a=$(this).datagrid("options"),c=$.data(this,"datagrid").dc,d=$(this).datagrid("getExpander",b);if(d.hasClass("datagrid-row-collapse")){d.removeClass("datagrid-row-collapse").addClass("datagrid-row-expand");var e=a.finder.getTr(this,b,"body",1).next(),f=a.finder.getTr(this,b,"body",2).next();if(e.hide(),f.hide(),c.body2.triggerHandler("scroll"),a.onCollapseRow){var g=$(this).datagrid("getRows")[b];a.onCollapseRow.call(this,b,g)}}})}}),function($){function _1(a){function b(c){var d=[];return c.addClass("menu"),d.push(c),c.hasClass("menu-content")||c.children("div").each(function(){var c=$(this).children("div");if(c.length){c.insertAfter(a),this.submenu=c;var e=b(c);d=d.concat(e)}}),d}function c(b){var c=$.parser.parseOptions(b[0],["width"]).width;b.hasClass("menu-content")?b[0].originalWidth=c||b._outerWidth():(b[0].originalWidth=c||0,b.children("div").each(function(){var b=$(this),c=$.extend({},$.parser.parseOptions(this,["name","iconCls","href",{separator:"boolean"}]),{disabled:b.attr("disabled")?!0:void 0});if(c.separator&&b.addClass("menu-sep"),!b.hasClass("menu-sep")){b[0].itemName=c.name||"",b[0].itemHref=c.href||"";var d=b.addClass("menu-item").html();b.empty().append($('<div class="menu-text"></div>').html(d)),c.iconCls&&$('<div class="menu-icon"></div>').addClass(c.iconCls).appendTo(b),c.disabled&&_f(a,b[0],!0),b[0].submenu&&$('<div class="menu-rightarrow"></div>').appendTo(b),_10(a,b)}}),$('<div class="menu-line"></div>').prependTo(b)),_11(a,b),b.hide(),_12(a,b)}$(a).appendTo("body"),$(a).addClass("menu-top"),$(document).unbind(".menu").bind("mousedown.menu",function(a){var b=$("body>div.menu:visible"),c=$(a.target).closest("div.menu",b);c.length||$("body>div.menu-top:visible").menu("hide")});for(var d=b($(a)),e=0;e<d.length;e++)c(d[e])}function _11(a,b){var c=$.data(a,"menu").options,d=b.attr("style");b.css({display:"block",left:-1e4,height:"auto",overflow:"hidden"});var e=0;b.find("div.menu-text").each(function(){e<$(this)._outerWidth()&&(e=$(this)._outerWidth()),$(this).closest("div.menu-item")._outerHeight($(this)._outerHeight()+2)}),e+=65,b._outerWidth(Math.max(b[0].originalWidth||0,e,c.minWidth)),b.children("div.menu-line")._outerHeight(b.outerHeight()),b.attr("style",d)}function _12(a,b){var c=$.data(a,"menu");b.unbind(".menu").bind("mouseenter.menu",function(){c.timer&&(clearTimeout(c.timer),c.timer=null)}).bind("mouseleave.menu",function(){c.options.hideOnUnhover&&(c.timer=setTimeout(function(){_1b(a)},100))})}function _10(a,b){b.hasClass("menu-item")&&(b.unbind(".menu"),b.bind("click.menu",function(){if(!$(this).hasClass("menu-item-disabled")){if(!this.submenu){_1b(a);var b=$(this).attr("href");b&&(location.href=b)}var c=$(a).menu("getItem",this);$.data(a,"menu").options.onClick.call(a,c)}}).bind("mouseenter.menu",function(){if(b.siblings().each(function(){this.submenu&&_22(this.submenu),$(this).removeClass("menu-active")}),b.addClass("menu-active"),$(this).hasClass("menu-item-disabled"))return void b.addClass("menu-active-disabled");var c=b[0].submenu;
c&&$(a).menu("show",{menu:c,parent:b})}).bind("mouseleave.menu",function(a){b.removeClass("menu-active menu-active-disabled");var c=b[0].submenu;c?a.pageX>=parseInt(c.css("left"))?b.addClass("menu-active"):_22(c):b.removeClass("menu-active")}))}function _1b(a){var b=$.data(a,"menu");return b&&$(a).is(":visible")&&(_22($(a)),b.options.onHide.call(a)),!1}function _25(a,b){var c,d;b=b||{};var e=$(b.menu||a);if(e.hasClass("menu-top")){var f=$.data(a,"menu").options;if($.extend(f,b),c=f.left,d=f.top,f.alignTo){var g=$(f.alignTo);c=g.offset().left,d=g.offset().top+g._outerHeight()}c+e.outerWidth()>$(window)._outerWidth()+$(document)._scrollLeft()&&(c=$(window)._outerWidth()+$(document).scrollLeft()-e.outerWidth()-5),d+e.outerHeight()>$(window)._outerHeight()+$(document).scrollTop()&&(d=$(window)._outerHeight()+$(document).scrollTop()-e.outerHeight()-5)}else{var h=b.parent;c=h.offset().left+h.outerWidth()-2,c+e.outerWidth()+5>$(window)._outerWidth()+$(document).scrollLeft()&&(c=h.offset().left-e.outerWidth()+2);var d=h.offset().top-3;d+e.outerHeight()>$(window)._outerHeight()+$(document).scrollTop()&&(d=$(window)._outerHeight()+$(document).scrollTop()-e.outerHeight()-5)}e.css({left:c,top:d}),e.show(0,function(){e[0].shadow||(e[0].shadow=$('<div class="menu-shadow"></div>').insertAfter(e)),e[0].shadow.css({display:"block",zIndex:$.fn.menu.defaults.zIndex++,left:e.css("left"),top:e.css("top"),width:e.outerWidth(),height:e.outerHeight()}),e.css("z-index",$.fn.menu.defaults.zIndex++),e.hasClass("menu-top")&&$.data(e[0],"menu").options.onShow.call(e[0])})}function _22(a){function b(a){a.stop(!0,!0),a[0].shadow&&a[0].shadow.hide(),a.hide()}a&&(b(a),a.find("div.menu-item").each(function(){this.submenu&&_22(this.submenu),$(this).removeClass("menu-active")}))}function _2e(a,b){function c(f){f.children("div.menu-item").each(function(){var f=$(a).menu("getItem",this),g=e.empty().html(f.text).text();b==$.trim(g)?d=f:this.submenu&&!d&&c(this.submenu)})}var d=null,e=$("<div></div>");return c($(a)),e.remove(),d}function _f(a,b,c){var d=$(b);d.hasClass("menu-item")&&(c?(d.addClass("menu-item-disabled"),b.onclick&&(b.onclick1=b.onclick,b.onclick=null)):(d.removeClass("menu-item-disabled"),b.onclick1&&(b.onclick=b.onclick1,b.onclick1=null)))}function _38(_39,_3a){var _3b=$(_39);if(_3a.parent){if(!_3a.parent.submenu){var _3c=$('<div class="menu"><div class="menu-line"></div></div>').appendTo("body");_3c.hide(),_3a.parent.submenu=_3c,$('<div class="menu-rightarrow"></div>').appendTo(_3a.parent)}_3b=_3a.parent.submenu}if(_3a.separator)var _3d=$('<div class="menu-sep"></div>').appendTo(_3b);else{var _3d=$('<div class="menu-item"></div>').appendTo(_3b);$('<div class="menu-text"></div>').html(_3a.text).appendTo(_3d)}_3a.iconCls&&$('<div class="menu-icon"></div>').addClass(_3a.iconCls).appendTo(_3d),_3a.id&&_3d.attr("id",_3a.id),_3a.name&&(_3d[0].itemName=_3a.name),_3a.href&&(_3d[0].itemHref=_3a.href),_3a.onclick&&("string"==typeof _3a.onclick?_3d.attr("onclick",_3a.onclick):_3d[0].onclick=eval(_3a.onclick)),_3a.handler&&(_3d[0].onclick=eval(_3a.handler)),_3a.disabled&&_f(_39,_3d[0],!0),_10(_39,_3d),_12(_39,_3b),_11(_39,_3b)}function _3e(a,b){function c(a){if(a.submenu){a.submenu.children("div.menu-item").each(function(){c(this)});var b=a.submenu[0].shadow;b&&b.remove(),a.submenu.remove()}$(a).remove()}c(b)}function _43(a){$(a).children("div.menu-item").each(function(){_3e(a,this)}),a.shadow&&a.shadow.remove(),$(a).remove()}$.fn.menu=function(a,b){return"string"==typeof a?$.fn.menu.methods[a](this,b):(a=a||{},this.each(function(){var b=$.data(this,"menu");b?$.extend(b.options,a):(b=$.data(this,"menu",{options:$.extend({},$.fn.menu.defaults,$.fn.menu.parseOptions(this),a)}),_1(this)),$(this).css({left:b.options.left,top:b.options.top})}))},$.fn.menu.methods={options:function(a){return $.data(a[0],"menu").options},show:function(a,b){return a.each(function(){_25(this,b)})},hide:function(a){return a.each(function(){_1b(this)})},destroy:function(a){return a.each(function(){_43(this)})},setText:function(a,b){return a.each(function(){$(b.target).children("div.menu-text").html(b.text)})},setIcon:function(a,b){return a.each(function(){var a=$(this).menu("getItem",b.target);a.iconCls?$(a.target).children("div.menu-icon").removeClass(a.iconCls).addClass(b.iconCls):$('<div class="menu-icon"></div>').addClass(b.iconCls).appendTo(b.target)})},getItem:function(a,b){var c=$(b),d={target:b,id:c.attr("id"),text:$.trim(c.children("div.menu-text").html()),disabled:c.hasClass("menu-item-disabled"),name:b.itemName,href:b.itemHref,onclick:b.onclick},e=c.children("div.menu-icon");if(e.length){for(var f=[],g=e.attr("class").split(" "),h=0;h<g.length;h++)"menu-icon"!=g[h]&&f.push(g[h]);d.iconCls=f.join(" ")}return d},findItem:function(a,b){return _2e(a[0],b)},appendItem:function(a,b){return a.each(function(){_38(this,b)})},removeItem:function(a,b){return a.each(function(){_3e(this,b)})},enableItem:function(a,b){return a.each(function(){_f(this,b,!1)})},disableItem:function(a,b){return a.each(function(){_f(this,b,!0)})}},$.fn.menu.parseOptions=function(a){return $.extend({},$.parser.parseOptions(a,["left","top",{minWidth:"number",hideOnUnhover:"boolean"}]))},$.fn.menu.defaults={zIndex:11e4,left:0,top:0,minWidth:120,hideOnUnhover:!0,onShow:function(){},onHide:function(){},onClick:function(){}}}(jQuery),function(a){function b(b){var d=a.data(b,"menubutton").options,e=a(b);if(e.removeClass(d.cls.btn1+" "+d.cls.btn2).addClass("m-btn"),e.linkbutton(a.extend({},d,{text:d.text+'<span class="'+d.cls.arrow+'">&nbsp;</span>'})),d.menu){a(d.menu).menu();var f=a(d.menu).menu("options"),g=f.onShow,h=f.onHide;a.extend(f,{onShow:function(){var b=a(this).menu("options"),c=a(b.alignTo),d=c.menubutton("options");c.addClass(1==d.plain?d.cls.btn2:d.cls.btn1),g.call(this)},onHide:function(){var b=a(this).menu("options"),c=a(b.alignTo),d=c.menubutton("options");c.removeClass(1==d.plain?d.cls.btn2:d.cls.btn1),h.call(this)}})}c(b,d.disabled)}function c(b,c){var e=a.data(b,"menubutton").options;e.disabled=c;var f=a(b),g=f.find("."+e.cls.trigger);if(g.length||(g=f),g.unbind(".menubutton"),c)f.linkbutton("disable");else{f.linkbutton("enable");var h=null;g.bind("click.menubutton",function(){return d(b),!1}).bind("mouseenter.menubutton",function(){return h=setTimeout(function(){d(b)},e.duration),!1}).bind("mouseleave.menubutton",function(){h&&clearTimeout(h)})}}function d(b){var c=a.data(b,"menubutton").options;if(!c.disabled&&c.menu){a("body>div.menu-top").menu("hide");var d=a(b),e=a(c.menu);e.length&&(e.menu("options").alignTo=d,e.menu("show",{alignTo:d})),d.blur()}}a.fn.menubutton=function(c,d){if("string"==typeof c){var e=a.fn.menubutton.methods[c];return e?e(this,d):this.linkbutton(c,d)}return c=c||{},this.each(function(){var d=a.data(this,"menubutton");d?a.extend(d.options,c):(a.data(this,"menubutton",{options:a.extend({},a.fn.menubutton.defaults,a.fn.menubutton.parseOptions(this),c)}),a(this).removeAttr("disabled")),b(this)})},a.fn.menubutton.methods={options:function(b){var c=b.linkbutton("options"),d=a.data(b[0],"menubutton").options;return d.toggle=c.toggle,d.selected=c.selected,d},enable:function(a){return a.each(function(){c(this,!1)})},disable:function(a){return a.each(function(){c(this,!0)})},destroy:function(b){return b.each(function(){var b=a(this).menubutton("options");b.menu&&a(b.menu).menu("destroy"),a(this).remove()})}},a.fn.menubutton.parseOptions=function(b){a(b);return a.extend({},a.fn.linkbutton.parseOptions(b),a.parser.parseOptions(b,["menu",{plain:"boolean",duration:"number"}]))},a.fn.menubutton.defaults=a.extend({},a.fn.linkbutton.defaults,{plain:!0,menu:null,duration:100,cls:{btn1:"m-btn-active",btn2:"m-btn-plain-active",arrow:"m-btn-downarrow",trigger:"m-btn"}})}(jQuery),function($){function _1(a){$(a).addClass("searchbox-f").hide();var b=$('<span class="searchbox"></span>').insertAfter(a),c=$('<input type="text" class="searchbox-text">').appendTo(b);$('<span><span class="searchbox-button"></span></span>').appendTo(b);var d=$(a).attr("name");return d&&(c.attr("name",d),$(a).removeAttr("name").attr("searchboxName",d)),b}function _6(a,b){var c=$.data(a,"searchbox").options,d=$.data(a,"searchbox").searchbox;b&&(c.width=b),d.appendTo("body"),isNaN(c.width)&&(c.width=d._outerWidth());var e=d.find("span.searchbox-button"),f=d.find("a.searchbox-menu"),g=d.find("input.searchbox-text");d._outerWidth(c.width)._outerHeight(c.height),g._outerWidth(d.width()-f._outerWidth()-e._outerWidth()),g.css({height:d.height()+"px",lineHeight:d.height()+"px"}),f._outerHeight(d.height()),e._outerHeight(d.height());var h=f.find("span.l-btn-left");h._outerHeight(d.height()),h.find("span.l-btn-text,span.m-btn-downarrow").css({height:h.height()+"px",lineHeight:h.height()+"px"}),d.insertAfter(a)}function _e(a){function b(b){c.searchbox.find("a.searchbox-menu").remove();var d=$('<a class="searchbox-menu" href="javascript:void(0)"></a>').html(b.text);d.prependTo(c.searchbox).menubutton({menu:c.menu,iconCls:b.iconCls}),c.searchbox.find("input.searchbox-text").attr("name",b.name||b.text),_6(a)}var c=$.data(a,"searchbox"),d=c.options;if(d.menu){c.menu=$(d.menu).menu({onClick:function(a){b(a)}});var e=c.menu.children("div.menu-item:first");c.menu.children("div.menu-item").each(function(){var a=$.extend({},$.parser.parseOptions(this),{selected:$(this).attr("selected")?!0:void 0});return a.selected?(e=$(this),!1):void 0}),e.triggerHandler("click")}else c.searchbox.find("a.searchbox-menu").remove(),c.menu=null}function _17(a){var b=$.data(a,"searchbox"),c=b.options,d=b.searchbox.find("input.searchbox-text"),e=b.searchbox.find(".searchbox-button");d.unbind(".searchbox").bind("blur.searchbox",function(){c.value=$(this).val(),""==c.value?($(this).val(c.prompt),$(this).addClass("searchbox-prompt")):$(this).removeClass("searchbox-prompt")}).bind("focus.searchbox",function(){$(this).val()!=c.value&&$(this).val(c.value),$(this).removeClass("searchbox-prompt")}).bind("keydown.searchbox",function(b){return 13==b.keyCode?(b.preventDefault(),c.value=$(this).val(),c.searcher.call(a,c.value,d._propAttr("name")),!1):void 0}),e.unbind(".searchbox").bind("click.searchbox",function(){c.searcher.call(a,c.value,d._propAttr("name"))}).bind("mouseenter.searchbox",function(){$(this).addClass("searchbox-button-hover")}).bind("mouseleave.searchbox",function(){$(this).removeClass("searchbox-button-hover")})}function _1d(a){var b=$.data(a,"searchbox"),c=b.options,d=b.searchbox.find("input.searchbox-text");""==c.value?(d.val(c.prompt),d.addClass("searchbox-prompt")):(d.val(c.value),d.removeClass("searchbox-prompt"))}$.fn.searchbox=function(a,b){return"string"==typeof a?$.fn.searchbox.methods[a](this,b):(a=a||{},this.each(function(){var b=$.data(this,"searchbox");b?$.extend(b.options,a):b=$.data(this,"searchbox",{options:$.extend({},$.fn.searchbox.defaults,$.fn.searchbox.parseOptions(this),a),searchbox:_1(this)}),_e(this),_1d(this),_17(this),_6(this)}))},$.fn.searchbox.methods={options:function(a){return $.data(a[0],"searchbox").options},menu:function(a){return $.data(a[0],"searchbox").menu},textbox:function(a){return $.data(a[0],"searchbox").searchbox.find("input.searchbox-text")},getValue:function(a){return $.data(a[0],"searchbox").options.value},setValue:function(a,b){return a.each(function(){$(this).searchbox("options").value=b,$(this).searchbox("textbox").val(b),$(this).searchbox("textbox").blur()})},getName:function(a){return $.data(a[0],"searchbox").searchbox.find("input.searchbox-text").attr("name")},selectName:function(a,b){return a.each(function(){var a=$.data(this,"searchbox").menu;a&&a.children('div.menu-item[name="'+b+'"]').triggerHandler("click")})},destroy:function(a){return a.each(function(){var a=$(this).searchbox("menu");a&&a.menu("destroy"),$.data(this,"searchbox").searchbox.remove(),$(this).remove()})},resize:function(a,b){return a.each(function(){_6(this,b)})}},$.fn.searchbox.parseOptions=function(_2a){var t=$(_2a);return $.extend({},$.parser.parseOptions(_2a,["width","height","prompt","menu"]),{value:t.val(),searcher:t.attr("searcher")?eval(t.attr("searcher")):void 0})},$.fn.searchbox.defaults={width:"auto",height:22,prompt:"",value:"",menu:null,searcher:function(){}}}(jQuery),function(a){function b(b){a(b).addClass("tooltip-f")}function c(b){var c=a.data(b,"tooltip").options;a(b).unbind(".tooltip").bind(c.showEvent+".tooltip",function(a){f(b,a)}).bind(c.hideEvent+".tooltip",function(a){g(b,a)}).bind("mousemove.tooltip",function(a){c.trackMouse&&(c.trackMouseX=a.pageX,c.trackMouseY=a.pageY,e(b))})}function d(b){var c=a.data(b,"tooltip");c.showTimer&&(clearTimeout(c.showTimer),c.showTimer=null),c.hideTimer&&(clearTimeout(c.hideTimer),c.hideTimer=null)}function e(b){var c=a.data(b,"tooltip");if(c&&c.tip){var d=c.options,e=c.tip;if(d.trackMouse){h=a();var f=d.trackMouseX+d.deltaX,g=d.trackMouseY+d.deltaY}else var h=a(b),f=h.offset().left+d.deltaX,g=h.offset().top+d.deltaY;switch(d.position){case"right":f+=h._outerWidth()+12+(d.trackMouse?12:0),g-=(e._outerHeight()-h._outerHeight())/2;break;case"left":f-=e._outerWidth()+12+(d.trackMouse?12:0),g-=(e._outerHeight()-h._outerHeight())/2;break;case"top":f-=(e._outerWidth()-h._outerWidth())/2,g-=e._outerHeight()+12+(d.trackMouse?12:0);break;case"bottom":f-=(e._outerWidth()-h._outerWidth())/2,g+=h._outerHeight()+12+(d.trackMouse?12:0)}a(b).is(":visible")||(f=-1e5,g=-1e5),e.css({left:f,top:g,zIndex:void 0!=d.zIndex?d.zIndex:a.fn.window?a.fn.window.defaults.zIndex++:""}),d.onPosition.call(b,f,g)}}function f(b,c){var f=a.data(b,"tooltip"),g=f.options,i=f.tip;i||(i=a('<div tabindex="-1" class="tooltip"><div class="tooltip-content"></div><div class="tooltip-arrow-outer"></div><div class="tooltip-arrow"></div></div>').appendTo("body"),f.tip=i,h(b)),i.removeClass("tooltip-top tooltip-bottom tooltip-left tooltip-right").addClass("tooltip-"+g.position),d(b),f.showTimer=setTimeout(function(){e(b),i.show(),g.onShow.call(b,c);var a=i.children(".tooltip-arrow-outer"),d=i.children(".tooltip-arrow"),f="border-"+g.position+"-color";a.add(d).css({borderTopColor:"",borderBottomColor:"",borderLeftColor:"",borderRightColor:""}),a.css(f,i.css(f)),d.css(f,i.css("backgroundColor"))},g.showDelay)}function g(b,c){var e=a.data(b,"tooltip");e&&e.tip&&(d(b),e.hideTimer=setTimeout(function(){e.tip.hide(),e.options.onHide.call(b,c)},e.options.hideDelay))}function h(b,c){var d=a.data(b,"tooltip"),e=d.options;if(c&&(e.content=c),d.tip){var f="function"==typeof e.content?e.content.call(b):e.content;d.tip.children(".tooltip-content").html(f),e.onUpdate.call(b,f)}}function i(b){var c=a.data(b,"tooltip");if(c){d(b);var e=c.options;c.tip&&c.tip.remove(),e._title&&a(b).attr("title",e._title),a.removeData(b,"tooltip"),a(b).unbind(".tooltip").removeClass("tooltip-f"),e.onDestroy.call(b)}}a.fn.tooltip=function(d,e){return"string"==typeof d?a.fn.tooltip.methods[d](this,e):(d=d||{},this.each(function(){var e=a.data(this,"tooltip");e?a.extend(e.options,d):(a.data(this,"tooltip",{options:a.extend({},a.fn.tooltip.defaults,a.fn.tooltip.parseOptions(this),d)}),b(this)),c(this),h(this)}))},a.fn.tooltip.methods={options:function(b){return a.data(b[0],"tooltip").options},tip:function(b){return a.data(b[0],"tooltip").tip},arrow:function(a){return a.tooltip("tip").children(".tooltip-arrow-outer,.tooltip-arrow")},show:function(a,b){return a.each(function(){f(this,b)})},hide:function(a,b){return a.each(function(){g(this,b)})},update:function(a,b){return a.each(function(){h(this,b)})},reposition:function(a){return a.each(function(){e(this)})},destroy:function(a){return a.each(function(){i(this)})}},a.fn.tooltip.parseOptions=function(b){var c=a(b),d=a.extend({},a.parser.parseOptions(b,["position","showEvent","hideEvent","content",{deltaX:"number",deltaY:"number",showDelay:"number",hideDelay:"number"}]),{_title:c.attr("title")});return c.attr("title",""),d.content||(d.content=d._title),d},a.fn.tooltip.defaults={position:"bottom",content:null,trackMouse:!1,deltaX:0,deltaY:0,showEvent:"mouseenter",hideEvent:"mouseleave",showDelay:200,hideDelay:100,onShow:function(){},onHide:function(){},onUpdate:function(){},onPosition:function(){},onDestroy:function(){}}}(jQuery),function($){function _1(a){$(a).addClass("validatebox-text")}function _3(a){var b=$.data(a,"validatebox");b.validating=!1,b.timer&&clearTimeout(b.timer),$(a).tooltip("destroy"),$(a).unbind(),$(a).remove()}function _6(a){var b=$(a),c=$.data(a,"validatebox");b.unbind(".validatebox"),c.options.novalidate||b.bind("focus.validatebox",function(){c.validating=!0,c.value=void 0,function(){c.validating&&(c.value!=b.val()?(c.value=b.val(),c.timer&&clearTimeout(c.timer),c.timer=setTimeout(function(){$(a).validatebox("validate")},c.options.delay)):_f(a),setTimeout(arguments.callee,200))}()}).bind("blur.validatebox",function(){c.timer&&(clearTimeout(c.timer),c.timer=void 0),c.validating=!1,_a(a)}).bind("mouseenter.validatebox",function(){b.hasClass("validatebox-invalid")&&_b(a)}).bind("mouseleave.validatebox",function(){c.validating||_a(a)})}function _b(a){var b=$.data(a,"validatebox"),c=b.options;$(a).tooltip($.extend({},c.tipOptions,{content:b.message,position:c.tipPosition,deltaX:c.deltaX})).tooltip("show"),b.tip=!0}function _f(a){var b=$.data(a,"validatebox");b&&b.tip&&$(a).tooltip("reposition")}function _a(a){var b=$.data(a,"validatebox");b.tip=!1,$(a).tooltip("hide")}function _14(_15){function _19(a){_16.message=a}function _1a(_1b){var _1c=/([a-zA-Z_]+)(.*)/.exec(_1b),_1d=_17.rules[_1c[1]];if(_1d&&_18){var _1e=eval(_1c[2]);if(!_1d.validator(_18,_1e)){box.addClass("validatebox-invalid");var _1f=_1d.message;if(_1e)for(var i=0;i<_1e.length;i++)_1f=_1f.replace(new RegExp("\\{"+i+"\\}","g"),_1e[i]);return _19(_17.invalidMessage||_1f),_16.validating&&_b(_15),!1}}return!0}var _16=$.data(_15,"validatebox"),_17=_16.options,box=$(_15),_18=box.val();if(box.removeClass("validatebox-invalid"),_a(_15),_17.novalidate||box.is(":disabled"))return!0;if(_17.required&&""==_18)return box.addClass("validatebox-invalid"),_19(_17.missingMessage),_16.validating&&_b(_15),!1;if(_17.validType)if("string"==typeof _17.validType){if(!_1a(_17.validType))return!1}else for(var i=0;i<_17.validType.length;i++)if(!_1a(_17.validType[i]))return!1;return!0}function _20(a,b){var c=$.data(a,"validatebox").options;void 0!=b&&(c.novalidate=b),c.novalidate&&($(a).removeClass("validatebox-invalid"),_a(a)),_6(a)}$.fn.validatebox=function(a,b){return"string"==typeof a?$.fn.validatebox.methods[a](this,b):(a=a||{},this.each(function(){var b=$.data(this,"validatebox");b?$.extend(b.options,a):(_1(this),$.data(this,"validatebox",{options:$.extend({},$.fn.validatebox.defaults,$.fn.validatebox.parseOptions(this),a)})),_20(this)}))},$.fn.validatebox.methods={options:function(a){return $.data(a[0],"validatebox").options},destroy:function(a){return a.each(function(){_3(this)})},validate:function(a){return a.each(function(){_14(this)})},isValid:function(a){return _14(a[0])},enableValidation:function(a){return a.each(function(){_20(this,!1)})},disableValidation:function(a){return a.each(function(){_20(this,!0)})}},$.fn.validatebox.parseOptions=function(a){var b=$(a);return $.extend({},$.parser.parseOptions(a,["validType","missingMessage","invalidMessage","tipPosition",{delay:"number",deltaX:"number"}]),{required:b.attr("required")?!0:void 0,novalidate:void 0!=b.attr("novalidate")?!0:void 0})},$.fn.validatebox.defaults={required:!1,validType:null,delay:200,missingMessage:"This field is required.",invalidMessage:null,tipPosition:"right",deltaX:0,novalidate:!1,tipOptions:{showEvent:"none",hideEvent:"none",showDelay:0,hideDelay:0,zIndex:"",onShow:function(){$(this).tooltip("tip").css({color:"#000",borderColor:"#CC9933",backgroundColor:"#FFFFCC"})},onHide:function(){$(this).tooltip("destroy")}},rules:{email:{validator:function(a){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)},message:"Please enter a valid email address."},url:{validator:function(a){return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},message:"Please enter a valid URL."},length:{validator:function(a,b){var c=$.trim(a).length;return c>=b[0]&&c<=b[1]},message:"Please enter a value between {0} and {1}."},remote:{validator:function(a,b){var c={};c[b[1]]=a;var d=$.ajax({url:b[0],dataType:"json",data:c,async:!1,cache:!1,type:"post"}).responseText;return"true"==d},message:"Please fix this field."}}}}(jQuery),function(a){function b(b,c){var d=a.data(b,"combo"),e=d.options,f=d.combo,g=d.panel;if(c&&(e.width=c),isNaN(e.width)){var h=a(b).clone();h.css("visibility","hidden"),h.appendTo("body"),e.width=a(b).outerWidth(),h.remove()}f.appendTo("body");var i=f.find("input.combo-text"),j=f.find(".combo-arrow"),k=e.hasDownArrow?j._outerWidth():0;f._outerWidth(e.width)._outerHeight(e.height),i._outerWidth(f.width()-k),i.css({height:f.height()+"px",lineHeight:f.height()+"px"}),j._outerHeight(f.height()),g.panel("resize",{width:e.panelWidth?e.panelWidth:f.outerWidth(),height:e.panelHeight}),f.insertAfter(b)}function c(b){a(b).addClass("combo-f").hide();var c=a('<span class="combo"><input type="text" class="combo-text" autocomplete="off"><span><span class="combo-arrow"></span></span><input type="hidden" class="combo-value"></span>').insertAfter(b),d=a('<div class="combo-panel"></div>').appendTo("body");d.panel({doSize:!1,closed:!0,cls:"combo-p",style:{position:"absolute",zIndex:10},onOpen:function(){a(this).panel("resize")},onClose:function(){var c=a.data(b,"combo");c&&c.options.onHidePanel.call(b)}});var e=a(b).attr("name");return e&&(c.find("input.combo-value").attr("name",e),a(b).removeAttr("name").attr("comboName",e)),{combo:c,panel:d}}function d(b){var c=a.data(b,"combo"),d=c.options,e=c.combo;d.hasDownArrow?e.find(".combo-arrow").show():e.find(".combo-arrow").hide(),k(b,d.disabled),l(b,d.readonly)}function e(b){var c=a.data(b,"combo"),d=c.combo.find("input.combo-text");d.validatebox("destroy"),c.panel.panel("destroy"),c.combo.remove(),a(b).remove()}function f(b){a(b).find(".combo-f").each(function(){var b=a(this).combo("panel");b.is(":visible")&&b.panel("close")})}function g(b){function c(){if(g.is(":visible"))f(g),i(b);else{var c=a(this).closest("div.combo-panel");a("div.combo-panel:visible").not(g).not(c).panel("close"),a(b).combo("showPanel")}j.focus()}var d=a.data(b,"combo"),e=d.options,g=d.panel,h=d.combo,j=h.find(".combo-text"),k=h.find(".combo-arrow");a(document).unbind(".combo").bind("mousedown.combo",function(b){var c=a(b.target).closest("span.combo,div.combo-p");return c.length?void f(c):void a("body>div.combo-p>div.combo-panel:visible").panel("close")}),j.unbind(".combo"),k.unbind(".combo"),e.disabled||e.readonly||(j.bind("click.combo",function(){if(e.editable){var b=a(this).closest("div.combo-panel");a("div.combo-panel:visible").not(g).not(b).panel("close")}else c.call(this)}).bind(a.browser.mozilla?"keyup.combo":"keydown.combo",function(c){switch(c.keyCode){case 38:e.keyHandler.up.call(b,c);break;case 40:e.keyHandler.down.call(b,c);break;case 37:e.keyHandler.left.call(b,c);break;case 39:e.keyHandler.right.call(b,c);break;case 13:return c.preventDefault(),e.keyHandler.enter.call(b,c),!1;case 9:case 27:i(b);break;default:e.editable&&(d.timer&&clearTimeout(d.timer),d.timer=setTimeout(function(){var f=j.val();d.previousValue!=f&&(d.previousValue=f,a(b).combo("showPanel"),e.keyHandler.query.call(b,j.val(),c),a(b).combo("validate"))},e.delay))}}),k.bind("click.combo",function(){c.call(this)}).bind("mouseenter.combo",function(){a(this).addClass("combo-arrow-hover")}).bind("mouseleave.combo",function(){a(this).removeClass("combo-arrow-hover")}))}function h(b){function c(){var b=f.offset().left;return b+g._outerWidth()>a(window)._outerWidth()+a(document).scrollLeft()&&(b=a(window)._outerWidth()+a(document).scrollLeft()-g._outerWidth()),0>b&&(b=0),b}function d(){var b=f.offset().top+f._outerHeight();return b+g._outerHeight()>a(window)._outerHeight()+a(document).scrollTop()&&(b=f.offset().top-g._outerHeight()),b<a(document).scrollTop()&&(b=f.offset().top+f._outerHeight()),b}var e=a.data(b,"combo").options,f=a.data(b,"combo").combo,g=a.data(b,"combo").panel;a.fn.window&&g.panel("panel").css("z-index",a.fn.window.defaults.zIndex++),g.panel("move",{left:f.offset().left,top:d()}),g.panel("options").closed&&(g.panel("open"),e.onShowPanel.call(b)),function(){g.is(":visible")&&(g.panel("move",{left:c(),top:d()}),setTimeout(arguments.callee,200))}()}function i(b){var c=a.data(b,"combo").panel;c.panel("close")}function j(b){var c=a.data(b,"combo").options,d=a(b).combo("textbox");d.validatebox(a.extend({},c,{deltaX:c.hasDownArrow?c.deltaX:c.deltaX>0?1:-1}))}function k(b,c){var d=a.data(b,"combo"),e=d.options,f=d.combo;c?(e.disabled=!0,a(b).attr("disabled",!0),f.find(".combo-value").attr("disabled",!0),f.find(".combo-text").attr("disabled",!0)):(e.disabled=!1,a(b).removeAttr("disabled"),f.find(".combo-value").removeAttr("disabled"),f.find(".combo-text").removeAttr("disabled"))}function l(b,c){var d=a.data(b,"combo"),e=d.options;e.readonly=void 0==c?!0:c;var f=e.readonly?!0:!e.editable;d.combo.find(".combo-text").attr("readonly",f).css("cursor",f?"pointer":"")}function m(b){var c=a.data(b,"combo"),d=c.options,e=c.combo;d.multiple?e.find("input.combo-value").remove():e.find("input.combo-value").val(""),e.find("input.combo-text").val("")}function n(b){var c=a.data(b,"combo").combo;return c.find("input.combo-text").val()}function o(b,c){var d=a.data(b,"combo"),e=d.combo.find("input.combo-text");e.val()!=c&&(e.val(c),a(b).combo("validate"),d.previousValue=c)}function p(b){var c=[],d=a.data(b,"combo").combo;return d.find("input.combo-value").each(function(){c.push(a(this).val())}),c}function q(b,c){var d=a.data(b,"combo").options,e=p(b),f=a.data(b,"combo").combo;f.find("input.combo-value").remove();for(var g=a(b).attr("comboName"),h=0;h<c.length;h++){var i=a('<input type="hidden" class="combo-value">').appendTo(f);g&&i.attr("name",g),i.val(c[h])}for(var j=[],h=0;h<e.length;h++)j[h]=e[h];for(var k=[],h=0;h<c.length;h++)for(var l=0;l<j.length;l++)if(c[h]==j[l]){k.push(c[h]),j.splice(l,1);break}(k.length!=c.length||c.length!=e.length)&&(d.multiple?d.onChange.call(b,c,e):d.onChange.call(b,c[0],e[0]))}function r(a){var b=p(a);return b[0]}function s(a,b){q(a,[b])}function t(b){var c=a.data(b,"combo").options,d=c.onChange;c.onChange=function(){},c.multiple?(c.value?"object"==typeof c.value?q(b,c.value):s(b,c.value):q(b,[]),c.originalValue=p(b)):(s(b,c.value),c.originalValue=c.value),c.onChange=d}a.fn.combo=function(e,f){if("string"==typeof e){var h=a.fn.combo.methods[e];return h?h(this,f):this.each(function(){var b=a(this).combo("textbox");b.validatebox(e,f)})}return e=e||{},this.each(function(){var f=a.data(this,"combo");if(f)a.extend(f.options,e);else{var h=c(this);f=a.data(this,"combo",{options:a.extend({},a.fn.combo.defaults,a.fn.combo.parseOptions(this),e),combo:h.combo,panel:h.panel,previousValue:null}),a(this).removeAttr("disabled")}d(this),b(this),g(this),j(this),t(this)})},a.fn.combo.methods={options:function(b){return a.data(b[0],"combo").options},panel:function(b){return a.data(b[0],"combo").panel},textbox:function(b){return a.data(b[0],"combo").combo.find("input.combo-text")},destroy:function(a){return a.each(function(){e(this)})},resize:function(a,c){return a.each(function(){b(this,c)})},showPanel:function(a){return a.each(function(){h(this)})},hidePanel:function(a){return a.each(function(){i(this)})},disable:function(a){return a.each(function(){k(this,!0),g(this)})},enable:function(a){return a.each(function(){k(this,!1),g(this)})},readonly:function(a,b){return a.each(function(){l(this,b),g(this)})},isValid:function(b){var c=a.data(b[0],"combo").combo.find("input.combo-text");return c.validatebox("isValid")},clear:function(a){return a.each(function(){m(this)})},reset:function(b){return b.each(function(){var b=a.data(this,"combo").options;b.multiple?a(this).combo("setValues",b.originalValue):a(this).combo("setValue",b.originalValue)})},getText:function(a){return n(a[0])},setText:function(a,b){return a.each(function(){o(this,b)})},getValues:function(a){return p(a[0])},setValues:function(b,c){return b.each(function(){q(this,c);var b=a.data(this,"combo").options;a(this).next(".combo").find(".combo-value").attr("defaultValue",b.originalValue)})},getValue:function(a){return r(a[0])},setValue:function(a,b){return a.each(function(){s(this,b)})}},a.fn.combo.parseOptions=function(b){var c=a(b);return a.extend({},a.fn.validatebox.parseOptions(b),a.parser.parseOptions(b,["width","height","separator",{panelWidth:"number",editable:"boolean",hasDownArrow:"boolean",delay:"number",selectOnNavigation:"boolean"}]),{panelHeight:"auto"==c.attr("panelHeight")?"auto":parseInt(c.attr("panelHeight"))||void 0,multiple:c.attr("multiple")?!0:void 0,disabled:c.attr("disabled")?!0:void 0,readonly:c.attr("readonly")?!0:void 0,value:c.val()||void 0})},a.fn.combo.defaults=a.extend({},a.fn.validatebox.defaults,{width:"auto",height:22,panelWidth:null,panelHeight:"auto",multiple:!1,prompt:"请选择...",selectOnNavigation:!0,separator:",",editable:!0,disabled:!1,readonly:!1,hasDownArrow:!0,value:"",delay:200,deltaX:19,keyHandler:{up:function(){},down:function(){},left:function(){},right:function(){},enter:function(){},query:function(){}},onShowPanel:function(){},onHidePanel:function(){},onChange:function(){}})}(jQuery),function(a){function b(b,c,d,e){function f(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if(e[b]==c)return e}return null}{var g=a.data(b,"combobox");g.options}return e?f(g.groups,d,c):f(g.data,d?d:g.options.valueField,c)}function c(c,d){var e=a(c).combo("panel"),f=b(c,d);if(f){var g=a("#"+f.domId);if(g.position().top<=0){var h=e.scrollTop()+g.position().top;e.scrollTop(h)}else if(g.position().top+g.outerHeight()>e.height()){var h=e.scrollTop()+g.position().top+g.outerHeight()-e.height();e.scrollTop(h)}}}function d(d,f){var g=a.data(d,"combobox").options,h=a(d).combobox("panel"),i=h.children("div.combobox-item-hover");i.length||(i=h.children("div.combobox-item-selected")),i.removeClass("combobox-item-hover");
var j="div.combobox-item:visible:not(.combobox-item-disabled):first",k="div.combobox-item:visible:not(.combobox-item-disabled):last";if(i.length?"next"==f?(i=i.nextAll(j),i.length||(i=h.children(j))):(i=i.prevAll(j),i.length||(i=h.children(k))):i=h.children("next"==f?j:k),i.length){i.addClass("combobox-item-hover");var l=b(d,i.attr("id"),"domId");l&&(c(d,l[g.valueField]),g.selectOnNavigation&&e(d,l[g.valueField]))}}function e(c,d){var e=a.data(c,"combobox").options,f=a(c).combo("getValues");-1==a.inArray(d+"",f)&&(e.multiple?f.push(d):f=[d],g(c,f),e.onSelect.call(c,b(c,d)))}function f(c,d){var e=a.data(c,"combobox").options,f=a(c).combo("getValues"),h=a.inArray(d+"",f);h>=0&&(f.splice(h,1),g(c,f),e.onUnselect.call(c,b(c,d)))}function g(c,d,e){var f=a.data(c,"combobox").options,g=a(c).combo("panel");g.find("div.combobox-item-selected").removeClass("combobox-item-selected");for(var h=[],i=[],j=0;j<d.length;j++){var k=d[j],l=k,m=b(c,k);m&&(l=m[f.textField],a("#"+m.domId).addClass("combobox-item-selected")),h.push(k),i.push(l)}a(c).combo("setValues",h),e||a(c).combo("setText",i.join(f.separator))}function h(b,c,d){var e=a.data(b,"combobox"),f=e.options;e.data=f.loadFilter.call(b,c),e.groups=[],c=e.data;for(var h=a(b).combobox("getValues"),i=[],j=void 0,k=0;k<c.length;k++){var l=c[k],n=l[f.valueField]+"",o=l[f.textField],p=l[f.groupField];if(p){if(j!=p){j=p;var q={value:p,domId:"_easyui_combobox_"+m++};e.groups.push(q),i.push('<div id="'+q.domId+'" class="combobox-group">'),i.push(f.groupFormatter?f.groupFormatter.call(b,p):p),i.push("</div>")}}else j=void 0;var r="combobox-item"+(l.disabled?" combobox-item-disabled":"")+(p?" combobox-gitem":"");l.domId="_easyui_combobox_"+m++,i.push('<div id="'+l.domId+'" class="'+r+'">'),i.push(f.formatter?f.formatter.call(b,l):o),i.push("</div>"),l.selected&&-1==a.inArray(n,h)&&h.push(n)}a(b).combo("panel").html(i.join("")),f.multiple?g(b,h,d):g(b,h.length?[h[h.length-1]]:[],d),f.onLoadSuccess.call(b,c)}function i(b,c,d,e){var f=a.data(b,"combobox").options;c&&(f.url=c),d=d||{},0!=f.onBeforeLoad.call(b,d)&&f.loader.call(b,d,function(a){h(b,a,e)},function(){f.onLoadError.apply(this,arguments)})}function j(c,d){var e=a.data(c,"combobox"),f=e.options;if(f.multiple&&!d?g(c,[],!0):g(c,[d],!0),"remote"==f.mode)i(c,null,{q:d},!0);else{var h=a(c).combo("panel");h.find("div.combobox-item,div.combobox-group").hide();for(var j=e.data,k=void 0,l=0;l<j.length;l++){var m=j[l];if(f.filter.call(c,d,m)){var n=m[f.valueField],o=m[f.textField],p=m[f.groupField],q=a("#"+m.domId).show();if(o.toLowerCase()==d.toLowerCase()&&(g(c,[n]),q.addClass("combobox-item-selected")),f.groupField&&k!=p){var r=b(c,p,"value",!0);r&&a("#"+r.domId).show(),k=p}}}}}function k(c){var d=a(c),e=d.combobox("options"),f=d.combobox("panel"),g=f.children("div.combobox-item-hover");if(g.length||(g=f.children("div.combobox-item-selected")),g.length){var h=b(c,g.attr("id"),"domId");if(h){var i=h[e.valueField];e.multiple?g.hasClass("combobox-item-selected")?d.combobox("unselect",i):d.combobox("select",i):(d.combobox("select",i),d.combobox("hidePanel"));for(var j=[],k=d.combobox("getValues"),l=0;l<k.length;l++)b(c,k[l])&&j.push(k[l]);d.combobox("setValues",j)}}}function l(d){var g=a.data(d,"combobox").options;a(d).addClass("combobox-f"),a(d).combo(a.extend({},g,{onShowPanel:function(){a(d).combo("panel").find("div.combobox-item,div.combobox-group").show(),c(d,a(d).combobox("getValue")),g.onShowPanel.call(d)}})),a(d).combo("panel").unbind().bind("mouseover",function(b){a(this).children("div.combobox-item-hover").removeClass("combobox-item-hover");var c=a(b.target).closest("div.combobox-item");c.hasClass("combobox-item-disabled")||c.addClass("combobox-item-hover"),b.stopPropagation()}).bind("mouseout",function(b){a(b.target).closest("div.combobox-item").removeClass("combobox-item-hover"),b.stopPropagation()}).bind("click",function(c){var h=a(c.target).closest("div.combobox-item");if(h.length&&!h.hasClass("combobox-item-disabled")){var i=b(d,h.attr("id"),"domId");if(i){var j=i[g.valueField];g.multiple?h.hasClass("combobox-item-selected")?f(d,j):e(d,j):(e(d,j),a(d).combo("hidePanel")),c.stopPropagation()}}})}var m=1;a.fn.combobox=function(b,c){if("string"==typeof b){var d=a.fn.combobox.methods[b];return d?d(this,c):this.combo(b,c)}return b=b||{},this.each(function(){var c=a.data(this,"combobox");if(c)a.extend(c.options,b),l(this);else{c=a.data(this,"combobox",{options:a.extend({},a.fn.combobox.defaults,a.fn.combobox.parseOptions(this),b),data:[]}),l(this);var d=a.fn.combobox.parseData(this);d.length&&h(this,d)}c.options.data&&(c.options.data=a.extend(!0,[],c.options.data),h(this,c.options.data)),i(this)})},a.fn.combobox.methods={options:function(b){var c=b.combo("options");return a.extend(a.data(b[0],"combobox").options,{originalValue:c.originalValue,disabled:c.disabled,readonly:c.readonly})},getData:function(b){return a.data(b[0],"combobox").data},setValues:function(a,b){return a.each(function(){g(this,b)})},setValue:function(b,c){return b.each(function(){g(this,[c]),a(this).combo("options").originalValue=[c],a(this).next(".combo").find(".combo-value").attr("defaultValue",[c])})},clear:function(b){return b.each(function(){a(this).combo("clear");var b=a(this).combo("panel");b.find("div.combobox-item-selected").removeClass("combobox-item-selected")})},reset:function(b){return b.each(function(){var b=a(this).combobox("options");b.multiple?a(this).combobox("setValues",b.originalValue):a(this).combobox("setValue",b.originalValue)})},loadData:function(a,b){return a.each(function(){h(this,b)})},reload:function(a,b){return a.each(function(){i(this,b)})},select:function(a,b){return a.each(function(){e(this,b)})},unselect:function(a,b){return a.each(function(){f(this,b)})}},a.fn.combobox.parseOptions=function(b){a(b);return a.extend({},a.fn.combo.parseOptions(b),a.parser.parseOptions(b,["valueField","textField","groupField","mode","method","url"]))},a.fn.combobox.parseData=function(b){function c(b,c){var f=a(b),g={};g[e.valueField]=void 0!=f.attr("value")?f.attr("value"):f.html(),g[e.textField]=f.html(),g.selected=f.is(":selected"),g.disabled=f.is(":disabled"),c&&(e.groupField=e.groupField||"group",g[e.groupField]=c),d.push(g)}var d=[],e=a(b).combobox("options");return a(b).children().each(function(){if("optgroup"==this.tagName.toLowerCase()){var b=a(this).attr("label");a(this).children().each(function(){c(this,b)})}else c(this)}),d},a.fn.combobox.defaults=a.extend({},a.fn.combo.defaults,{valueField:"value",textField:"text",groupField:null,groupFormatter:function(a){return a},mode:"local",method:"post",url:null,data:null,keyHandler:{up:function(a){d(this,"prev"),a.preventDefault()},down:function(a){d(this,"next"),a.preventDefault()},left:function(){},right:function(){},enter:function(){k(this)},query:function(a){j(this,a)}},filter:function(b,c){var d=a(this).combobox("options");return 0==c[d.textField].toLowerCase().indexOf(b.toLowerCase())},formatter:function(b){var c=a(this).combobox("options");return b[c.textField]},loader:function(b,c,d){var e=a(this).combobox("options");return e.url?void a.ajax({type:e.method,url:e.url,data:b,dataType:"json",success:function(a){c(a)},error:function(){d.apply(this,arguments)}}):!1},loadFilter:function(a){return a},onBeforeLoad:function(){},onLoadSuccess:function(){},onLoadError:function(){},onSelect:function(){},onUnselect:function(){}})}(jQuery);var $dp,WdatePicker;!function(){function a(){try{o[v],o.$dp=o.$dp||{}}catch(a){o=t,$dp=$dp||{}}var c={win:t,$:function(a){return"string"==typeof a?t[v].getElementById(a):a},$D:function(a,b){return this.$DV(this.$(a).value,b)},$DV:function(a,b){if(""!=a){if(this.dt=$dp.cal.splitDate(a,$dp.cal.dateFmt),b)for(var c in b)if(void 0===this.dt[c])this.errMsg="invalid property:"+c;else if(this.dt[c]+=b[c],"M"==c){var d=b.M>0?1:0,e=new Date(this.dt.y,this.dt.M,0).getDate();this.dt.d=Math.min(e+d,this.dt.d)}if(this.dt.refresh())return this.dt}return""},show:function(){for(var a=o[v].getElementsByTagName("div"),b=1e5,c=0;c<a.length;c++){var d=parseInt(a[c].style.zIndex);d>b&&(b=d)}this.dd.style.zIndex=b+2,l(this.dd,"block")},hide:function(){l(this.dd,"none")},attachEvent:b};for(var d in c)o.$dp[d]=c[d];$dp=o.$dp}function b(a,b,c){if(q)a.attachEvent(b,c);else if(c){var d=b.replace(/on/,"");c._ieEmuEventHandler=function(a){return c(a)},a.addEventListener(d,c._ieEmuEventHandler,!1)}}function c(){for(var a,b,c=t[v][x]("script"),d=0;d<c.length&&(a=c[d].getAttribute("src")||"",a=a.substr(0,a.toLowerCase().indexOf("ui.js")),b=a.lastIndexOf("/"),b>0&&(a=a.substring(0,b+1)),!a);d++);return a+"my97/"}function d(a){a=a||o;for(var b=0,c=0;a!=o;){for(var d=a.parent[v][x]("iframe"),f=0;f<d.length;f++)try{if(d[f].contentWindow==a){var g=e(d[f]);b+=g.left,c+=g.top;break}}catch(h){}a=a.parent}return{leftM:b,topM:c}}function e(a){if(a.getBoundingClientRect)return a.getBoundingClientRect();var b={ROOT_TAG:/^body|html$/i,OP_SCROLL:/^(?:inline|table-row)$/i},c=!1,d=null,e=a.offsetTop,f=a.offsetLeft,h=a.offsetWidth,i=a.offsetHeight,j=a.offsetParent;if(j!=a)for(;j;)f+=j.offsetLeft,e+=j.offsetTop,"fixed"==k(j,"position").toLowerCase()?c=!0:"body"==j.tagName.toLowerCase()&&(d=j.ownerDocument.defaultView),j=j.offsetParent;for(j=a.parentNode;j.tagName&&!b.ROOT_TAG.test(j.tagName);)(j.scrollTop||j.scrollLeft)&&(b.OP_SCROLL.test(l(j))||s&&"visible"===j.style.overflow||(f-=j.scrollLeft,e-=j.scrollTop)),j=j.parentNode;if(!c){var m=g(d);f-=m.left,e-=m.top}return h+=f,i+=e,{left:f,top:e,right:h,bottom:i}}function f(a){a=a||o;var b=a[v],c=a.innerWidth?a.innerWidth:b[w]&&b[w].clientWidth?b[w].clientWidth:b.body.offsetWidth,d=a.innerHeight?a.innerHeight:b[w]&&b[w].clientHeight?b[w].clientHeight:b.body.offsetHeight;return{width:c,height:d}}function g(a){a=a||o;var b=a[v],c=b[w],d=b.body;return b=c&&null!=c.scrollTop&&(c.scrollTop>d.scrollTop||c.scrollLeft>d.scrollLeft)?c:d,{top:b.scrollTop,left:b.scrollLeft}}function h(a){try{var b=a?a.srcElement||a.target:null;$dp.cal&&!$dp.eCont&&$dp.dd&&b!=$dp.el&&"block"==$dp.dd.style.display&&$dp.cal.close()}catch(a){}}function i(){$dp.status=2}function j(c,d){function e(){return q&&o!=t&&"complete"!=o[v].readyState?!1:!0}function f(){if(r){for(func=f.caller;null!=func;){var a=func.arguments[0];if(a&&(a+"").indexOf("Event")>=0)return a;func=func.caller}return null}return event}if($dp){a(),c=c||{};for(var g in n)"$"!=g.substring(0,1)&&void 0===c[g]&&(c[g]=n[g]);if(d){if(!e())return void(A=A||setInterval(function(){"complete"==o[v].readyState&&clearInterval(A),j(null,!0)},50));if(0!=$dp.status)return;$dp.status=1,c.el=u,m(c,!0)}else if(c.eCont)c.eCont=$dp.$(c.eCont),c.el=u,c.autoPickDate=!0,c.qsEnabled=!1,m(c);else{if(n.$preLoad&&2!=$dp.status)return;var h=f();if((t.event===h||h)&&(c.srcEl=h.srcElement||h.target,h.cancelBubble=!0),c.el=c.el=$dp.$(c.el||c.srcEl),!c.el||c.el.My97Mark===!0||c.el.disabled||$dp.dd&&"none"!=l($dp.dd)&&"-970px"!=$dp.dd.style.left){try{c.el.My97Mark&&(c.el.My97Mark=!1)}catch(i){}return}if(h&&1==c.el.nodeType&&void 0===c.el.My97Mark){"focus"==h.type?b(c.el,"onclick",function(){j(c)}):b(c.el,"onfocus",function(){j(c)})}m(c)}}}function k(a,b){return a.currentStyle?a.currentStyle[b]:document.defaultView.getComputedStyle(a,!1)[b]}function l(a,b){if(a){if(null==b)return k(a,"display");a.style.display=b}}function m(a,b){function c(a,b){var c=t[v].domain,d=!1;a.innerHTML='<iframe hideFocus=true width=9 height=7 frameborder=0 border=0 scrolling=no src="about:blank"></iframe>';var e,f=(n.$langList,n.$skinList);try{e=a.lastChild.contentWindow[v]}catch(g){d=!0,a.lastChild.src="javascript:void((function(){document.open();document.domain='"+c+"';})())",e=a.lastChild.contentWindow[v]}var j=b.getRealLang();a.lang=j.name,a.skin=b.skin;var k=["<head><script>","","var $d, $dp, $cfg=document.cfg, $pdp = parent.$dp, $dt, $tdt, $sdt, $lastInput, $IE=$pdp.ie, $FF = $pdp.ff,$OPERA=$pdp.opera, $ny, $cMark = false;","if($cfg.eCont){$dp = {};for(var p in $pdp)$dp[p]=$pdp[p];}else{$dp=$pdp;};for(var p in $cfg){$dp[p]=$cfg[p];}","document.oncontextmenu=function(){try{$c._fillQS(!$dp.has.d,1);showB($d.qsDivSel);}catch(e){};return false;};","</script><script src=",p,"lang/",j.name,".js charset=",j.charset,"></script>"];d&&(k[1]='document.domain="'+c+'";');for(var l=0;l<f.length;l++)f[l].name==b.skin&&k.push('<link rel="stylesheet" type="text/css" href="'+p+"skin/"+f[l].name+'/datepicker.css" charset="'+f[l].charset+'"/>');k.push('<script type="text/javascript" src="'+p+'calendar.js?"+Math.random()+""></script>'),k.push('</head><body leftmargin="0" topmargin="0" tabindex=0></body></html>'),k.push("<script>var t;t=t||setInterval(function(){if(document.ready){new My97DP();$cfg.onload();$c.autoSize();$cfg.setPos($dp);clearInterval(t);}},20);</script>"),b.setPos=h,b.onload=i,e.write("<html>"),e.cfg=b,e.write(k.join("")),e.close()}function h(a){var b=a.position.left,c=a.position.top,h=a.el;if(h!=u){h==a.srcEl||"none"!=l(h)&&"hidden"!=h.type||(h=a.srcEl);var i=e(h),j=d(t),k=f(o),m=g(o),n=$dp.dd.offsetHeight,p=$dp.dd.offsetWidth;if(isNaN(c)&&(c=0),j.topM+i.bottom+n>k.height&&j.topM+i.top-n>0)c+=m.top+j.topM+i.top-n-2;else{c+=m.top+j.topM+i.bottom;var r=c-m.top+n-k.height;r>0&&(c-=r)}isNaN(b)&&(b=0),b+=m.left+Math.min(j.leftM+i.left,k.width-p-5)-(q?2:0),a.dd.style.top=c+"px",a.dd.style.left=b+"px"}}var j=a.el?a.el.nodeName:"INPUT";if(b||a.eCont||new RegExp(/input|textarea|div|span|p|a/gi).test(j)){if(a.elProp="INPUT"==j?"value":"innerHTML","auto"==a.lang&&(a.lang=q?navigator.browserLanguage.toLowerCase():navigator.language.toLowerCase()),!a.eCont)for(var k in a)$dp[k]=a[k];!$dp.dd||a.eCont||$dp.dd&&(a.getRealLang().name!=$dp.dd.lang||a.skin!=$dp.dd.skin)?a.eCont?c(a.eCont,a):($dp.dd=o[v].createElement("DIV"),$dp.dd.style.cssText="position:absolute",o[v].body.appendChild($dp.dd),c($dp.dd,a),b?$dp.dd.style.left=$dp.dd.style.top="-970px":($dp.show(),h($dp))):$dp.cal&&($dp.show(),$dp.cal.init(),$dp.eCont||h($dp))}}var n={$langList:[{name:"en",charset:"UTF-8"},{name:"zh-cn",charset:"UTF-8"},{name:"zh-tw",charset:"UTF-8"}],$skinList:[{name:"default",charset:"gb2312"},{name:"whyGreen",charset:"gb2312"},{name:"blue",charset:"gb2312"},{name:"ext",charset:"gb2312"},{name:"twoer",charset:"gb2312"}],$wdate:!0,$crossFrame:!0,$preLoad:!1,$dpPath:bootPATH+"assets/js/libs/my97/"||"../assets/js/libs/my97/",doubleCalendar:!1,enableKeyboard:!0,enableInputMask:!0,autoUpdateOnChanged:null,weekMethod:"ISO8601",position:{},lang:"auto",skin:"blue",dateFmt:"yyyy-MM-dd",realDateFmt:"yyyy-MM-dd",realTimeFmt:"HH:mm:ss",realFullFmt:"%Date %Time",minDate:"1900-01-01 00:00:00",maxDate:"2099-12-31 23:59:59",startDate:"",alwaysUseStartDate:!1,yearOffset:1911,firstDayOfWeek:0,isShowWeek:!1,highLineWeekDay:!0,isShowClear:!0,isShowToday:!0,isShowOK:!0,isShowOthers:!0,readOnly:!1,errDealMode:0,autoPickDate:null,qsEnabled:!0,autoShowQS:!1,specialDates:null,specialDays:null,disabledDates:null,disabledDays:null,opposite:!1,onpicking:null,onpicked:null,onclearing:null,oncleared:null,ychanging:null,ychanged:null,Mchanging:null,Mchanged:null,dchanging:null,dchanged:null,Hchanging:null,Hchanged:null,mchanging:null,mchanged:null,schanging:null,schanged:null,eCont:null,vel:null,elProp:"",errMsg:"",quickSel:[],has:{},getRealLang:function(){for(var a=n.$langList,b=0;b<a.length;b++)if(a[b].name==this.lang)return a[b];return a[0]}};WdatePicker=j;var o,p,q,r,s,t=window,u={innerHTML:""},v="document",w="documentElement",x="getElementsByTagName",y=navigator.appName;if("Microsoft Internet Explorer"==y?q=!0:"Opera"==y?s=!0:r=!0,p=n.$dpPath||c(),o=t,n.$crossFrame)try{for(;o.parent!=o&&0==o.parent[v][x]("frameset").length;)o=o.parent}catch(z){}o.$dp||(o.$dp={ff:r,ie:q,opera:s,status:0,defMinDate:n.minDate,defMaxDate:n.maxDate}),a(),n.$preLoad&&0==$dp.status&&b(t,"onload",function(){j(null,!0)}),t[v].docMD||(b(t[v],"onmousedown",h),t[v].docMD=!0),o[v].docMD||(b(o[v],"onmousedown",h),o[v].docMD=!0),b(t,"onunload",function(){$dp.dd&&l($dp.dd,"none")});var A}(),function(a){a.fn.datebox=function(b,c){return"string"==typeof b?a.fn.datebox.methods[b](this,c):(b=b||{},WdatePicker?this.each(function(){var c,d=a.data(this,"datebox");d?(c=a.extend(d.options,b),d.opts=c):(c=a.extend({},a.fn.datebox.defaults,a.fn.datebox.parseOptions(this),b),a.data(this,"datebox",{options:c})),c.disabled&&a(this).addClass("disabled").attr("disabled",!0),c.maxDate&&(c.maxDate="#F{$dp.$D(\\'"+c.maxDate+"\\')}"),c.minDate&&(c.minDate="#F{$dp.$D(\\'"+c.minDate+"\\')}"),a(this).addClass("Wdate").click(function(){WdatePicker(c)}),b.width&&a(this).width(b.width)}):void alert("未引入My97js包！"))},a.fn.datebox.methods={getValue:function(b){return a(b).val()},setValue:function(b,c){return a(b).val(c)},clearValue:function(b){a(b).val("")},disable:function(b){a(b).addClass("readonly").attr("disabled",!0)},enable:function(b){a(b).removeClass("readonly").attr("disabled",!1)},destroy:function(b){a(b).remove()},resize:function(b,c){a(b)._outerWidth(c)}},a.fn.datebox.parseOptions=function(b){return a.extend({},a.parser.parseOptions(b,["el","vel","weekMethod","lang","skin","dateFmt","realDateFmt","realTimeFmt","realFullFmt","minDate","maxDate","startDate",{doubleCalendar:"boolean",enableKeyboard:"boolean",enableInputMask:"boolean",autoUpdateOnChanged:"boolean",firstDayOfWeek:"number",isShowWeek:"boolean",highLineWeekDay:"boolean",isShowClear:"boolean",isShowToday:"boolean",isShowOthers:"boolean",readOnly:"boolean",errDealMode:"boolean",autoPickDate:"boolean",qsEnabled:"boolean",autoShowQS:"boolean",opposite:"boolean"}]))},a.fn.datebox.defaults={dateFmt:"yyyy-MM-dd"}}(jQuery),function(a){function b(b){var c=a('<span class="spinner"><span class="spinner-arrow"><span class="spinner-arrow-up"></span><span class="spinner-arrow-down"></span></span></span>').insertAfter(b);return a(b).addClass("spinner-text spinner-f").prependTo(c),c}function c(b,c){var d=a.data(b,"spinner").options,e=a.data(b,"spinner").spinner;c&&(d.width=c);var f=a('<div style="display:none"></div>').insertBefore(e);e.appendTo("body"),isNaN(d.width)&&(d.width=a(b).outerWidth());var g=e.find(".spinner-arrow");e._outerWidth(d.width)._outerHeight(d.height),a(b)._outerWidth(e.width()-g.outerWidth()),a(b).css({height:e.height()+"px",lineHeight:e.height()+"px"}),g._outerHeight(e.height()),g.find("span")._outerHeight(g.height()/2),e.insertAfter(f),f.remove()}function d(b){var c=a.data(b,"spinner").options,d=a.data(b,"spinner").spinner;d.find(".spinner-arrow-up,.spinner-arrow-down").unbind(".spinner"),c.disabled||(d.find(".spinner-arrow-up").bind("mouseenter.spinner",function(){a(this).addClass("spinner-arrow-hover")}).bind("mouseleave.spinner",function(){a(this).removeClass("spinner-arrow-hover")}).bind("click.spinner",function(){c.spin.call(b,!1),c.onSpinUp.call(b),a(b).validatebox("validate")}),d.find(".spinner-arrow-down").bind("mouseenter.spinner",function(){a(this).addClass("spinner-arrow-hover")}).bind("mouseleave.spinner",function(){a(this).removeClass("spinner-arrow-hover")}).bind("click.spinner",function(){c.spin.call(b,!0),c.onSpinDown.call(b),a(b).validatebox("validate")}))}function e(b,c){var d=a.data(b,"spinner").options;c?(d.disabled=!0,a(b).attr("disabled",!0)):(d.disabled=!1,a(b).removeAttr("disabled"))}a.fn.spinner=function(f,g){if("string"==typeof f){var h=a.fn.spinner.methods[f];return h?h(this,g):this.validatebox(f,g)}return f=f||{},this.each(function(){var g=a.data(this,"spinner");g?a.extend(g.options,f):(g=a.data(this,"spinner",{options:a.extend({},a.fn.spinner.defaults,a.fn.spinner.parseOptions(this),f),spinner:b(this)}),a(this).removeAttr("disabled")),g.options.originalValue=g.options.value,a(this).val(g.options.value),a(this).attr("readonly",!g.options.editable),e(this,g.options.disabled),c(this),a(this).validatebox(g.options),d(this)})},a.fn.spinner.methods={options:function(b){var c=a.data(b[0],"spinner").options;return a.extend(c,{value:b.val()})},destroy:function(b){return b.each(function(){var b=a.data(this,"spinner").spinner;a(this).validatebox("destroy"),b.remove()})},resize:function(a,b){return a.each(function(){c(this,b)})},enable:function(a){return a.each(function(){e(this,!1),d(this)})},disable:function(a){return a.each(function(){e(this,!0),d(this)})},getValue:function(a){return a.val()},setValue:function(b,c){return b.each(function(){var b=a.data(this,"spinner").options;b.value=c,a(this).val(c)})},clear:function(b){return b.each(function(){var b=a.data(this,"spinner").options;b.value="",a(this).val("")})},reset:function(b){return b.each(function(){var b=a(this).spinner("options");a(this).spinner("setValue",b.originalValue)})}},a.fn.spinner.parseOptions=function(b){var c=a(b);return a.extend({},a.fn.validatebox.parseOptions(b),a.parser.parseOptions(b,["width","height","min","max",{increment:"number",editable:"boolean"}]),{value:c.val()||void 0,disabled:c.attr("disabled")?!0:void 0})},a.fn.spinner.defaults=a.extend({},a.fn.validatebox.defaults,{width:"auto",height:22,deltaX:19,value:"",min:null,max:null,increment:1,editable:!0,disabled:!1,spin:function(){},onSpinUp:function(){},onSpinDown:function(){}})}(jQuery),function(a){function b(b){var c=a.data(b.data.target,"draggable"),d=c.options,e=c.proxy,f=b.data,g=f.startLeft+b.pageX-f.startX,h=f.startTop+b.pageY-f.startY;e&&(e.parent()[0]==document.body?(g=null!=d.deltaX&&void 0!=d.deltaX?b.pageX+d.deltaX:b.pageX-b.data.offsetWidth,h=null!=d.deltaY&&void 0!=d.deltaY?b.pageY+d.deltaY:b.pageY-b.data.offsetHeight):(null!=d.deltaX&&void 0!=d.deltaX&&(g+=b.data.offsetWidth+d.deltaX),null!=d.deltaY&&void 0!=d.deltaY&&(h+=b.data.offsetHeight+d.deltaY))),b.data.parent!=document.body&&(g+=a(b.data.parent).scrollLeft(),h+=a(b.data.parent).scrollTop()),"h"==d.axis?f.left=g:"v"==d.axis?f.top=h:(f.left=g,f.top=h)}function c(b){var c=a.data(b.data.target,"draggable"),d=c.options,e=c.proxy;e||(e=a(b.data.target)),e.css({left:b.data.left,top:b.data.top}),a("body").css("cursor",d.cursor)}function d(d){a.fn.draggable.isDragging=!0;var e=a.data(d.data.target,"draggable"),f=e.options,g=a(".droppable").filter(function(){return d.data.target!=this}).filter(function(){var b=a.data(this,"droppable").options.accept;return b?a(b).filter(function(){return this==d.data.target}).length>0:!0});e.droppables=g;var h=e.proxy;return h||(f.proxy?(h="clone"==f.proxy?a(d.data.target).clone().insertAfter(d.data.target):f.proxy.call(d.data.target,d.data.target),e.proxy=h):h=a(d.data.target)),h.css("position","absolute"),b(d),c(d),f.onStartDrag.call(d.data.target,d),!1}function e(d){var e=a.data(d.data.target,"draggable");b(d),0!=e.options.onDrag.call(d.data.target,d)&&c(d);var f=d.data.target;return e.droppables.each(function(){var b=a(this);if(!b.droppable("options").disabled){var c=b.offset();d.pageX>c.left&&d.pageX<c.left+b.outerWidth()&&d.pageY>c.top&&d.pageY<c.top+b.outerHeight()?(this.entered||(a(this).trigger("_dragenter",[f]),this.entered=!0),a(this).trigger("_dragover",[f])):this.entered&&(a(this).trigger("_dragleave",[f]),this.entered=!1)}}),!1}function f(b){function c(){g&&g.remove(),f.proxy=null}function d(){var d=!1;return f.droppables.each(function(){var e=a(this);if(!e.droppable("options").disabled){var f=e.offset();return b.pageX>f.left&&b.pageX<f.left+e.outerWidth()&&b.pageY>f.top&&b.pageY<f.top+e.outerHeight()?(h.revert&&a(b.data.target).css({position:b.data.startPosition,left:b.data.startLeft,top:b.data.startTop}),a(this).trigger("_drop",[b.data.target]),c(),d=!0,this.entered=!1,!1):void 0}}),d||h.revert||c(),d}a.fn.draggable.isDragging=!1,e(b);var f=a.data(b.data.target,"draggable"),g=f.proxy,h=f.options;if(h.revert)if(1==d())a(b.data.target).css({position:b.data.startPosition,left:b.data.startLeft,top:b.data.startTop});else if(g){var i,j;g.parent()[0]==document.body?(i=b.data.startX-b.data.offsetWidth,j=b.data.startY-b.data.offsetHeight):(i=b.data.startLeft,j=b.data.startTop),g.animate({left:i,top:j},function(){c()})}else a(b.data.target).animate({left:b.data.startLeft,top:b.data.startTop},function(){a(b.data.target).css("position",b.data.startPosition)});else a(b.data.target).css({position:"absolute",left:b.data.left,top:b.data.top}),d();return h.onStopDrag.call(b.data.target,b),a(document).unbind(".draggable"),setTimeout(function(){a("body").css("cursor","")},100),!1}a.fn.draggable=function(b,c){return"string"==typeof b?a.fn.draggable.methods[b](this,c):this.each(function(){function c(b){var c=a.data(b.data.target,"draggable"),d=c.handle,e=a(d).offset(),f=a(d).outerWidth(),g=a(d).outerHeight(),h=b.pageY-e.top,i=e.left+f-b.pageX,j=e.top+g-b.pageY,k=b.pageX-e.left;return Math.min(h,i,j,k)>c.options.edge}var g,h=a.data(this,"draggable");h?(h.handle.unbind(".draggable"),g=a.extend(h.options,b)):g=a.extend({},a.fn.draggable.defaults,a.fn.draggable.parseOptions(this),b||{});var i=g.handle?"string"==typeof g.handle?a(g.handle,this):g.handle:a(this);return a.data(this,"draggable",{options:g,handle:i}),g.disabled?void a(this).css("cursor",""):void i.unbind(".draggable").bind("mousemove.draggable",{target:this},function(b){if(!a.fn.draggable.isDragging){var d=a.data(b.data.target,"draggable").options;c(b)?a(this).css("cursor",d.cursor):a(this).css("cursor","")}}).bind("mouseleave.draggable",{target:this},function(){a(this).css("cursor","")}).bind("mousedown.draggable",{target:this},function(b){if(0!=c(b)){a(this).css("cursor","");var g=a(b.data.target).position(),h=a(b.data.target).offset(),i={startPosition:a(b.data.target).css("position"),startLeft:g.left,startTop:g.top,left:g.left,top:g.top,startX:b.pageX,startY:b.pageY,offsetWidth:b.pageX-h.left,offsetHeight:b.pageY-h.top,target:b.data.target,parent:a(b.data.target).parent()[0]};a.extend(b.data,i);var j=a.data(b.data.target,"draggable").options;0!=j.onBeforeDrag.call(b.data.target,b)&&(a(document).bind("mousedown.draggable",b.data,d),a(document).bind("mousemove.draggable",b.data,e),a(document).bind("mouseup.draggable",b.data,f))}})})},a.fn.draggable.methods={options:function(b){return a.data(b[0],"draggable").options},proxy:function(b){return a.data(b[0],"draggable").proxy},enable:function(b){return b.each(function(){a(this).draggable({disabled:!1})})},disable:function(b){return b.each(function(){a(this).draggable({disabled:!0})})}},a.fn.draggable.parseOptions=function(b){var c=a(b);return a.extend({},a.parser.parseOptions(b,["cursor","handle","axis",{revert:"boolean",deltaX:"number",deltaY:"number",edge:"number"}]),{disabled:c.attr("disabled")?!0:void 0})},a.fn.draggable.defaults={proxy:null,revert:!1,cursor:"move",deltaX:null,deltaY:null,handle:null,disabled:!1,edge:0,axis:null,onBeforeDrag:function(){},onStartDrag:function(){},onDrag:function(){},onStopDrag:function(){}},a.fn.draggable.isDragging=!1}(jQuery),function(a){function b(b){a(b).addClass("droppable"),a(b).bind("_dragenter",function(c,d){a.data(b,"droppable").options.onDragEnter.apply(b,[c,d])}),a(b).bind("_dragleave",function(c,d){a.data(b,"droppable").options.onDragLeave.apply(b,[c,d])}),a(b).bind("_dragover",function(c,d){a.data(b,"droppable").options.onDragOver.apply(b,[c,d])}),a(b).bind("_drop",function(c,d){a.data(b,"droppable").options.onDrop.apply(b,[c,d])})}a.fn.droppable=function(c,d){return"string"==typeof c?a.fn.droppable.methods[c](this,d):(c=c||{},this.each(function(){var d=a.data(this,"droppable");d?a.extend(d.options,c):(b(this),a.data(this,"droppable",{options:a.extend({},a.fn.droppable.defaults,a.fn.droppable.parseOptions(this),c)}))}))},a.fn.droppable.methods={options:function(b){return a.data(b[0],"droppable").options},enable:function(b){return b.each(function(){a(this).droppable({disabled:!1})})},disable:function(b){return b.each(function(){a(this).droppable({disabled:!0})})}},a.fn.droppable.parseOptions=function(b){var c=a(b);return a.extend({},a.parser.parseOptions(b,["accept"]),{disabled:c.attr("disabled")?!0:void 0})},a.fn.droppable.defaults={accept:null,disabled:!1,onDragEnter:function(){},onDragOver:function(){},onDragLeave:function(){},onDrop:function(){}}}(jQuery),function(a){function b(b){var c=a.data(b,"splitbutton").options;a(b).menubutton(c)}a.fn.splitbutton=function(c,d){if("string"==typeof c){var e=a.fn.splitbutton.methods[c];return e?e(this,d):this.menubutton(c,d)}return c=c||{},this.each(function(){var d=a.data(this,"splitbutton");d?a.extend(d.options,c):(a.data(this,"splitbutton",{options:a.extend({},a.fn.splitbutton.defaults,a.fn.splitbutton.parseOptions(this),c)}),a(this).removeAttr("disabled")),b(this)})},a.fn.splitbutton.methods={options:function(b){var c=b.menubutton("options"),d=a.data(b[0],"splitbutton").options;return a.extend(d,{disabled:c.disabled,toggle:c.toggle,selected:c.selected}),d}},a.fn.splitbutton.parseOptions=function(b){a(b);return a.extend({},a.fn.linkbutton.parseOptions(b),a.parser.parseOptions(b,["menu",{plain:"boolean",duration:"number"}]))},a.fn.splitbutton.defaults=a.extend({},a.fn.linkbutton.defaults,{plain:!0,menu:null,duration:100,cls:{btn1:"s-btn-active",btn2:"s-btn-plain-active",arrow:"s-btn-downarrow",trigger:"s-btn-downarrow"}})}(jQuery),function(a){function b(b){return a(b).addClass("progressbar"),a(b).html('<div class="progressbar-text"></div><div class="progressbar-value"><div class="progressbar-text"></div></div>'),a(b)}function c(b,c){var d=a.data(b,"progressbar").options,e=a.data(b,"progressbar").bar;c&&(d.width=c),e._outerWidth(d.width)._outerHeight(d.height),e.find("div.progressbar-text").width(e.width()),e.find("div.progressbar-text,div.progressbar-value").css({height:e.height()+"px",lineHeight:e.height()+"px"})}a.fn.progressbar=function(d,e){if("string"==typeof d){var f=a.fn.progressbar.methods[d];if(f)return f(this,e)}return d=d||{},this.each(function(){var e=a.data(this,"progressbar");e?a.extend(e.options,d):e=a.data(this,"progressbar",{options:a.extend({},a.fn.progressbar.defaults,a.fn.progressbar.parseOptions(this),d),bar:b(this)}),a(this).progressbar("setValue",e.options.value),c(this)})},a.fn.progressbar.methods={options:function(b){return a.data(b[0],"progressbar").options},resize:function(a,b){return a.each(function(){c(this,b)})},getValue:function(b){return a.data(b[0],"progressbar").options.value},setValue:function(b,c){return 0>c&&(c=0),c>100&&(c=100),b.each(function(){var b=a.data(this,"progressbar").options,d=b.text.replace(/{value}/,c),e=b.value;b.value=c,a(this).find("div.progressbar-value").width(c+"%"),a(this).find("div.progressbar-text").html(d),e!=c&&b.onChange.call(this,c,e)})}},a.fn.progressbar.parseOptions=function(b){return a.extend({},a.parser.parseOptions(b,["width","height","text",{value:"number"}]))},a.fn.progressbar.defaults={width:"auto",height:22,value:0,text:"{value}%",onChange:function(){}}}(jQuery),function(a){function b(b){var c=a(b);return c.addClass("tree"),c}function c(b){var c=a.data(b,"tree").options;a(b).unbind().bind("mouseover",function(b){var c=a(b.target),d=c.closest("div.tree-node");d.length&&(d.addClass("tree-node-hover"),c.hasClass("tree-hit")&&c.addClass(c.hasClass("tree-expanded")?"tree-expanded-hover":"tree-collapsed-hover"),b.stopPropagation())}).bind("mouseout",function(b){var c=a(b.target),d=c.closest("div.tree-node");d.length&&(d.removeClass("tree-node-hover"),c.hasClass("tree-hit")&&c.removeClass(c.hasClass("tree-expanded")?"tree-expanded-hover":"tree-collapsed-hover"),b.stopPropagation())}).bind("click",function(d){var e=a(d.target),g=e.closest("div.tree-node");if(g.length){if(e.hasClass("tree-hit"))return m(b,g[0]),!1;if(e.hasClass("tree-checkbox"))return f(b,g[0],!e.hasClass("tree-checkbox1")),!1;H(b,g[0]),c.onClick.call(b,C(b,g[0])),d.stopPropagation()}}).bind("dblclick",function(d){var e=a(d.target).closest("div.tree-node");e.length&&(H(b,e[0]),c.onDblClick.call(b,C(b,e[0])),d.stopPropagation())}).bind("contextmenu",function(d){var e=a(d.target).closest("div.tree-node");e.length&&(c.onContextMenu.call(b,d,C(b,e[0])),d.stopPropagation())})}function d(b){var c=a.data(b,"tree").options;c.dnd=!1;var d=a(b).find("div.tree-node");d.draggable("disable"),d.css("cursor","pointer")}function e(b){function c(b,c){var d=a(b).draggable("proxy").find("span.tree-dnd-icon");d.removeClass("tree-dnd-yes tree-dnd-no").addClass(c?"tree-dnd-yes":"tree-dnd-no")
}function d(c,d){function e(){var e=a(b).tree("pop",c);a(b).tree("append",{parent:d,data:[e]}),g.onDrop.call(b,d,e,"append")}"closed"==C(b,d).state?k(b,d,function(){e()}):e()}function e(c,d,e){var f={};"top"==e?f.before=d:f.after=d;var h=a(b).tree("pop",c);f.data=h,a(b).tree("insert",f),g.onDrop.call(b,d,h,e)}var f=a.data(b,"tree"),g=f.options,h=f.tree;f.disabledNodes=[],g.dnd=!0,h.find("div.tree-node").draggable({disabled:!1,revert:!0,cursor:"pointer",proxy:function(b){var c=a('<div class="tree-node-proxy"></div>').appendTo("body");return c.html('<span class="tree-dnd-icon tree-dnd-no">&nbsp;</span>'+a(b).find(".tree-title").html()),c.hide(),c},deltaX:15,deltaY:15,onBeforeDrag:function(c){if(0==g.onBeforeDrag.call(b,C(b,this)))return!1;if(a(c.target).hasClass("tree-hit")||a(c.target).hasClass("tree-checkbox"))return!1;if(1!=c.which)return!1;a(this).next("ul").find("div.tree-node").droppable({accept:"no-accept"});var d=a(this).find("span.tree-indent");d.length&&(c.data.offsetWidth-=d.length*d.width())},onStartDrag:function(){a(this).draggable("proxy").css({left:-1e4,top:-1e4}),g.onStartDrag.call(b,C(b,this));var c=C(b,this);void 0==c.id&&(c.id="easyui_tree_node_id_temp",u(b,c)),f.draggingNodeId=c.id},onDrag:function(b){var c=b.pageX,d=b.pageY,e=b.data.startX,f=b.data.startY,g=Math.sqrt((c-e)*(c-e)+(d-f)*(d-f));g>3&&a(this).draggable("proxy").show(),this.pageY=b.pageY},onStopDrag:function(){a(this).next("ul").find("div.tree-node").droppable({accept:"div.tree-node"});for(var c=0;c<f.disabledNodes.length;c++)a(f.disabledNodes[c]).droppable("enable");f.disabledNodes=[];var d=D(b,f.draggingNodeId);d&&"easyui_tree_node_id_temp"==d.id&&(d.id="",u(b,d)),g.onStopDrag.call(b,d)}}).droppable({accept:"div.tree-node",onDragEnter:function(d,e){0==g.onDragEnter.call(b,this,C(b,e))&&(c(e,!1),a(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),a(this).droppable("disable"),f.disabledNodes.push(this))},onDragOver:function(d,e){if(!a(this).droppable("options").disabled){var h=e.pageY,i=a(this).offset().top,j=i+a(this).outerHeight();c(e,!0),a(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),a(this).addClass(h>i+(j-i)/2?5>j-h?"tree-node-bottom":"tree-node-append":5>h-i?"tree-node-top":"tree-node-append"),0==g.onDragOver.call(b,this,C(b,e))&&(c(e,!1),a(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),a(this).droppable("disable"),f.disabledNodes.push(this))}},onDragLeave:function(d,e){c(e,!1),a(this).removeClass("tree-node-append tree-node-top tree-node-bottom"),g.onDragLeave.call(b,this,C(b,e))},onDrop:function(c,f){var h,i,j=this;return a(this).hasClass("tree-node-append")?(h=d,i="append"):(h=e,i=a(this).hasClass("tree-node-top")?"top":"bottom"),0==g.onBeforeDrop.call(b,j,B(b,f),i)?void a(this).removeClass("tree-node-append tree-node-top tree-node-bottom"):(h(f,j,i),void a(this).removeClass("tree-node-append tree-node-top tree-node-bottom"))}})}function f(b,c,d){function e(a){var b=a.next().find(".tree-checkbox");b.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2"),b.addClass(a.find(".tree-checkbox").hasClass("tree-checkbox1")?"tree-checkbox1":"tree-checkbox0")}function f(c){function d(b){var c=b.find(".tree-checkbox");if(c.hasClass("tree-checkbox0")||c.hasClass("tree-checkbox2"))return!1;var d=!0;return b.parent().siblings().each(function(){a(this).children("div.tree-node").children(".tree-checkbox").hasClass("tree-checkbox1")||(d=!1)}),d}function e(b){var c=b.find(".tree-checkbox");if(c.hasClass("tree-checkbox1")||c.hasClass("tree-checkbox2"))return!1;var d=!0;return b.parent().siblings().each(function(){a(this).children("div.tree-node").children(".tree-checkbox").hasClass("tree-checkbox0")||(d=!1)}),d}var g=y(b,c[0]);if(g){var h=a(g.target).find(".tree-checkbox");h.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2"),h.addClass(d(c)?"tree-checkbox1":e(c)?"tree-checkbox0":"tree-checkbox2"),f(a(g.target))}}var g=a.data(b,"tree").options;if(g.checkbox){var h=C(b,c);if(0!=g.onBeforeCheck.call(b,h,d)){var i=a(c),j=i.find(".tree-checkbox");j.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2"),j.addClass(d?"tree-checkbox1":"tree-checkbox0"),g.cascadeCheck&&(f(i),e(i)),g.onCheck.call(b,h,d)}}}function g(b,c){var d=a.data(b,"tree").options;if(d.checkbox){var e=a(c);if(I(b,c)){var g=e.find(".tree-checkbox");g.length?g.hasClass("tree-checkbox1")?f(b,c,!0):f(b,c,!1):d.onlyLeafCheck&&a('<span class="tree-checkbox tree-checkbox0"></span>').insertBefore(e.find(".tree-title"))}else{var g=e.find(".tree-checkbox");if(d.onlyLeafCheck)g.remove();else if(g.hasClass("tree-checkbox1"))f(b,c,!0);else if(g.hasClass("tree-checkbox2")){for(var h=!0,i=!0,j=x(b,c),k=0;k<j.length;k++)j[k].checked?i=!1:h=!1;h&&f(b,c,!0),i&&f(b,c,!1)}}}}function h(b,c,d,g){var h=a.data(b,"tree"),j=h.options,k=a(c).prevAll("div.tree-node:first");d=j.loadFilter.call(b,d,k[0]);var l=E(b,"domId",k.attr("id"));g?l?l.children=l.children?l.children.concat(d):d:h.data=h.data.concat(d):(l?l.children=d:h.data=d,a(c).empty()),j.view.render.call(j.view,b,c,d),j.dnd&&e(b),l&&u(b,l);for(var m=[],n=[],o=0;o<d.length;o++){var p=d[o];p.checked||m.push(p)}G(d,function(a){a.checked&&n.push(a)}),m.length&&f(b,a("#"+m[0].domId)[0],!1);for(var o=0;o<n.length;o++)f(b,a("#"+n[o].domId)[0],!0);setTimeout(function(){i(b,b)},0),j.onLoadSuccess.call(b,l,d)}function i(b,c,d){function e(a){var b=a.find("span.tree-icon");b.prev("span.tree-indent").addClass("tree-join")}function f(b){var c=b.find("span.tree-indent, span.tree-hit").length;b.next().find("div.tree-node").each(function(){a(this).children("span:eq("+(c-1)+")").addClass("tree-line")})}var g=a.data(b,"tree").options;if(!g.lines)return void a(b).removeClass("tree-lines");if(a(b).addClass("tree-lines"),!d){d=!0,a(b).find("span.tree-indent").removeClass("tree-line tree-join tree-joinbottom"),a(b).find("div.tree-node").removeClass("tree-node-last tree-root-first tree-root-one");var h=a(b).tree("getRoots");h.length>1?a(h[0].target).addClass("tree-root-first"):1==h.length&&a(h[0].target).addClass("tree-root-one")}a(c).children("li").each(function(){var c=a(this).children("div.tree-node"),g=c.next("ul");g.length?(a(this).next().length&&f(c),i(b,g,d)):e(c)});var j=a(c).children("li:last").children("div.tree-node").addClass("tree-node-last");j.children("span.tree-join").removeClass("tree-join").addClass("tree-joinbottom")}function j(b,c,d,e){var f=a.data(b,"tree").options;d=d||{};var g=null;if(b!=c){var i=a(c).prev();g=C(b,i[0])}if(0!=f.onBeforeLoad.call(b,g,d)){var j=a(c).prev().children("span.tree-folder");j.addClass("tree-loading");var k=f.loader.call(b,d,function(a){j.removeClass("tree-loading"),h(b,c,a),e&&e()},function(){j.removeClass("tree-loading"),f.onLoadError.apply(b,arguments),e&&e()});0==k&&j.removeClass("tree-loading")}}function k(b,c,d){var e=a.data(b,"tree").options,f=a(c).children("span.tree-hit");if(0!=f.length&&!f.hasClass("tree-expanded")){var g=C(b,c);if(0!=e.onBeforeExpand.call(b,g)){f.removeClass("tree-collapsed tree-collapsed-hover").addClass("tree-expanded"),f.next().addClass("tree-folder-open");var h=a(c).next();if(h.length)e.animate?h.slideDown("normal",function(){g.state="open",e.onExpand.call(b,g),d&&d()}):(h.css("display","block"),g.state="open",e.onExpand.call(b,g),d&&d());else{var i=a('<ul style="display:none"></ul>').insertAfter(c);j(b,i[0],{id:g.id},function(){i.is(":empty")&&i.remove(),e.animate?i.slideDown("normal",function(){g.state="open",e.onExpand.call(b,g),d&&d()}):(i.css("display","block"),g.state="open",e.onExpand.call(b,g),d&&d())})}}}}function l(b,c){var d=a.data(b,"tree").options,e=a(c).children("span.tree-hit");if(0!=e.length&&!e.hasClass("tree-collapsed")){var f=C(b,c);if(0!=d.onBeforeCollapse.call(b,f)){e.removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),e.next().removeClass("tree-folder-open");var g=a(c).next();d.animate?g.slideUp("normal",function(){f.state="closed",d.onCollapse.call(b,f)}):(g.css("display","none"),f.state="closed",d.onCollapse.call(b,f))}}}function m(b,c){var d=a(c).children("span.tree-hit");0!=d.length&&(d.hasClass("tree-expanded")?l(b,c):k(b,c))}function n(a,b){var c=x(a,b);b&&c.unshift(C(a,b));for(var d=0;d<c.length;d++)k(a,c[d].target)}function o(a,b){for(var c=[],d=y(a,b);d;)c.unshift(d),d=y(a,d.target);for(var e=0;e<c.length;e++)k(a,c[e].target)}function p(b,c){for(var d=a(b).parent();"BODY"!=d[0].tagName&&"auto"!=d.css("overflow-y");)d=d.parent();var e=a(c),f=e.offset().top;if("BODY"!=d[0].tagName){var g=d.offset().top;g>f?d.scrollTop(d.scrollTop()+f-g):f+e.outerHeight()>g+d.outerHeight()-18&&d.scrollTop(d.scrollTop()+f+e.outerHeight()-g-d.outerHeight()+18)}else d.scrollTop(f)}function q(a,b){var c=x(a,b);b&&c.unshift(C(a,b));for(var d=0;d<c.length;d++)l(a,c[d].target)}function r(b,c){var d=a(c.parent),e=c.data;if(e&&(e=a.isArray(e)?e:[e],e.length)){var f;if(0==d.length)f=a(b);else{if(I(b,d[0])){var i=d.find("span.tree-icon");i.removeClass("tree-file").addClass("tree-folder tree-folder-open");var j=a('<span class="tree-hit tree-expanded"></span>').insertBefore(i);j.prev().length&&j.prev().remove()}f=d.next(),f.length||(f=a("<ul></ul>").insertAfter(d))}h(b,f[0],e,!0),g(b,f.prev())}}function s(b,c){var d=c.before||c.after,e=y(b,d),f=c.data;if(f&&(f=a.isArray(f)?f:[f],f.length)){r(b,{parent:e?e.target:null,data:f});for(var g=a(),h=0;h<f.length;h++)g=g.add(a("#"+f[h].domId).parent());c.before?g.insertBefore(a(d).parent()):g.insertAfter(a(d).parent())}}function t(b,c){function d(c){for(var d=a(c).attr("id"),e=y(b,c),f=e?e.children:a.data(b,"tree").data,g=0;g<f.length;g++)if(f[g].domId==d){f.splice(g,1);break}return e}var e=d(c);if(a(c).parent().remove(),e){if(!e.children||!e.children.length){var f=a(e.target);f.find(".tree-icon").removeClass("tree-folder").addClass("tree-file"),f.find(".tree-hit").remove(),a('<span class="tree-indent"></span>').prependTo(f),f.next().remove()}u(b,e),g(b,e.target)}i(b,b)}function u(b,c){var d=a.data(b,"tree").options,e=a(c.target),g=C(b,c.target),h=g.checked;g.iconCls&&e.find(".tree-icon").removeClass(g.iconCls),a.extend(g,c),e.find(".tree-title").html(d.formatter.call(b,g)),g.iconCls&&e.find(".tree-icon").addClass(g.iconCls),h!=g.checked&&f(b,c.target,g.checked)}function v(a){var b=w(a);return b.length?b[0]:null}function w(b){for(var c=a.data(b,"tree").data,d=0;d<c.length;d++)F(c[d]);return c}function x(b,c){var d=[],e=C(b,c),f=e?e.children:a.data(b,"tree").data;return G(f,function(a){d.push(F(a))}),d}function y(b,c){var d=a(c).closest("ul").prevAll("div.tree-node:first");return C(b,d[0])}function z(b,c){c=c||"checked",a.isArray(c)||(c=[c]);for(var d=[],e=0;e<c.length;e++){var f=c[e];"checked"==f?d.push("span.tree-checkbox1"):"unchecked"==f?d.push("span.tree-checkbox0"):"indeterminate"==f&&d.push("span.tree-checkbox2")}var g=[];return a(b).find(d.join(",")).each(function(){var c=a(this).parent();g.push(C(b,c[0]))}),g}function A(b){var c=a(b).find("div.tree-node-selected");return c.length?C(b,c[0]):null}function B(a,b){var c=C(a,b);return c&&c.children&&G(c.children,function(a){F(a)}),c}function C(b,c){return E(b,"domId",a(c).attr("id"))}function D(a,b){return E(a,"id",b)}function E(b,c,d){var e=a.data(b,"tree").data,f=null;return G(e,function(a){return a[c]==d?(f=F(a),!1):void 0}),f}function F(b){var c=a("#"+b.domId);return b.target=c[0],b.checked=c.find(".tree-checkbox").hasClass("tree-checkbox1"),b}function G(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d]);for(;c.length;){var e=c.shift();if(0==b(e))return;if(e.children)for(var d=e.children.length-1;d>=0;d--)c.unshift(e.children[d])}}function H(b,c){var d=a.data(b,"tree").options,e=C(b,c);0!=d.onBeforeSelect.call(b,e)&&(a(b).find("div.tree-node-selected").removeClass("tree-node-selected"),a(c).addClass("tree-node-selected"),d.onSelect.call(b,e))}function I(b,c){return 0==a(c).children("span.tree-hit").length}function J(b,c){var d=a.data(b,"tree").options,e=C(b,c);if(0!=d.onBeforeEdit.call(b,e)){a(c).css("position","relative");var f=a(c).find(".tree-title"),g=f.outerWidth();f.empty();var h=a('<input class="tree-editor">').appendTo(f);h.val(e.text).focus(),h.width(g+20),h.height("CSS1Compat"==document.compatMode?18-(h.outerHeight()-h.height()):18),h.bind("click",function(){return!1}).bind("mousedown",function(a){a.stopPropagation()}).bind("mousemove",function(a){a.stopPropagation()}).bind("keydown",function(a){return 13==a.keyCode?(K(b,c),!1):27==a.keyCode?(L(b,c),!1):void 0}).bind("blur",function(a){a.stopPropagation(),K(b,c)})}}function K(b,c){var d=a.data(b,"tree").options;a(c).css("position","");var e=a(c).find("input.tree-editor"),f=e.val();e.remove();var g=C(b,c);g.text=f,u(b,g),d.onAfterEdit.call(b,g)}function L(b,c){var d=a.data(b,"tree").options;a(c).css("position",""),a(c).find("input.tree-editor").remove();var e=C(b,c);u(b,e),d.onCancelEdit.call(b,e)}a.fn.tree=function(d,e){if("string"==typeof d)return a.fn.tree.methods[d](this,e);var d=d||{};return this.each(function(){var e,f=a.data(this,"tree");if(f)e=a.extend(f.options,d),f.options=e;else{e=a.extend({},a.fn.tree.defaults,a.fn.tree.parseOptions(this),d),a.data(this,"tree",{options:e,tree:b(this),data:[]});var g=a.fn.tree.parseData(this);g.length&&h(this,this,g)}c(this),e.data&&h(this,this,e.data),j(this,this)})},a.fn.tree.methods={options:function(b){return a.data(b[0],"tree").options},loadData:function(a,b){return a.each(function(){h(this,this,b)})},getNode:function(a,b){return C(a[0],b)},getData:function(a,b){return B(a[0],b)},reload:function(b,c){return b.each(function(){if(c){var b=a(c),d=b.children("span.tree-hit");d.removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),b.next().remove(),k(this,c)}else a(this).empty(),j(this,this)})},getRoot:function(a){return v(a[0])},getRoots:function(a){return w(a[0])},getParent:function(a,b){return y(a[0],b)},getChildren:function(a,b){return x(a[0],b)},getChecked:function(a,b){return z(a[0],b)},getSelected:function(a){return A(a[0])},isLeaf:function(a,b){return I(a[0],b)},find:function(a,b){return D(a[0],b)},select:function(a,b){return a.each(function(){H(this,b)})},check:function(a,b){return a.each(function(){f(this,b,!0)})},uncheck:function(a,b){return a.each(function(){f(this,b,!1)})},collapse:function(a,b){return a.each(function(){l(this,b)})},expand:function(a,b){return a.each(function(){k(this,b)})},collapseAll:function(a,b){return a.each(function(){q(this,b)})},expandAll:function(a,b){return a.each(function(){n(this,b)})},expandTo:function(a,b){return a.each(function(){o(this,b)})},scrollTo:function(a,b){return a.each(function(){p(this,b)})},toggle:function(a,b){return a.each(function(){m(this,b)})},append:function(a,b){return a.each(function(){r(this,b)})},insert:function(a,b){return a.each(function(){s(this,b)})},remove:function(a,b){return a.each(function(){t(this,b)})},pop:function(a,b){var c=a.tree("getData",b);return a.tree("remove",b),c},update:function(a,b){return a.each(function(){u(this,b)})},enableDnd:function(a){return a.each(function(){e(this)})},disableDnd:function(a){return a.each(function(){d(this)})},beginEdit:function(a,b){return a.each(function(){J(this,b)})},endEdit:function(a,b){return a.each(function(){K(this,b)})},cancelEdit:function(a,b){return a.each(function(){L(this,b)})}},a.fn.tree.parseOptions=function(b){a(b);return a.extend({},a.parser.parseOptions(b,["url","method",{checkbox:"boolean",cascadeCheck:"boolean",onlyLeafCheck:"boolean"},{animate:"boolean",lines:"boolean",dnd:"boolean"}]))},a.fn.tree.parseData=function(b){function c(b,d){d.children("li").each(function(){var d=a(this),e=a.extend({},a.parser.parseOptions(this,["id","iconCls","state"]),{checked:d.attr("checked")?!0:void 0});e.text=d.children("span").html(),e.text||(e.text=d.html());var f=d.children("ul");f.length&&(e.children=[],c(e.children,f)),b.push(e)})}var d=[];return c(d,a(b)),d};var M=1,N={render:function(b,c,d){function e(a,c){for(var d=[],g=0;g<c.length;g++){var h=c[g];"open"!=h.state&&"closed"!=h.state&&(h.state="open"),h.domId="_easyui_tree_"+M++,d.push("<li>"),d.push('<div id="'+h.domId+'" class="tree-node">');for(var i=0;a>i;i++)d.push('<span class="tree-indent"></span>');if("closed"==h.state?(d.push('<span class="tree-hit tree-collapsed"></span>'),d.push('<span class="tree-icon tree-folder '+(h.iconCls?h.iconCls:"")+'"></span>')):h.children&&h.children.length?(d.push('<span class="tree-hit tree-expanded"></span>'),d.push('<span class="tree-icon tree-folder tree-folder-open '+(h.iconCls?h.iconCls:"")+'"></span>')):(d.push('<span class="tree-indent"></span>'),d.push('<span class="tree-icon tree-file '+(h.iconCls?h.iconCls:"")+'"></span>')),f.checkbox&&(f.onlyLeafCheck&&(!f.onlyLeafCheck||h.children&&h.children.length)||d.push('<span class="tree-checkbox tree-checkbox0"></span>')),d.push('<span class="tree-title">'+f.formatter.call(b,h)+"</span>"),d.push("</div>"),h.children&&h.children.length){var j=e(a+1,h.children);d.push('<ul style="display:'+("closed"==h.state?"none":"block")+'">'),d=d.concat(j),d.push("</ul>")}d.push("</li>")}return d}var f=a.data(b,"tree").options,g=a(c).prev("div.tree-node").find("span.tree-indent, span.tree-hit").length,h=e(g,d);a(c).append(h.join(""))}};a.fn.tree.defaults={url:null,method:"post",animate:!1,checkbox:!1,cascadeCheck:!0,onlyLeafCheck:!1,lines:!1,dnd:!1,data:null,formatter:function(a){return a.text},loader:function(b,c,d){var e=a(this).tree("options");return e.url?void a.ajax({type:e.method,url:e.url,data:b,dataType:"json",success:function(a){c(a)},error:function(){d.apply(this,arguments)}}):!1},loadFilter:function(a){return a},view:N,onBeforeLoad:function(){},onLoadSuccess:function(){},onLoadError:function(){},onClick:function(){},onDblClick:function(){},onBeforeExpand:function(){},onExpand:function(){},onBeforeCollapse:function(){},onCollapse:function(){},onBeforeCheck:function(){},onCheck:function(){},onBeforeSelect:function(){},onSelect:function(){},onContextMenu:function(){},onBeforeDrag:function(){},onStartDrag:function(){},onStopDrag:function(){},onDragEnter:function(){},onDragOver:function(){},onDragLeave:function(){},onBeforeDrop:function(){},onDrop:function(){},onBeforeEdit:function(){},onAfterEdit:function(){},onCancelEdit:function(){}}}(jQuery),function(a){function b(b){var d=a.data(b,"combotree").options,e=a.data(b,"combotree").tree;a(b).addClass("combotree-f"),a(b).combo(d);var f=a(b).combo("panel");e||(e=a("<ul></ul>").appendTo(f),a.data(b,"combotree").tree=e),e.tree(a.extend({},d,{checkbox:d.multiple,onLoadSuccess:function(c,f){var g=a(b).combotree("getValues");if(d.multiple)for(var h=e.tree("getChecked"),i=0;i<h.length;i++){var j=h[i].id;!function(){for(var a=0;a<g.length;a++)if(j==g[a])return;g.push(j)}()}a(b).combotree("setValues",g),d.onLoadSuccess.call(this,c,f)},onClick:function(e){c(b),a(b).combo("hidePanel"),d.onClick.call(this,e)},onCheck:function(a,e){c(b),d.onCheck.call(this,a,e)}}))}function c(b){var c=a.data(b,"combotree").options,d=a.data(b,"combotree").tree,e=[],f=[];if(c.multiple)for(var g=d.tree("getChecked"),h=0;h<g.length;h++)e.push(g[h].id),f.push(g[h].text);else{var i=d.tree("getSelected");i&&(e.push(i.id),f.push(i.text))}a(b).combo("setValues",e).combo("setText",f.join(c.separator))}function d(b,c){var d=a.data(b,"combotree").options,e=a.data(b,"combotree").tree;e.find("span.tree-checkbox").addClass("tree-checkbox0").removeClass("tree-checkbox1 tree-checkbox2");for(var f=[],g=[],h=0;h<c.length;h++){var i=c[h],j=i,k=e.tree("find",i);k&&(j=k.text,e.tree("check",k.target),e.tree("select",k.target)),f.push(i),g.push(j)}a(b).combo("setValues",f).combo("setText",g.join(d.separator))}a.fn.combotree=function(c,d){if("string"==typeof c){var e=a.fn.combotree.methods[c];return e?e(this,d):this.combo(c,d)}return c=c||{},this.each(function(){var d=a.data(this,"combotree");d?a.extend(d.options,c):a.data(this,"combotree",{options:a.extend({},a.fn.combotree.defaults,a.fn.combotree.parseOptions(this),c)}),b(this)})},a.fn.combotree.methods={options:function(b){var c=b.combo("options");return a.extend(a.data(b[0],"combotree").options,{originalValue:c.originalValue,disabled:c.disabled,readonly:c.readonly})},tree:function(b){return a.data(b[0],"combotree").tree},loadData:function(b,c){return b.each(function(){var b=a.data(this,"combotree").options;b.data=c;var d=a.data(this,"combotree").tree;d.tree("loadData",c)})},reload:function(b,c){return b.each(function(){var b=a.data(this,"combotree").options,d=a.data(this,"combotree").tree;c&&(b.url=c),d.tree({url:b.url})})},setValues:function(a,b){return a.each(function(){d(this,b)})},setValue:function(a,b){return a.each(function(){d(this,[b])})},clear:function(b){return b.each(function(){var b=a.data(this,"combotree").tree;b.find("div.tree-node-selected").removeClass("tree-node-selected");for(var c=b.tree("getChecked"),d=0;d<c.length;d++)b.tree("uncheck",c[d].target);a(this).combo("clear")})},reset:function(b){return b.each(function(){var b=a(this).combotree("options");b.multiple?a(this).combotree("setValues",b.originalValue):a(this).combotree("setValue",b.originalValue)})}},a.fn.combotree.parseOptions=function(b){return a.extend({},a.fn.combo.parseOptions(b),a.fn.tree.parseOptions(b))},a.fn.combotree.defaults=a.extend({},a.fn.combo.defaults,a.fn.tree.defaults,{editable:!0})}(jQuery),function(a){function b(b){function c(c,d){f.remainText=!1,e(),g.multiple||a(b).combo("hidePanel"),g.onClickRow.call(this,c,d)}function e(){for(var c=h.datagrid("getSelections"),d=[],e=[],i=0;i<c.length;i++)d.push(c[i][g.idField]),e.push(c[i][g.textField]);g.multiple?a(b).combo("setValues",d):a(b).combo("setValues",d.length?d:[""]),f.remainText||a(b).combo("setText",e.join(g.separator))}var f=a.data(b,"combogrid"),g=f.options,h=f.grid;a(b).addClass("combogrid-f").combo(g);var i=a(b).combo("panel");h||(h=a("<table></table>").appendTo(i),f.grid=h),h.datagrid(a.extend({},g,{border:!1,fit:!0,singleSelect:!g.multiple,onLoadSuccess:function(){var c=a(b).combo("getValues"),e=g.onSelect;g.onSelect=function(){},d(b,c,f.remainText),g.onSelect=e,g.onLoadSuccess.apply(b,arguments)},onClickRow:c,onSelect:function(a,b){e(),g.onSelect.call(this,a,b)},onUnselect:function(a,b){e(),g.onUnselect.call(this,a,b)},onSelectAll:function(a){e(),g.onSelectAll.call(this,a)},onUnselectAll:function(a){g.multiple&&e(),g.onUnselectAll.call(this,a)}}))}function c(b,c){var d=a.data(b,"combogrid"),e=d.options,f=d.grid,g=f.datagrid("getRows").length;if(g){var h=e.finder.getTr(f[0],null,"highlight");h.length||(h=e.finder.getTr(f[0],null,"selected"));var i;if(h.length){var i=parseInt(h.attr("datagrid-row-index"));i+="next"==c?1:-1,0>i&&(i=g-1),i>=g&&(i=0)}else i="next"==c?0:g-1;f.datagrid("highlightRow",i),e.selectOnNavigation&&(d.remainText=!1,f.datagrid("selectRow",i))}}function d(b,c,d){var e=a.data(b,"combogrid"),f=e.options,g=e.grid,h=g.datagrid("getRows"),i=[],j=a(b).combo("getValues"),k=a(b).combo("options"),l=k.onChange;k.onChange=function(){},g.datagrid("clearSelections");for(var m=0;m<c.length;m++){var n=g.datagrid("getRowIndex",c[m]);n>=0?(g.datagrid("selectRow",n),i.push(h[n][f.textField])):i.push(c[m])}if(a(b).combo("setValues",j),k.onChange=l,a(b).combo("setValues",c),!d){var o=i.join(f.separator);a(b).combo("getText")!=o&&a(b).combo("setText",o)}}function e(b,c){var e=a.data(b,"combogrid"),f=e.options,g=e.grid;if(e.remainText=!0,f.multiple&&!c?d(b,[],!0):d(b,[c],!0),"remote"==f.mode)g.datagrid("clearSelections"),g.datagrid("load",a.extend({},f.queryParams,{q:c}));else{if(!c)return;for(var h=g.datagrid("getRows"),i=0;i<h.length;i++)if(f.filter.call(b,c,h[i]))return g.datagrid("clearSelections"),void g.datagrid("selectRow",i)}}function f(b){var c=a.data(b,"combogrid"),d=c.options,e=c.grid,f=d.finder.getTr(e[0],null,"highlight");if(f.length||(f=d.finder.getTr(e[0],null,"selected")),f.length){c.remainText=!1;var g=parseInt(f.attr("datagrid-row-index"));d.multiple?f.hasClass("datagrid-row-selected")?e.datagrid("unselectRow",g):e.datagrid("selectRow",g):(e.datagrid("selectRow",g),a(b).combogrid("hidePanel"))}}a.fn.combogrid=function(c,d){if("string"==typeof c){var e=a.fn.combogrid.methods[c];return e?e(this,d):a.fn.combo.methods[c](this,d)}return c=c||{},this.each(function(){var d=a.data(this,"combogrid");d?a.extend(d.options,c):d=a.data(this,"combogrid",{options:a.extend({},a.fn.combogrid.defaults,a.fn.combogrid.parseOptions(this),c)}),b(this)})},a.fn.combogrid.methods={options:function(b){var c=b.combo("options");return a.extend(a.data(b[0],"combogrid").options,{originalValue:c.originalValue,disabled:c.disabled,readonly:c.readonly})},grid:function(b){return a.data(b[0],"combogrid").grid},setValues:function(a,b){return a.each(function(){d(this,b)})},setValue:function(a,b){return a.each(function(){d(this,[b])})},clear:function(b){return b.each(function(){a(this).combogrid("grid").datagrid("clearSelections"),a(this).combo("clear")})},reset:function(b){return b.each(function(){var b=a(this).combogrid("options");b.multiple?a(this).combogrid("setValues",b.originalValue):a(this).combogrid("setValue",b.originalValue)})}},a.fn.combogrid.parseOptions=function(b){a(b);return a.extend({},a.fn.combo.parseOptions(b),a.fn.datagrid.parseOptions(b),a.parser.parseOptions(b,["idField","textField","mode"]))},a.fn.combogrid.defaults=a.extend({},a.fn.combo.defaults,a.fn.datagrid.defaults,{panelHeight:350,loadMsg:null,idField:null,textField:null,mode:"local",keyHandler:{up:function(a){c(this,"prev"),a.preventDefault()},down:function(a){c(this,"next"),a.preventDefault()},left:function(){},right:function(){},enter:function(){f(this)},query:function(a){e(this,a)}},filter:function(b,c){var d=a(this).combogrid("options");return 0==c[d.textField].indexOf(b)}})}(jQuery),function(a){function b(b){a(b).addClass("numberbox-f");var c=a('<input type="hidden">').insertAfter(b),d=a(b).attr("name");return d&&(c.attr("name",d),a(b).removeAttr("name").attr("numberboxName",d)),c}function c(b){var c=a.data(b,"numberbox").options,f=c.onChange;c.onChange=function(){},e(b,c.parser.call(b,c.value)),c.onChange=f,c.originalValue=d(b)}function d(b){return a.data(b,"numberbox").field.val()}function e(b,c){var e=a.data(b,"numberbox"),f=e.options,g=d(b);c=f.parser.call(b,c),f.value=c,e.field.val(c),a(b).val(f.formatter.call(b,c)),g!=c&&f.onChange.call(b,c,g)}function f(b){var c=a.data(b,"numberbox").options;a(b).unbind(".numberbox").bind("keypress.numberbox",function(a){return c.filter.call(b,a)}).bind("blur.numberbox",function(){e(b,a(this).val()),a(this).val(c.formatter.call(b,d(b)))}).bind("focus.numberbox",function(){var e=d(b);e!=c.parser.call(b,a(this).val())&&a(this).val(c.formatter.call(b,e))})}function g(b){if(a.fn.validatebox){var c=a.data(b,"numberbox").options;a(b).validatebox(c)}}function h(b,c){var d=a.data(b,"numberbox").options;c?(d.disabled=!0,a(b).attr("disabled",!0)):(d.disabled=!1,a(b).removeAttr("disabled"))}a.fn.numberbox=function(d,e){if("string"==typeof d){var i=a.fn.numberbox.methods[d];return i?i(this,e):this.validatebox(d,e)}return d=d||{},this.each(function(){var e=a.data(this,"numberbox");e?a.extend(e.options,d):(e=a.data(this,"numberbox",{options:a.extend({},a.fn.numberbox.defaults,a.fn.numberbox.parseOptions(this),d),field:b(this)}),a(this).removeAttr("disabled"),a(this).css({imeMode:"disabled"})),h(this,e.options.disabled),f(this),g(this),c(this)})},a.fn.numberbox.methods={options:function(b){return a.data(b[0],"numberbox").options},destroy:function(b){return b.each(function(){a.data(this,"numberbox").field.remove(),a(this).validatebox("destroy"),a(this).remove()})},disable:function(a){return a.each(function(){h(this,!0)})},enable:function(a){return a.each(function(){h(this,!1)})},fix:function(b){return b.each(function(){e(this,a(this).val())})},setValue:function(a,b){return a.each(function(){e(this,b)})},getValue:function(a){return d(a[0])},clear:function(b){return b.each(function(){var b=a.data(this,"numberbox");b.field.val(""),a(this).val("")})},reset:function(b){return b.each(function(){var b=a(this).numberbox("options");a(this).numberbox("setValue",b.originalValue)})}},a.fn.numberbox.parseOptions=function(b){var c=a(b);return a.extend({},a.fn.validatebox.parseOptions(b),a.parser.parseOptions(b,["decimalSeparator","groupSeparator","suffix",{min:"number",max:"number",precision:"number"}]),{prefix:c.attr("prefix")?c.attr("prefix"):void 0,disabled:c.attr("disabled")?!0:void 0,value:c.val()||void 0})},a.fn.numberbox.defaults=a.extend({},a.fn.validatebox.defaults,{disabled:!1,value:"",min:null,max:null,precision:0,decimalSeparator:".",groupSeparator:"",prefix:"",suffix:"",filter:function(b){var c=a(this).numberbox("options");if(45==b.which)return-1==a(this).val().indexOf("-")?!0:!1;var d=String.fromCharCode(b.which);return d==c.decimalSeparator?-1==a(this).val().indexOf(d)?!0:!1:d==c.groupSeparator?!0:b.which>=48&&b.which<=57&&0==b.ctrlKey&&0==b.shiftKey||0==b.which||8==b.which?!0:1!=b.ctrlKey||99!=b.which&&118!=b.which?!1:!0},formatter:function(b){if(!b)return b;b+="";var c=a(this).numberbox("options"),d=b,e="",f=b.indexOf(".");if(f>=0&&(d=b.substring(0,f),e=b.substring(f+1,b.length)),c.groupSeparator)for(var g=/(\d+)(\d{3})/;g.test(d);)d=d.replace(g,"$1"+c.groupSeparator+"$2");return e?c.prefix+d+c.decimalSeparator+e+c.suffix:c.prefix+d+c.suffix},parser:function(b){b+="";var c=a(this).numberbox("options");parseFloat(b)!=b&&(c.prefix&&(b=a.trim(b.replace(new RegExp("\\"+a.trim(c.prefix),"g"),""))),c.suffix&&(b=a.trim(b.replace(new RegExp("\\"+a.trim(c.suffix),"g"),""))),c.groupSeparator&&(b=a.trim(b.replace(new RegExp("\\"+c.groupSeparator,"g"),""))),c.decimalSeparator&&(b=a.trim(b.replace(new RegExp("\\"+c.decimalSeparator,"g"),"."))),b=b.replace(/\s/g,""));var d=parseFloat(b).toFixed(c.precision);return isNaN(d)?d="":"number"==typeof c.min&&d<c.min?d=c.min.toFixed(c.precision):"number"==typeof c.max&&d>c.max&&(d=c.max.toFixed(c.precision)),d},onChange:function(){}})}(jQuery),function(a){function b(b){var d=a.data(b,"timespinner").options;a(b).addClass("timespinner-f"),a(b).spinner(d),a(b).unbind(".timespinner"),a(b).bind("click.timespinner",function(){var a=0;if(null!=this.selectionStart)a=this.selectionStart;else if(this.createTextRange){var e=b.createTextRange(),f=document.selection.createRange();f.setEndPoint("StartToStart",e),a=f.text.length}a>=0&&2>=a?d.highlight=0:a>=3&&5>=a?d.highlight=1:a>=6&&8>=a&&(d.highlight=2),c(b)}).bind("blur.timespinner",function(){e(b)})}function c(b){var c=a.data(b,"timespinner").options,d=0,e=0;if(0==c.highlight?(d=0,e=2):1==c.highlight?(d=3,e=5):2==c.highlight&&(d=6,e=8),null!=b.selectionStart)b.setSelectionRange(d,e);else if(b.createTextRange){var f=b.createTextRange();f.collapse(),f.moveEnd("character",e),f.moveStart("character",d),f.select()}a(b).focus()}function d(b,c){var d=a.data(b,"timespinner").options;if(!c)return null;for(var e=c.split(d.separator),f=0;f<e.length;f++)if(isNaN(e[f]))return null;for(;e.length<3;)e.push(0);return new Date(1900,0,0,e[0],e[1],e[2])}function e(b){function c(a){return(10>a?"0":"")+a}var e=a.data(b,"timespinner").options,f=a(b).val(),g=d(b,f);if(!g)return e.value="",void a(b).val("");var h=d(b,e.min),i=d(b,e.max);h&&h>g&&(g=h),i&&g>i&&(g=i);var j=[c(g.getHours()),c(g.getMinutes())];e.showSeconds&&j.push(c(g.getSeconds()));var k=j.join(e.separator);e.value=k,a(b).val(k)}function f(b,d){var f=a.data(b,"timespinner").options,g=a(b).val();""==g&&(g=[0,0,0].join(f.separator));for(var h=g.split(f.separator),i=0;i<h.length;i++)h[i]=parseInt(h[i],10);1==d?h[f.highlight]-=f.increment:h[f.highlight]+=f.increment,a(b).val(h.join(f.separator)),e(b),c(b)}a.fn.timespinner=function(c,d){if("string"==typeof c){var e=a.fn.timespinner.methods[c];return e?e(this,d):this.spinner(c,d)}return c=c||{},this.each(function(){var d=a.data(this,"timespinner");d?a.extend(d.options,c):(a.data(this,"timespinner",{options:a.extend({},a.fn.timespinner.defaults,a.fn.timespinner.parseOptions(this),c)}),b(this))})},a.fn.timespinner.methods={options:function(b){var c=a.data(b[0],"timespinner").options;return a.extend(c,{value:b.val(),originalValue:b.spinner("options").originalValue})
},setValue:function(b,c){return b.each(function(){a(this).val(c),e(this)})},getHours:function(b){var c=a.data(b[0],"timespinner").options,d=b.val().split(c.separator);return parseInt(d[0],10)},getMinutes:function(b){var c=a.data(b[0],"timespinner").options,d=b.val().split(c.separator);return parseInt(d[1],10)},getSeconds:function(b){var c=a.data(b[0],"timespinner").options,d=b.val().split(c.separator);return parseInt(d[2],10)||0}},a.fn.timespinner.parseOptions=function(b){return a.extend({},a.fn.spinner.parseOptions(b),a.parser.parseOptions(b,["separator",{showSeconds:"boolean",highlight:"number"}]))},a.fn.timespinner.defaults=a.extend({},a.fn.spinner.defaults,{separator:":",showSeconds:!1,highlight:0,spin:function(a){f(this,a)}})}(jQuery),function($){function _1(a){var b=$('<div class="slider"><div class="slider-inner"><a href="javascript:void(0)" class="slider-handle"></a><span class="slider-tip"></span></div><div class="slider-rule"></div><div class="slider-rulelabel"></div><div style="clear:both"></div><input type="hidden" class="slider-value"></div>').insertAfter(a),c=$(a);c.addClass("slider-f").hide();var d=c.attr("name");return d&&(b.find("input.slider-value").attr("name",d),c.removeAttr("name").attr("sliderName",d)),b}function _5(a,b){var c=$.data(a,"slider"),d=c.options,e=c.slider;b&&(b.width&&(d.width=b.width),b.height&&(d.height=b.height)),"h"==d.mode?(e.css("height",""),e.children("div").css("height",""),isNaN(d.width)||e.width(d.width)):(e.css("width",""),e.children("div").css("width",""),isNaN(d.height)||(e.height(d.height),e.find("div.slider-rule").height(d.height),e.find("div.slider-rulelabel").height(d.height),e.find("div.slider-inner")._outerHeight(d.height))),_b(a)}function _c(a){function b(a){var b=e.find("div.slider-rule"),c=e.find("div.slider-rulelabel");b.empty(),c.empty();for(var f=0;f<a.length;f++){var g=100*f/(a.length-1)+"%",h=$("<span></span>").appendTo(b);h.css("h"==d.mode?"left":"top",g),"|"!=a[f]&&(h=$("<span></span>").appendTo(c),h.html(a[f]),h.css("h"==d.mode?{left:g,marginLeft:-Math.round(h.outerWidth()/2)}:{top:g,marginTop:-Math.round(h.outerHeight()/2)}))}}var c=$.data(a,"slider"),d=c.options,e=c.slider,f="h"==d.mode?d.rule:d.rule.slice(0).reverse();d.reversed&&(f=f.slice(0).reverse()),b(f)}function _16(a){function b(b){var c=Math.abs(b%d.step);c<d.step/2?b-=c:b=b-c+d.step,_22(a,b)}var c=$.data(a,"slider"),d=c.options,e=c.slider;e.removeClass("slider-h slider-v slider-disabled"),e.addClass("h"==d.mode?"slider-h":"slider-v"),e.addClass(d.disabled?"slider-disabled":""),e.find("a.slider-handle").draggable({axis:d.mode,cursor:"pointer",disabled:d.disabled,onDrag:function(c){var f=c.data.left,g=e.width();if("h"!=d.mode&&(f=c.data.top,g=e.height()),0>f||f>g)return!1;var h=_32(a,f);return b(h),!1},onBeforeDrag:function(){c.isDragging=!0},onStartDrag:function(){d.onSlideStart.call(a,d.value)},onStopDrag:function(e){var f=_32(a,"h"==d.mode?e.data.left:e.data.top);b(f),d.onSlideEnd.call(a,d.value),d.onComplete.call(a,d.value),c.isDragging=!1}}),e.find("div.slider-inner").unbind(".slider").bind("mousedown.slider",function(e){if(!c.isDragging){var f=$(this).offset(),g=_32(a,"h"==d.mode?e.pageX-f.left:e.pageY-f.top);b(g),d.onComplete.call(a,d.value)}})}function _22(a,b){var c=$.data(a,"slider"),d=c.options,e=c.slider,f=d.value;b<d.min&&(b=d.min),b>d.max&&(b=d.max),d.value=b,$(a).val(b),e.find("input.slider-value").val(b);var g=_29(a,b),h=e.find(".slider-tip");if(d.showTip?(h.show(),h.html(d.tipFormatter.call(a,d.value))):h.hide(),"h"==d.mode){var i="left:"+g+"px;";e.find(".slider-handle").attr("style",i),h.attr("style",i+"margin-left:"+-Math.round(h.outerWidth()/2)+"px")}else{var i="top:"+g+"px;";e.find(".slider-handle").attr("style",i),h.attr("style",i+"margin-left:"+-Math.round(h.outerWidth())+"px")}f!=b&&d.onChange.call(a,b,f)}function _b(a){var b=$.data(a,"slider").options,c=b.onChange;b.onChange=function(){},_22(a,b.value),b.onChange=c}function _29(a,b){var c=$.data(a,"slider"),d=c.options,e=c.slider;if("h"==d.mode){var f=(b-d.min)/(d.max-d.min)*e.width();d.reversed&&(f=e.width()-f)}else{var f=e.height()-(b-d.min)/(d.max-d.min)*e.height();d.reversed&&(f=e.height()-f)}return f.toFixed(0)}function _32(a,b){var c=$.data(a,"slider"),d=c.options,e=c.slider;if("h"==d.mode)var f=d.min+(d.max-d.min)*(b/e.width());else var f=d.min+(d.max-d.min)*((e.height()-b)/e.height());return d.reversed?d.max-f.toFixed(0):f.toFixed(0)}$.fn.slider=function(a,b){return"string"==typeof a?$.fn.slider.methods[a](this,b):(a=a||{},this.each(function(){var b=$.data(this,"slider");b?$.extend(b.options,a):(b=$.data(this,"slider",{options:$.extend({},$.fn.slider.defaults,$.fn.slider.parseOptions(this),a),slider:_1(this)}),$(this).removeAttr("disabled"));var c=b.options;c.min=parseFloat(c.min),c.max=parseFloat(c.max),c.value=parseFloat(c.value),c.step=parseFloat(c.step),c.originalValue=c.value,_16(this),_c(this),_5(this)}))},$.fn.slider.methods={options:function(a){return $.data(a[0],"slider").options},destroy:function(a){return a.each(function(){$.data(this,"slider").slider.remove(),$(this).remove()})},resize:function(a,b){return a.each(function(){_5(this,b)})},getValue:function(a){return a.slider("options").value},setValue:function(a,b){return a.each(function(){_22(this,b)})},clear:function(a){return a.each(function(){var a=$(this).slider("options");_22(this,a.min)})},reset:function(a){return a.each(function(){var a=$(this).slider("options");_22(this,a.originalValue)})},enable:function(a){return a.each(function(){$.data(this,"slider").options.disabled=!1,_16(this)})},disable:function(a){return a.each(function(){$.data(this,"slider").options.disabled=!0,_16(this)})}},$.fn.slider.parseOptions=function(_40){var t=$(_40);return $.extend({},$.parser.parseOptions(_40,["width","height","mode",{reversed:"boolean",showTip:"boolean",min:"number",max:"number",step:"number"}]),{value:t.val()||void 0,disabled:t.attr("disabled")?!0:void 0,rule:t.attr("rule")?eval(t.attr("rule")):void 0})},$.fn.slider.defaults={width:"auto",height:"auto",mode:"h",reversed:!1,showTip:!1,disabled:!1,value:0,min:0,max:100,step:1,rule:[],tipFormatter:function(a){return a},onChange:function(){},onSlideStart:function(){},onSlideEnd:function(){},onComplete:function(){}}}(jQuery),function(a){function b(b){var e=(a.data(b,"propertygrid"),a.data(b,"propertygrid").options);a(b).datagrid(a.extend({},e,{cls:"propertygrid",view:e.showGroup?e.groupView:e.view,onClickRow:function(f,g){if(d!=this&&(c(d),d=this),e.editIndex!=f&&g.editor){var h=a(this).datagrid("getColumnOption","value");h.editor=g.editor,c(d),a(this).datagrid("beginEdit",f),a(this).datagrid("getEditors",f)[0].target.focus(),e.editIndex=f}e.onClickRow.call(b,f,g)},loadFilter:function(a){return c(this),e.loadFilter.call(this,a)}})),a(document).unbind(".propertygrid").bind("mousedown.propertygrid",function(b){var e=a(b.target).closest("div.datagrid-view,div.combo-panel");e.length||(c(d),d=void 0)})}function c(b){var c=a(b);if(c.length){var d=a.data(b,"propertygrid").options,e=d.editIndex;if(void 0!=e){var f=c.datagrid("getEditors",e)[0];f&&(f.target.blur(),c.datagrid("validateRow",e)?c.datagrid("endEdit",e):c.datagrid("cancelEdit",e)),d.editIndex=void 0}}}var d;a.fn.propertygrid=function(c,d){if("string"==typeof c){var e=a.fn.propertygrid.methods[c];return e?e(this,d):this.datagrid(c,d)}return c=c||{},this.each(function(){var d=a.data(this,"propertygrid");if(d)a.extend(d.options,c);else{var e=a.extend({},a.fn.propertygrid.defaults,a.fn.propertygrid.parseOptions(this),c);e.frozenColumns=a.extend(!0,[],e.frozenColumns),e.columns=a.extend(!0,[],e.columns),a.data(this,"propertygrid",{options:e})}b(this)})},a.fn.propertygrid.methods={options:function(b){return a.data(b[0],"propertygrid").options}},a.fn.propertygrid.parseOptions=function(b){return a.extend({},a.fn.datagrid.parseOptions(b),a.parser.parseOptions(b,[{showGroup:"boolean"}]))};var e=a.extend({},a.fn.datagrid.defaults.view,{render:function(b,c,d){for(var e=[],f=this.groups,g=0;g<f.length;g++)e.push(this.renderGroup.call(this,b,g,f[g],d));a(c).html(e.join(""))},renderGroup:function(b,c,d,e){var f=a.data(b,"datagrid"),g=f.options,h=a(b).datagrid("getColumnFields",e),i=[];i.push('<div class="datagrid-group" group-index='+c+">"),i.push('<table cellspacing="0" cellpadding="0" border="0" style="height:100%"><tbody>'),i.push("<tr>"),(e&&(g.rownumbers||g.frozenColumns.length)||!e&&!g.rownumbers&&!g.frozenColumns.length)&&i.push('<td style="border:0;text-align:center;width:25px"><span class="datagrid-row-expander datagrid-row-collapse" style="display:inline-block;width:16px;height:16px;cursor:pointer">&nbsp;</span></td>'),i.push('<td style="border:0;">'),e||(i.push('<span class="datagrid-group-title">'),i.push(g.groupFormatter.call(b,d.value,d.rows)),i.push("</span>")),i.push("</td>"),i.push("</tr>"),i.push("</tbody></table>"),i.push("</div>"),i.push('<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>');for(var j=d.startIndex,k=0;k<d.rows.length;k++){var l=g.rowStyler?g.rowStyler.call(b,j,d.rows[k]):"",m="",n="";"string"==typeof l?n=l:l&&(m=l["class"]||"",n=l.style||"");var o='class="datagrid-row '+(j%2&&g.striped?"datagrid-row-alt ":" ")+m+'"',p=n?'style="'+n+'"':"",q=f.rowIdPrefix+"-"+(e?1:2)+"-"+j;i.push('<tr id="'+q+'" datagrid-row-index="'+j+'" '+o+" "+p+">"),i.push(this.renderRow.call(this,b,h,e,j,d.rows[k])),i.push("</tr>"),j++}return i.push("</tbody></table>"),i.join("")},bindEvents:function(b){var c=a.data(b,"datagrid"),d=c.dc,e=d.body1.add(d.body2),f=(a.data(e[0],"events")||a._data(e[0],"events")).click[0].handler;e.unbind("click").bind("click",function(c){var d=a(c.target),e=d.closest("span.datagrid-row-expander");if(e.length){var g=e.closest("div.datagrid-group").attr("group-index");e.hasClass("datagrid-row-collapse")?a(b).datagrid("collapseGroup",g):a(b).datagrid("expandGroup",g)}else f(c);c.stopPropagation()})},onBeforeRender:function(b,c){function d(a){for(var b=0;b<h.length;b++){var c=h[b];if(c.value==a)return c}return null}function e(){a("#datagrid-group-style").length||a("head").append('<style id="datagrid-group-style">.datagrid-group{height:25px;overflow:hidden;font-weight:bold;border-bottom:1px solid #ccc;}</style>')}var f=a.data(b,"datagrid"),g=f.options;e();for(var h=[],i=0;i<c.length;i++){var j=c[i],k=d(j[g.groupField]);k?k.rows.push(j):(k={value:j[g.groupField],rows:[j]},h.push(k))}for(var l=0,m=[],i=0;i<h.length;i++){var k=h[i];k.startIndex=l,l+=k.rows.length,m=m.concat(k.rows)}f.data.rows=m,this.groups=h;var n=this;setTimeout(function(){n.bindEvents(b)},0)}});a.extend(a.fn.datagrid.methods,{expandGroup:function(b,c){return b.each(function(){var b=a.data(this,"datagrid").dc.view,d=b.find(void 0!=c?'div.datagrid-group[group-index="'+c+'"]':"div.datagrid-group"),e=d.find("span.datagrid-row-expander");e.hasClass("datagrid-row-expand")&&(e.removeClass("datagrid-row-expand").addClass("datagrid-row-collapse"),d.next("table").show()),a(this).datagrid("fixRowHeight")})},collapseGroup:function(b,c){return b.each(function(){var b=a.data(this,"datagrid").dc.view,d=b.find(void 0!=c?'div.datagrid-group[group-index="'+c+'"]':"div.datagrid-group"),e=d.find("span.datagrid-row-expander");e.hasClass("datagrid-row-collapse")&&(e.removeClass("datagrid-row-collapse").addClass("datagrid-row-expand"),d.next("table").hide()),a(this).datagrid("fixRowHeight")})}}),a.fn.propertygrid.defaults=a.extend({},a.fn.datagrid.defaults,{singleSelect:!0,remoteSort:!1,fitColumns:!0,loadMsg:"",frozenColumns:[[{field:"f",width:16,resizable:!1}]],columns:[[{field:"name",title:"Name",width:100,sortable:!0},{field:"value",title:"Value",width:100,resizable:!1}]],showGroup:!1,groupView:e,groupField:"group",groupFormatter:function(a){return a}})}(jQuery),function(a){function b(b){var d=a.data(b,"treegrid"),e=d.options;if(a(b).datagrid(a.extend({},e,{url:null,data:null,loader:function(){return!1},onBeforeLoad:function(){return!1},onLoadSuccess:function(){},onResizeColumn:function(a,d){c(b),e.onResizeColumn.call(b,a,d)},onSortColumn:function(c,d){if(e.sortName=c,e.sortOrder=d,e.remoteSort)h(b);else{var f=a(b).treegrid("getData");g(b,0,f)}e.onSortColumn.call(b,c,d)},onBeforeEdit:function(a,c){return 0==e.onBeforeEdit.call(b,c)?!1:void 0},onAfterEdit:function(a,c,d){e.onAfterEdit.call(b,c,d)},onCancelEdit:function(a,c){e.onCancelEdit.call(b,c)},onSelect:function(a){e.onSelect.call(b,p(b,a))},onUnselect:function(a){e.onUnselect.call(b,p(b,a))},onSelectAll:function(){e.onSelectAll.call(b,a.data(b,"treegrid").data)},onUnselectAll:function(){e.onUnselectAll.call(b,a.data(b,"treegrid").data)},onCheck:function(a){e.onCheck.call(b,p(b,a))},onUncheck:function(a){e.onUncheck.call(b,p(b,a))},onCheckAll:function(){e.onCheckAll.call(b,a.data(b,"treegrid").data)},onUncheckAll:function(){e.onUncheckAll.call(b,a.data(b,"treegrid").data)},onClickRow:function(a){e.onClickRow.call(b,p(b,a))},onDblClickRow:function(a){e.onDblClickRow.call(b,p(b,a))},onClickCell:function(a,c){e.onClickCell.call(b,c,p(b,a))},onDblClickCell:function(a,c){e.onDblClickCell.call(b,c,p(b,a))},onRowContextMenu:function(a,c){e.onContextMenu.call(b,a,p(b,c))}})),!e.columns){var f=a.data(b,"datagrid").options;e.columns=f.columns,e.frozenColumns=f.frozenColumns}if(d.dc=a.data(b,"datagrid").dc,e.pagination){var i=a(b).datagrid("getPager");i.pagination({pageNumber:e.pageNumber,pageSize:e.pageSize,pageList:e.pageList,onSelectPage:function(a,c){e.pageNumber=a,e.pageSize=c,h(b)}}),e.pageSize=i.pagination("options").pageSize}}function c(b,c){function d(a){var c=e.finder.getTr(b,a,"body",1),d=e.finder.getTr(b,a,"body",2);c.css("height",""),d.css("height","");var f=Math.max(c.height(),d.height());c.css("height",f),d.css("height",f)}var e=a.data(b,"datagrid").options,f=a.data(b,"datagrid").dc;if(!f.body1.is(":empty")&&(!e.nowrap||e.autoRowHeight)&&void 0!=c)for(var g=l(b,c),h=0;h<g.length;h++)d(g[h][e.idField]);a(b).datagrid("fixRowHeight",c)}function d(b){var c=a.data(b,"datagrid").dc,d=a.data(b,"treegrid").options;d.rownumbers&&c.body1.find("div.datagrid-cell-rownumber").each(function(b){a(this).html(b+1)})}function e(b){var c=a.data(b,"datagrid").dc,d=c.body1.add(c.body2),e=(a.data(d[0],"events")||a._data(d[0],"events")).click[0].handler;c.body1.add(c.body2).bind("mouseover",function(b){var c=a(b.target),d=c.closest("tr.datagrid-row");d.length&&(c.hasClass("tree-hit")&&c.addClass(c.hasClass("tree-expanded")?"tree-expanded-hover":"tree-collapsed-hover"),b.stopPropagation())}).bind("mouseout",function(b){var c=a(b.target),d=c.closest("tr.datagrid-row");d.length&&(c.hasClass("tree-hit")&&c.removeClass(c.hasClass("tree-expanded")?"tree-expanded-hover":"tree-collapsed-hover"),b.stopPropagation())}).unbind("click").bind("click",function(c){var d=a(c.target),f=d.closest("tr.datagrid-row");f.length&&(d.hasClass("tree-hit")?s(b,f.attr("node-id")):e(c),c.stopPropagation())})}function f(b,c){function d(b,c){a('<tr class="treegrid-tr-tree"><td style="border:0px" colspan="'+c+'"><div></div></td></tr>').insertAfter(b)}var e=a.data(b,"treegrid").options,f=e.finder.getTr(b,c,"body",1),g=e.finder.getTr(b,c,"body",2),h=a(b).datagrid("getColumnFields",!0).length+(e.rownumbers?1:0),i=a(b).datagrid("getColumnFields",!1).length;d(f,h),d(g,i)}function g(b,e,f,g){var h=a.data(b,"treegrid"),i=h.options,j=h.dc;f=i.loadFilter.call(b,f,e);var k=p(b,e);if(k){var l=i.finder.getTr(b,e,"body",1),m=i.finder.getTr(b,e,"body",2),n=l.next("tr.treegrid-tr-tree").children("td").children("div"),o=m.next("tr.treegrid-tr-tree").children("td").children("div");g||(k.children=[])}else{var n=j.body1,o=j.body2;g||(h.data=[])}if(g||(n.empty(),o.empty()),i.view.onBeforeRender&&i.view.onBeforeRender.call(i.view,b,e,f),i.view.render.call(i.view,b,n,!0),i.view.render.call(i.view,b,o,!1),i.showFooter&&(i.view.renderFooter.call(i.view,b,j.footer1,!0),i.view.renderFooter.call(i.view,b,j.footer2,!1)),i.view.onAfterRender&&i.view.onAfterRender.call(i.view,b),i.onLoadSuccess.call(b,k,f),!e&&i.pagination){var q=a.data(b,"treegrid").total,r=a(b).datagrid("getPager");r.pagination("options").total!=q&&r.pagination({total:q})}c(b),d(b),a(b).treegrid("autoSizeColumn")}function h(b,c,d,e,f){var h=a.data(b,"treegrid").options,i=a(b).datagrid("getPanel").find("div.datagrid-body");d&&(h.queryParams=d);var j=a.extend({},h.queryParams);h.pagination&&a.extend(j,{page:h.pageNumber,rows:h.pageSize}),h.sortName&&a.extend(j,{sort:h.sortName,order:h.sortOrder});var k=p(b,c);if(0!=h.onBeforeLoad.call(b,k,j)){var l=i.find('tr[node-id="'+c+'"] span.tree-folder');l.addClass("tree-loading"),a(b).treegrid("loading");var m=h.loader.call(b,j,function(d){l.removeClass("tree-loading"),a(b).treegrid("loaded"),g(b,c,d,e),f&&f()},function(){l.removeClass("tree-loading"),a(b).treegrid("loaded"),h.onLoadError.apply(b,arguments),f&&f()});0==m&&(l.removeClass("tree-loading"),a(b).treegrid("loaded"))}}function i(a){var b=j(a);return b.length?b[0]:null}function j(b){return a.data(b,"treegrid").data}function k(a,b){var c=p(a,b);return c._parentId?p(a,c._parentId):null}function l(b,c){function d(a){var c=p(b,a);if(c&&c.children)for(var g=0,h=c.children.length;h>g;g++){var i=c.children[g];f.push(i),d(i[e.idField])}}var e=a.data(b,"treegrid").options,f=(a(b).datagrid("getPanel").find("div.datagrid-view2 div.datagrid-body"),[]);if(c)d(c);else for(var g=j(b),h=0;h<g.length;h++)f.push(g[h]),d(g[h][e.idField]);return f}function m(a){var b=n(a);return b.length?b[0]:null}function n(b){var c=[],d=a(b).datagrid("getPanel");return d.find("div.datagrid-view2 div.datagrid-body tr.datagrid-row-selected").each(function(){var d=a(this).attr("node-id");c.push(p(b,d))}),c}function o(b,c){if(!c)return 0;var d=a.data(b,"treegrid").options,e=a(b).datagrid("getPanel").children("div.datagrid-view"),f=e.find('div.datagrid-body tr[node-id="'+c+'"]').children('td[field="'+d.treeField+'"]');return f.find("span.tree-indent,span.tree-hit").length}function p(b,c){for(var d=a.data(b,"treegrid").options,e=a.data(b,"treegrid").data,f=[e];f.length;)for(var g=f.shift(),h=0;h<g.length;h++){var i=g[h];if(i[d.idField]==c)return i;i.children&&f.push(i.children)}return null}function q(b,d){var e=a.data(b,"treegrid").options,f=p(b,d),g=e.finder.getTr(b,d),h=g.find("span.tree-hit");if(0!=h.length&&!h.hasClass("tree-collapsed")&&0!=e.onBeforeCollapse.call(b,f)){h.removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),h.next().removeClass("tree-folder-open"),f.state="closed",g=g.next("tr.treegrid-tr-tree");var i=g.children("td").children("div");e.animate?i.slideUp("normal",function(){a(b).treegrid("autoSizeColumn"),c(b,d),e.onCollapse.call(b,f)}):(i.hide(),a(b).treegrid("autoSizeColumn"),c(b,d),e.onCollapse.call(b,f))}}function r(b,d){function e(e){k.state="open",g.animate?e.slideDown("normal",function(){a(b).treegrid("autoSizeColumn"),c(b,d),g.onExpand.call(b,k)}):(e.show(),a(b).treegrid("autoSizeColumn"),c(b,d),g.onExpand.call(b,k))}var g=a.data(b,"treegrid").options,i=g.finder.getTr(b,d),j=i.find("span.tree-hit"),k=p(b,d);if(0!=j.length&&!j.hasClass("tree-expanded")&&0!=g.onBeforeExpand.call(b,k)){j.removeClass("tree-collapsed tree-collapsed-hover").addClass("tree-expanded"),j.next().addClass("tree-folder-open");var l=i.next("tr.treegrid-tr-tree");if(l.length){var m=l.children("td").children("div");e(m)}else{f(b,k[g.idField]);var l=i.next("tr.treegrid-tr-tree"),m=l.children("td").children("div");m.hide();var n=a.extend({},g.queryParams||{});n.id=k[g.idField],h(b,k[g.idField],n,!0,function(){m.is(":empty")?l.remove():e(m)})}}}function s(b,c){var d=a.data(b,"treegrid").options,e=d.finder.getTr(b,c),f=e.find("span.tree-hit");f.hasClass("tree-expanded")?q(b,c):r(b,c)}function t(b,c){var d=a.data(b,"treegrid").options,e=l(b,c);c&&e.unshift(p(b,c));for(var f=0;f<e.length;f++)q(b,e[f][d.idField])}function u(b,c){var d=a.data(b,"treegrid").options,e=l(b,c);c&&e.unshift(p(b,c));for(var f=0;f<e.length;f++)r(b,e[f][d.idField])}function v(b,c){for(var d=a.data(b,"treegrid").options,e=[],f=k(b,c);f;){var g=f[d.idField];e.unshift(g),f=k(b,g)}for(var h=0;h<e.length;h++)r(b,e[h])}function w(b,c){var d=a.data(b,"treegrid").options;if(c.parent){var e=d.finder.getTr(b,c.parent);0==e.next("tr.treegrid-tr-tree").length&&f(b,c.parent);var h=e.children('td[field="'+d.treeField+'"]').children("div.datagrid-cell"),i=h.children("span.tree-icon");if(i.hasClass("tree-file")){i.removeClass("tree-file").addClass("tree-folder tree-folder-open");var j=a('<span class="tree-hit tree-expanded"></span>').insertBefore(i);j.prev().length&&j.prev().remove()}}g(b,c.parent,c.data,!0)}function x(b,c){function e(a){var d=a?1:2,e=g.finder.getTr(b,c.data[g.idField],"body",d),h=e.closest("table.datagrid-btable");e=e.parent().children();var i=g.finder.getTr(b,f,"body",d);if(c.before)e.insertBefore(i);else{var j=i.next("tr.treegrid-tr-tree");e.insertAfter(j.length?j:i)}h.remove()}var f=c.before||c.after,g=a.data(b,"treegrid").options,h=k(b,f);w(b,{parent:h?h[g.idField]:null,data:[c.data]}),e(!0),e(!1),d(b)}function y(b,c){function e(d){var e,g=k(b,c);e=g?g.children:a(b).treegrid("getData");for(var h=0;h<e.length;h++)if(e[h][f.idField]==d){e.splice(h,1);break}return g}var f=a.data(b,"treegrid").options,g=f.finder.getTr(b,c);g.next("tr.treegrid-tr-tree").remove(),g.remove();var h=e(c);if(h&&0==h.children.length){g=f.finder.getTr(b,h[f.idField]),g.next("tr.treegrid-tr-tree").remove();var i=g.children('td[field="'+f.treeField+'"]').children("div.datagrid-cell");i.find(".tree-icon").removeClass("tree-folder").addClass("tree-file"),i.find(".tree-hit").remove(),a('<span class="tree-indent"></span>').prependTo(i)}d(b)}a.fn.treegrid=function(c,d){if("string"==typeof c){var f=a.fn.treegrid.methods[c];return f?f(this,d):this.datagrid(c,d)}return c=c||{},this.each(function(){var d=a.data(this,"treegrid");d?a.extend(d.options,c):d=a.data(this,"treegrid",{options:a.extend({},a.fn.treegrid.defaults,a.fn.treegrid.parseOptions(this),c),data:[]}),b(this),d.options.data&&a(this).treegrid("loadData",d.options.data),h(this),e(this)})},a.fn.treegrid.methods={options:function(b){return a.data(b[0],"treegrid").options},resize:function(b,c){return b.each(function(){a(this).datagrid("resize",c)})},fixRowHeight:function(a,b){return a.each(function(){c(this,b)})},loadData:function(a,b){return a.each(function(){g(this,b.parent,b)})},load:function(b,c){return b.each(function(){a(this).treegrid("options").pageNumber=1,a(this).treegrid("getPager").pagination({pageNumber:1}),a(this).treegrid("reload",c)})},reload:function(b,c){return b.each(function(){var b=a(this).treegrid("options"),d={};if("object"==typeof c?d=c:(d=a.extend({},b.queryParams),d.id=c),d.id){var e=a(this).treegrid("find",d.id);e.children&&e.children.splice(0,e.children.length),b.queryParams=d;var f=b.finder.getTr(this,d.id);f.next("tr.treegrid-tr-tree").remove(),f.find("span.tree-hit").removeClass("tree-expanded tree-expanded-hover").addClass("tree-collapsed"),r(this,d.id)}else h(this,null,d)})},reloadFooter:function(b,c){return b.each(function(){var b=a.data(this,"treegrid").options,d=a.data(this,"datagrid").dc;c&&(a.data(this,"treegrid").footer=c),b.showFooter&&(b.view.renderFooter.call(b.view,this,d.footer1,!0),b.view.renderFooter.call(b.view,this,d.footer2,!1),b.view.onAfterRender&&b.view.onAfterRender.call(b.view,this),a(this).treegrid("fixRowHeight"))})},getData:function(b){return a.data(b[0],"treegrid").data},getFooterRows:function(b){return a.data(b[0],"treegrid").footer},getRoot:function(a){return i(a[0])},getRoots:function(a){return j(a[0])},getParent:function(a,b){return k(a[0],b)},getChildren:function(a,b){return l(a[0],b)},getSelected:function(a){return m(a[0])},getSelections:function(a){return n(a[0])},getLevel:function(a,b){return o(a[0],b)},find:function(a,b){return p(a[0],b)},isLeaf:function(b,c){var d=a.data(b[0],"treegrid").options,e=d.finder.getTr(b[0],c),f=e.find("span.tree-hit");return 0==f.length},select:function(b,c){return b.each(function(){a(this).datagrid("selectRow",c)})},unselect:function(b,c){return b.each(function(){a(this).datagrid("unselectRow",c)})},collapse:function(a,b){return a.each(function(){q(this,b)})},expand:function(a,b){return a.each(function(){r(this,b)})},toggle:function(a,b){return a.each(function(){s(this,b)})},collapseAll:function(a,b){return a.each(function(){t(this,b)})},expandAll:function(a,b){return a.each(function(){u(this,b)})},expandTo:function(a,b){return a.each(function(){v(this,b)})},append:function(a,b){return a.each(function(){w(this,b)})},insert:function(a,b){return a.each(function(){x(this,b)})},remove:function(a,b){return a.each(function(){y(this,b)})},pop:function(a,b){var c=a.treegrid("find",b);return a.treegrid("remove",b),c},refresh:function(b,c){return b.each(function(){var b=a.data(this,"treegrid").options;b.view.refreshRow.call(b.view,this,c)})},update:function(b,c){return b.each(function(){var b=a.data(this,"treegrid").options;b.view.updateRow.call(b.view,this,c.id,c.row)})},beginEdit:function(b,c){return b.each(function(){a(this).datagrid("beginEdit",c),a(this).treegrid("fixRowHeight",c)})},endEdit:function(b,c){return b.each(function(){a(this).datagrid("endEdit",c)})},cancelEdit:function(b,c){return b.each(function(){a(this).datagrid("cancelEdit",c)})}},a.fn.treegrid.parseOptions=function(b){return a.extend({},a.fn.datagrid.parseOptions(b),a.parser.parseOptions(b,["treeField",{animate:"boolean"}]))};var z=a.extend({},a.fn.datagrid.defaults.view,{render:function(b,c,d){function e(a,c,d){for(var k=['<table class="datagrid-btable" cellspacing="0" cellpadding="0" border="0"><tbody>'],l=0;l<d.length;l++){var m=d[l];"open"!=m.state&&"closed"!=m.state&&(m.state="open");var n=f.rowStyler?f.rowStyler.call(b,m):"",o="",p="";"string"==typeof n?p=n:n&&(o=n["class"]||"",p=n.style||"");var q='class="datagrid-row '+(i++%2&&f.striped?"datagrid-row-alt ":" ")+o+'"',r=p?'style="'+p+'"':"",s=h+"-"+(a?1:2)+"-"+m[f.idField];if(k.push('<tr id="'+s+'" node-id="'+m[f.idField]+'" '+q+" "+r+">"),k=k.concat(j.renderRow.call(j,b,g,a,c,m)),k.push("</tr>"),m.children&&m.children.length){var t=e(a,c+1,m.children),u="closed"==m.state?"none":"block";k.push('<tr class="treegrid-tr-tree"><td style="border:0px" colspan='+(g.length+(f.rownumbers?1:0))+'><div style="display:'+u+'">'),k=k.concat(t),k.push("</div></td></tr>")}}return k.push("</tbody></table>"),k}var f=a.data(b,"treegrid").options,g=a(b).datagrid("getColumnFields",d),h=a.data(b,"datagrid").rowIdPrefix;if(!d||f.rownumbers||f.frozenColumns&&f.frozenColumns.length){var i=0,j=this,k=e(d,this.treeLevel,this.treeNodes);a(c).append(k.join(""))}},renderFooter:function(b,c,d){for(var e=a.data(b,"treegrid").options,f=a.data(b,"treegrid").footer||[],g=a(b).datagrid("getColumnFields",d),h=['<table class="datagrid-ftable" cellspacing="0" cellpadding="0" border="0"><tbody>'],i=0;i<f.length;i++){var j=f[i];j[e.idField]=j[e.idField]||"foot-row-id"+i,h.push('<tr class="datagrid-row" node-id="'+j[e.idField]+'">'),h.push(this.renderRow.call(this,b,g,d,0,j)),h.push("</tr>")}h.push("</tbody></table>"),a(c).html(h.join(""))},renderRow:function(b,c,d,e,f){var g=a.data(b,"treegrid").options,h=[];d&&g.rownumbers&&h.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">0</div></td>');for(var i=0;i<c.length;i++){var j=c[i],k=a(b).datagrid("getColumnOption",j);if(k){var l=k.styler?k.styler(f[j],f)||"":"",m="",n="";"string"==typeof l?n=l:h&&(m=l["class"]||"",n=l.style||"");var o=m?'class="'+m+'"':"",p=k.hidden?'style="display:none;'+n+'"':n?'style="'+n+'"':"";if(h.push('<td field="'+j+'" '+o+" "+p+">"),k.checkbox)var p="";else{var p=n;k.align&&(p+=";text-align:"+k.align+";"),g.nowrap?g.autoRowHeight&&(p+=";height:auto;"):p+=";white-space:normal;height:auto;"}if(h.push('<div style="'+p+'" '),h.push(k.checkbox?'class="datagrid-cell-check ':'class="datagrid-cell '+k.cellClass),h.push('">'),k.checkbox)h.push(f.checked?'<input type="checkbox" checked="checked"':'<input type="checkbox"'),h.push(' name="'+j+'" value="'+(void 0!=f[j]?f[j]:"")+'"/>');else{var q=null;if(q=k.formatter?k.formatter(f[j],f):f[j],j==g.treeField){for(var r=0;e>r;r++)h.push('<span class="tree-indent"></span>');"closed"==f.state?(h.push('<span class="tree-hit tree-collapsed"></span>'),h.push('<span class="tree-icon tree-folder '+(f.iconCls?f.iconCls:"")+'"></span>')):f.children&&f.children.length?(h.push('<span class="tree-hit tree-expanded"></span>'),h.push('<span class="tree-icon tree-folder tree-folder-open '+(f.iconCls?f.iconCls:"")+'"></span>')):(h.push('<span class="tree-indent"></span>'),h.push('<span class="tree-icon tree-file '+(f.iconCls?f.iconCls:"")+'"></span>')),h.push('<span class="tree-title">'+q+"</span>")}else h.push(q)}h.push("</div>"),h.push("</td>")}}return h.join("")},refreshRow:function(a,b){this.updateRow.call(this,a,b,{})},updateRow:function(b,c,d){function e(d){var e=a(b).treegrid("getColumnFields",d),j=f.finder.getTr(b,c,"body",d?1:2),k=j.find("div.datagrid-cell-rownumber").html(),l=j.find("div.datagrid-cell-check input[type=checkbox]").is(":checked");j.html(this.renderRow(b,e,d,h,g)),j.attr("style",i||""),j.find("div.datagrid-cell-rownumber").html(k),l&&j.find("div.datagrid-cell-check input[type=checkbox]")._propAttr("checked",!0)}var f=a.data(b,"treegrid").options,g=a(b).treegrid("find",c);a.extend(g,d);var h=a(b).treegrid("getLevel",c)-1,i=f.rowStyler?f.rowStyler.call(b,g):"";e.call(this,!0),e.call(this,!1),a(b).treegrid("fixRowHeight",c)},onBeforeRender:function(b,c,d){function e(a,b){for(var c=0;c<a.length;c++){var d=a[c];d._parentId=b,d.children&&d.children.length&&e(d.children,d[g.idField])}}if(a.isArray(c)&&(d={total:c.length,rows:c},c=null),!d)return!1;var f=a.data(b,"treegrid"),g=f.options;void 0==d.length?(d.footer&&(f.footer=d.footer),d.total&&(f.total=d.total),d=this.transfer(b,c,d.rows)):e(d,c);var h=p(b,c);h?h.children=h.children?h.children.concat(d):d:f.data=f.data.concat(d),this.sort(b,d),this.treeNodes=d,this.treeLevel=a(b).treegrid("getLevel",c)},sort:function(b,c){function d(c){c.sort(function(c,d){for(var e=0,h=0;h<f.length;h++){var i=f[h],j=g[h],k=a(b).treegrid("getColumnOption",i),l=k.sorter||function(a,b){return a==b?0:a>b?1:-1};if(e=l(c[i],d[i])*("asc"==j?1:-1),0!=e)return e}return e});for(var e=0;e<c.length;e++){var h=c[e].children;h&&h.length&&d(h)}}var e=a.data(b,"treegrid").options;if(!e.remoteSort&&e.sortName){var f=e.sortName.split(","),g=e.sortOrder.split(",");d(c)}},transfer:function(b,c,d){for(var e=a.data(b,"treegrid").options,f=[],g=0;g<d.length;g++)f.push(d[g]);for(var h=[],g=0;g<f.length;g++){var i=f[g];c?i._parentId==c&&(h.push(i),f.splice(g,1),g--):i._parentId||(h.push(i),f.splice(g,1),g--)}for(var j=[],g=0;g<h.length;g++)j.push(h[g]);for(;j.length;)for(var k=j.shift(),g=0;g<f.length;g++){var i=f[g];i._parentId==k[e.idField]&&(k.children?k.children.push(i):k.children=[i],j.push(i),f.splice(g,1),g--)}return h}});a.fn.treegrid.defaults=a.extend({},a.fn.datagrid.defaults,{treeField:null,animate:!1,singleSelect:!0,view:z,loader:function(b,c,d){var e=a(this).treegrid("options");return e.url?void a.ajax({type:e.method,url:e.url,data:b,dataType:"json",success:function(a){c(a)},error:function(){d.apply(this,arguments)}}):!1},loadFilter:function(a){return a},finder:{getTr:function(b,c,d,e){d=d||"body",e=e||0;var f=a.data(b,"datagrid").dc;if(0==e){var g=a.data(b,"treegrid").options,h=g.finder.getTr(b,c,d,1),i=g.finder.getTr(b,c,d,2);return h.add(i)}if("body"==d){var j=a("#"+a.data(b,"datagrid").rowIdPrefix+"-"+e+"-"+c);return j.length||(j=(1==e?f.body1:f.body2).find('tr[node-id="'+c+'"]')),j}return"footer"==d?(1==e?f.footer1:f.footer2).find('tr[node-id="'+c+'"]'):"selected"==d?(1==e?f.body1:f.body2).find("tr.datagrid-row-selected"):"highlight"==d?(1==e?f.body1:f.body2).find("tr.datagrid-row-over"):"checked"==d?(1==e?f.body1:f.body2).find("tr.datagrid-row-checked"):"last"==d?(1==e?f.body1:f.body2).find("tr:last[node-id]"):"allbody"==d?(1==e?f.body1:f.body2).find("tr[node-id]"):"allfooter"==d?(1==e?f.footer1:f.footer2).find("tr[node-id]"):void 0},getRow:function(b,c){var d="object"==typeof c?c.attr("node-id"):c;
return a(b).treegrid("find",d)}},onBeforeLoad:function(){},onLoadSuccess:function(){},onLoadError:function(){},onBeforeCollapse:function(){},onCollapse:function(){},onBeforeExpand:function(){},onExpand:function(){},onClickRow:function(){},onDblClickRow:function(){},onClickCell:function(){},onDblClickCell:function(){},onContextMenu:function(){},onBeforeEdit:function(){},onAfterEdit:function(){},onCancelEdit:function(){}})}(jQuery),function($){function setScrollers(a){var b=$.data(a,"tabs").options;if("left"!=b.tabPosition&&"right"!=b.tabPosition&&b.showHeader){var c=$(a).children("div.tabs-header"),d=c.children("div.tabs-tool"),e=c.children("div.tabs-scroller-left"),f=c.children("div.tabs-scroller-right"),g=c.children("div.tabs-wrap"),h=c.outerHeight();b.plain&&(h-=h-c.height()),d._outerHeight(h);var i=0;$("ul.tabs li",c).each(function(){i+=$(this).outerWidth(!0)});var j=c.width()-d._outerWidth();i>j?(e.add(f).show()._outerHeight(h),"left"==b.toolPosition?(d.css({left:e.outerWidth(),right:""}),g.css({marginLeft:e.outerWidth()+d._outerWidth(),marginRight:f._outerWidth(),width:j-e.outerWidth()-f.outerWidth()})):(d.css({left:"",right:f.outerWidth()}),g.css({marginLeft:e.outerWidth(),marginRight:f.outerWidth()+d._outerWidth(),width:j-e.outerWidth()-f.outerWidth()}))):(e.add(f).hide(),"left"==b.toolPosition?(d.css({left:0,right:""}),g.css({marginLeft:d._outerWidth(),marginRight:0,width:j})):(d.css({left:"",right:0}),g.css({marginLeft:0,marginRight:d._outerWidth(),width:j})))}}function addTools(container){var opts=$.data(container,"tabs").options,header=$(container).children("div.tabs-header");if(opts.tools)if("string"==typeof opts.tools)$(opts.tools).addClass("tabs-tool").appendTo(header),$(opts.tools).show();else{header.children("div.tabs-tool").remove();for(var tools=$('<div class="tabs-tool"><table cellspacing="0" cellpadding="0" style="height:100%"><tr></tr></table></div>').appendTo(header),tr=tools.find("tr"),i=0;i<opts.tools.length;i++){var td=$("<td></td>").appendTo(tr),tool=$('<a href="javascript:void(0);"></a>').appendTo(td);tool[0].onclick=eval(opts.tools[i].handler||function(){}),tool.linkbutton($.extend({},opts.tools[i],{plain:!0}))}}else header.children("div.tabs-tool").remove()}function setSize(a){var b=$.data(a,"tabs"),c=b.options,d=$(a);c.fit?$.extend(c,d._fit()):d._fit(!1),d.width(c.width).height(c.height);for(var e=$(a).children("div.tabs-header"),f=$(a).children("div.tabs-panels"),g=e.find("div.tabs-wrap"),h=g.find(".tabs"),i=0;i<b.tabs.length;i++){var j=b.tabs[i].panel("options"),k=j.tab.find("a.tabs-inner"),l=parseInt(j.tabWidth||c.tabWidth)||void 0;l?k._outerWidth(l):k.css("width",""),k._outerHeight(c.tabHeight),k.css("lineHeight",k.height()+"px")}if("left"==c.tabPosition||"right"==c.tabPosition)e._outerWidth(c.showHeader?c.headerWidth:0),f._outerWidth(d.width()-e.outerWidth()),e.add(f)._outerHeight(c.height),g._outerWidth(e.width()),h._outerWidth(g.width()).css("height","");else{var m=e.children("div.tabs-scroller-left,div.tabs-scroller-right,div.tabs-tool");e._outerWidth(c.width).css("height",""),c.showHeader?(e.css("background-color",""),g.css("height",""),m.show()):(e.css("background-color","transparent"),e._outerHeight(0),g._outerHeight(0),m.hide()),h._outerHeight(c.tabHeight).css("width",""),setScrollers(a);var n=c.height;isNaN(n)?f.height("auto"):f._outerHeight(n-e.outerHeight());var l=c.width;isNaN(l)?f.width("auto"):f._outerWidth(l)}}function setSelectedSize(a){var b=$.data(a,"tabs").options,c=getSelectedTab(a);if(c){var d=$(a).children("div.tabs-panels"),e="auto"==b.width?"auto":d.width(),f="auto"==b.height?"auto":d.height();c.panel("resize",{width:e,height:f})}}function wrapTabs(a){var b=$.data(a,"tabs").tabs,c=$(a);c.addClass("tabs-container");var d=$('<div class="tabs-panels"></div>').insertBefore(c);c.children("div").each(function(){d[0].appendChild(this)}),c[0].appendChild(d[0]),$('<div class="tabs-header"><div class="tabs-scroller-left"></div><div class="tabs-scroller-right"></div><div class="tabs-wrap"><ul class="tabs"></ul></div></div>').prependTo(a),c.children("div.tabs-panels").children("div").each(function(){var c=$.extend({},$.parser.parseOptions(this),{selected:$(this).attr("selected")?!0:void 0}),d=$(this);b.push(d),createTab(a,d,c)}),c.children("div.tabs-header").find(".tabs-scroller-left, .tabs-scroller-right").hover(function(){$(this).addClass("tabs-scroller-over")},function(){$(this).removeClass("tabs-scroller-over")}),c.bind("_resize",function(b,c){var d=$.data(a,"tabs").options;return(1==d.fit||c)&&(setSize(a),setSelectedSize(a)),!1})}function bindEvents(a){function b(a){var b=0;return a.parent().children("li").each(function(c){return a[0]==this?(b=c,!1):void 0}),b}var c=$.data(a,"tabs"),d=c.options;$(a).children("div.tabs-header").unbind().bind("click",function(e){if($(e.target).hasClass("tabs-scroller-left"))$(a).tabs("scrollBy",-d.scrollIncrement);else if($(e.target).hasClass("tabs-scroller-right"))$(a).tabs("scrollBy",d.scrollIncrement);else{var f=$(e.target).closest("li");if(f.hasClass("tabs-disabled"))return;var g=$(e.target).closest("a.tabs-close");if(g.length)closeTab(a,b(f));else if(f.length){var h=b(f),i=c.tabs[h].panel("options");i.collapsible?i.closed?selectTab(a,h):unselectTab(a,h):selectTab(a,h)}}}).bind("contextmenu",function(c){var e=$(c.target).closest("li");e.hasClass("tabs-disabled")||e.length&&d.onContextMenu.call(a,c,e.find("span.tabs-title").html(),b(e))})}function setProperties(a){var b=$.data(a,"tabs").options,c=$(a).children("div.tabs-header"),d=$(a).children("div.tabs-panels");c.removeClass("tabs-header-top tabs-header-bottom tabs-header-left tabs-header-right"),d.removeClass("tabs-panels-top tabs-panels-bottom tabs-panels-left tabs-panels-right"),"top"==b.tabPosition?c.insertBefore(d):"bottom"==b.tabPosition?(c.insertAfter(d),c.addClass("tabs-header-bottom"),d.addClass("tabs-panels-top")):"left"==b.tabPosition?(c.addClass("tabs-header-left"),d.addClass("tabs-panels-right")):"right"==b.tabPosition&&(c.addClass("tabs-header-right"),d.addClass("tabs-panels-left")),1==b.plain?c.addClass("tabs-header-plain"):c.removeClass("tabs-header-plain"),1==b.border?(c.removeClass("tabs-header-noborder"),d.removeClass("tabs-panels-noborder")):(c.addClass("tabs-header-noborder"),d.addClass("tabs-panels-noborder"))}function createTab(a,b,c){var d=$.data(a,"tabs");c=c||{},b.panel($.extend({},c,{border:!1,noheader:!0,closed:!0,doSize:!1,iconCls:c.icon?c.icon:void 0,onLoad:function(){c.onLoad&&c.onLoad.call(this,arguments),d.options.onLoad.call(a,$(this))}}));var e=b.panel("options"),f=$(a).children("div.tabs-header").find("ul.tabs");e.tab=$("<li></li>").appendTo(f),e.tab.append('<a href="javascript:void(0)" class="tabs-inner"><span class="tabs-title"></span><span class="tabs-icon"></span></a>'),$(a).tabs("update",{tab:b,options:e})}function addTab(a,b){var c=$.data(a,"tabs").options,d=$.data(a,"tabs").tabs;void 0==b.selected&&(b.selected=!0);var e=$("<div></div>").appendTo($(a).children("div.tabs-panels"));d.push(e),createTab(a,e,b),c.onAdd.call(a,b.title,d.length-1),setSize(a),b.selected&&selectTab(a,d.length-1)}function updateTab(a,b){var c=$.data(a,"tabs").selectHis,d=b.tab,e=d.panel("options").title;d.panel($.extend({},b.options,{iconCls:b.options.icon?b.options.icon:void 0}));var f=d.panel("options"),g=f.tab,h=g.find("span.tabs-title"),i=g.find("span.tabs-icon");if(h.html(f.title),i.attr("class","tabs-icon"),g.find("a.tabs-close").remove(),f.closable?(h.addClass("tabs-closable"),$('<a href="javascript:void(0)" class="tabs-close"></a>').appendTo(g)):h.removeClass("tabs-closable"),f.iconCls?(h.addClass("tabs-with-icon"),i.addClass(f.iconCls)):h.removeClass("tabs-with-icon"),e!=f.title)for(var j=0;j<c.length;j++)c[j]==e&&(c[j]=f.title);if(g.find("span.tabs-p-tool").remove(),f.tools){var k=$('<span class="tabs-p-tool"></span>').insertAfter(g.find("a.tabs-inner"));if($.isArray(f.tools))for(var j=0;j<f.tools.length;j++){var l=$('<a href="javascript:void(0)"></a>').appendTo(k);l.addClass(f.tools[j].iconCls),f.tools[j].handler&&l.bind("click",{handler:f.tools[j].handler},function(a){$(this).parents("li").hasClass("tabs-disabled")||a.data.handler.call(this)})}else $(f.tools).children().appendTo(k);var m=12*k.children().length;f.closable?m+=8:(m-=3,k.css("right","5px")),h.css("padding-right",m+"px")}setSize(a),$.data(a,"tabs").options.onUpdate.call(a,f.title,getTabIndex(a,d))}function closeTab(a,b){var c=$.data(a,"tabs").options,d=$.data(a,"tabs").tabs,e=$.data(a,"tabs").selectHis;if(exists(a,b)){var f=getTab(a,b),g=f.panel("options").title,h=getTabIndex(a,f);if(0!=c.onBeforeClose.call(a,g,h)){var f=getTab(a,b,!0);f.panel("options").tab.remove(),f.panel("destroy"),c.onClose.call(a,g,h),setSize(a);for(var i=0;i<e.length;i++)e[i]==g&&(e.splice(i,1),i--);var j=e.pop();j?selectTab(a,j):d.length&&selectTab(a,0)}}}function getTab(a,b,c){var d=$.data(a,"tabs").tabs;if("number"==typeof b){if(0>b||b>=d.length)return null;var e=d[b];return c&&d.splice(b,1),e}for(var f=0;f<d.length;f++){var e=d[f];if(e.panel("options").title==b)return c&&d.splice(f,1),e}return null}function getTabIndex(a,b){for(var c=$.data(a,"tabs").tabs,d=0;d<c.length;d++)if(c[d][0]==$(b)[0])return d;return-1}function getSelectedTab(a){for(var b=$.data(a,"tabs").tabs,c=0;c<b.length;c++){var d=b[c];if(0==d.panel("options").closed)return d}return null}function doFirstSelect(a){for(var b=$.data(a,"tabs"),c=b.tabs,d=0;d<c.length;d++)if(c[d].panel("options").selected)return void selectTab(a,d);selectTab(a,b.options.selected)}function selectTab(a,b){var c=$.data(a,"tabs"),d=c.options,e=c.tabs,f=c.selectHis;if(0!=e.length){var g=getTab(a,b);if(g){var h=getSelectedTab(a);if(h){if(g[0]==h[0])return;if(unselectTab(a,getTabIndex(a,h)),!h.panel("options").closed)return}g.panel("open");var i=g.panel("options").title;f.push(i);var j=g.panel("options").tab;j.addClass("tabs-selected");var k=$(a).find(">div.tabs-header>div.tabs-wrap"),l=j.position().left,m=l+j.outerWidth();if(0>l||m>k.width()){var n=l-(k.width()-j.width())/2;$(a).tabs("scrollBy",n)}else $(a).tabs("scrollBy",0);setSelectedSize(a),d.onSelect.call(a,i,getTabIndex(a,g))}}}function unselectTab(a,b){var c=$.data(a,"tabs"),d=getTab(a,b);if(d){var e=d.panel("options");e.closed||(d.panel("close"),e.closed&&(e.tab.removeClass("tabs-selected"),c.options.onUnselect.call(a,e.title,getTabIndex(a,d))))}}function exists(a,b){return null!=getTab(a,b)}function showHeader(a,b){var c=$.data(a,"tabs").options;c.showHeader=b,$(a).tabs("resize")}$.fn.tabs=function(a,b){return"string"==typeof a?$.fn.tabs.methods[a](this,b):(a=a||{},this.each(function(){var b,c=$.data(this,"tabs");c?(b=$.extend(c.options,a),c.options=b):($.data(this,"tabs",{options:$.extend({},$.fn.tabs.defaults,$.fn.tabs.parseOptions(this),a),tabs:[],selectHis:[]}),wrapTabs(this)),addTools(this),setProperties(this),setSize(this),bindEvents(this),doFirstSelect(this)}))},$.fn.tabs.methods={options:function(a){var b=a[0],c=$.data(b,"tabs").options,d=getSelectedTab(b);return c.selected=d?getTabIndex(b,d):0,c},tabs:function(a){return $.data(a[0],"tabs").tabs},resize:function(a){return a.each(function(){setSize(this),setSelectedSize(this)})},add:function(a,b){return a.each(function(){addTab(this,b)})},close:function(a,b){return a.each(function(){closeTab(this,b)})},getTab:function(a,b){return getTab(a[0],b)},getTabIndex:function(a,b){return getTabIndex(a[0],b)},getSelected:function(a){return getSelectedTab(a[0])},select:function(a,b){return a.each(function(){selectTab(this,b)})},unselect:function(a,b){return a.each(function(){unselectTab(this,b)})},exists:function(a,b){return exists(a[0],b)},update:function(a,b){return a.each(function(){updateTab(this,b)})},enableTab:function(a,b){return a.each(function(){$(this).tabs("getTab",b).panel("options").tab.removeClass("tabs-disabled")})},disableTab:function(a,b){return a.each(function(){$(this).tabs("getTab",b).panel("options").tab.addClass("tabs-disabled")})},showHeader:function(a){return a.each(function(){showHeader(this,!0)})},hideHeader:function(a){return a.each(function(){showHeader(this,!1)})},scrollBy:function(a,b){return a.each(function(){function a(){var a=0,b=d.children("ul");return b.children("li").each(function(){a+=$(this).outerWidth(!0)}),a-d.width()+(b.outerWidth()-b.width())}var c=$(this).tabs("options"),d=$(this).find(">div.tabs-header>div.tabs-wrap"),e=Math.min(d._scrollLeft()+b,a());d.animate({scrollLeft:e},c.scrollDuration)})}},$.fn.tabs.parseOptions=function(a){return $.extend({},$.parser.parseOptions(a,["width","height","tools","toolPosition","tabPosition",{fit:"boolean",border:"boolean",plain:"boolean",headerWidth:"number",tabWidth:"number",tabHeight:"number",selected:"number",showHeader:"boolean"}]))},$.fn.tabs.defaults={width:"auto",height:"auto",headerWidth:150,tabWidth:"auto",tabHeight:27,selected:0,showHeader:!0,plain:!1,fit:!1,border:!0,tools:null,toolPosition:"right",tabPosition:"top",scrollIncrement:100,scrollDuration:400,onLoad:function(){},onSelect:function(){},onUnselect:function(){},onBeforeClose:function(){},onClose:function(){},onAdd:function(){},onUpdate:function(){},onContextMenu:function(){}}}(jQuery),function(a){function b(b){function c(a,b){for(var c=0,d=0;d<f.length;d++){var e=f[d],i=e.panel("header")._outerHeight(h);if(e.panel("options").collapsible==a){var j=isNaN(b)?void 0:b+h*i.length;e.panel("resize",{width:g.width(),height:a?j:void 0}),c+=e.panel("panel").outerHeight()-h}}return c}var d=a.data(b,"accordion"),e=d.options,f=d.panels,g=a(b);e.fit?a.extend(e,g._fit()):g._fit(!1),isNaN(e.width)?g.css("width",""):g._outerWidth(e.width);var h=0,i="auto",j=g.find(">div.panel>div.accordion-header");j.length&&(h=a(j[0]).css("height","")._outerHeight()),isNaN(e.height)?g.css("height",""):(g._outerHeight(e.height),i=g.height()-h*j.length),c(!0,i-c(!1)+1)}function c(b,c,d,e){for(var f=a.data(b,"accordion").panels,g=[],h=0;h<f.length;h++){var i=f[h];if(c)i.panel("options")[c]==d&&g.push(i);else if(i[0]==a(d)[0])return h}return c?e?g:g.length?g[0]:null:-1}function d(a){return c(a,"collapsed",!1,!0)}function e(a){var b=d(a);return b.length?b[0]:null}function f(a,b){return c(a,null,b)}function g(b,d){var e=a.data(b,"accordion").panels;return"number"==typeof d?0>d||d>=e.length?null:e[d]:c(b,"title",d)}function h(b){var c=a.data(b,"accordion").options,d=a(b);c.border?d.removeClass("accordion-noborder"):d.addClass("accordion-noborder")}function i(c){var d=a.data(c,"accordion"),e=a(c);e.addClass("accordion"),d.panels=[],e.children("div").each(function(){var b=a.extend({},a.parser.parseOptions(this),{selected:a(this).attr("selected")?!0:void 0}),e=a(this);d.panels.push(e),j(c,e,b)}),e.bind("_resize",function(d,e){var f=a.data(c,"accordion").options;return(1==f.fit||e)&&b(c),!1})}function j(b,c,e){var g=a.data(b,"accordion").options;c.panel(a.extend({},{collapsible:!0,minimizable:!1,maximizable:!1,closable:!1,doSize:!1,collapsed:!0,headerCls:"accordion-header",bodyCls:"accordion-body"},e,{onBeforeExpand:function(){if(e.onBeforeExpand&&0==e.onBeforeExpand.call(this))return!1;if(!g.multiple)for(var c=a.grep(d(b),function(a){return a.panel("options").collapsible}),h=0;h<c.length;h++)l(b,f(b,c[h]));var i=a(this).panel("header");i.addClass("accordion-header-selected"),i.find(".accordion-collapse").removeClass("accordion-expand")},onExpand:function(){e.onExpand&&e.onExpand.call(this),g.onSelect.call(b,a(this).panel("options").title,f(b,this))},onBeforeCollapse:function(){if(e.onBeforeCollapse&&0==e.onBeforeCollapse.call(this))return!1;var b=a(this).panel("header");b.removeClass("accordion-header-selected"),b.find(".accordion-collapse").addClass("accordion-expand")},onCollapse:function(){e.onCollapse&&e.onCollapse.call(this),g.onUnselect.call(b,a(this).panel("options").title,f(b,this))}}));var h=c.panel("header"),i=h.children("div.panel-tool");i.children("a.panel-tool-collapse").hide();var j=a('<a href="javascript:void(0)"></a>').addClass("accordion-collapse accordion-expand").appendTo(i);j.bind("click",function(){var a=f(b,c);return c.panel("options").collapsed?k(b,a):l(b,a),!1}),c.panel("options").collapsible?j.show():j.hide(),h.click(function(){return a(this).find("a.accordion-collapse:visible").triggerHandler("click"),!1})}function k(b,c){var d=g(b,c);if(d){n(b);var e=a.data(b,"accordion").options;d.panel("expand",e.animate)}}function l(b,c){var d=g(b,c);if(d){n(b);var e=a.data(b,"accordion").options;d.panel("collapse",e.animate)}}function m(b){function d(a){var c=e.animate;e.animate=!1,k(b,a),e.animate=c}var e=a.data(b,"accordion").options,g=c(b,"selected",!0);d(g?f(b,g):e.selected)}function n(b){for(var c=a.data(b,"accordion").panels,d=0;d<c.length;d++)c[d].stop(!0,!0)}function o(c,d){var e=a.data(c,"accordion"),f=e.options,g=e.panels;void 0==d.selected&&(d.selected=!0),n(c);var h=a("<div></div>").appendTo(c);g.push(h),j(c,h,d),b(c),f.onAdd.call(c,d.title,g.length-1),d.selected&&k(c,g.length-1)}function p(c,d){var h=a.data(c,"accordion"),i=h.options,j=h.panels;n(c);var l=g(c,d),m=l.panel("options").title,o=f(c,l);if(l&&0!=i.onBeforeRemove.call(c,m,o)){if(j.splice(o,1),l.panel("destroy"),j.length){b(c);var p=e(c);p||k(c,0)}i.onRemove.call(c,m,o)}}a.fn.accordion=function(c,d){return"string"==typeof c?a.fn.accordion.methods[c](this,d):(c=c||{},this.each(function(){var d=a.data(this,"accordion");d?a.extend(d.options,c):(a.data(this,"accordion",{options:a.extend({},a.fn.accordion.defaults,a.fn.accordion.parseOptions(this),c),accordion:a(this).addClass("accordion"),panels:[]}),i(this)),h(this),b(this),m(this)}))},a.fn.accordion.methods={options:function(b){return a.data(b[0],"accordion").options},panels:function(b){return a.data(b[0],"accordion").panels},resize:function(a){return a.each(function(){b(this)})},getSelections:function(a){return d(a[0])},getSelected:function(a){return e(a[0])},getPanel:function(a,b){return g(a[0],b)},getPanelIndex:function(a,b){return f(a[0],b)},select:function(a,b){return a.each(function(){k(this,b)})},unselect:function(a,b){return a.each(function(){l(this,b)})},add:function(a,b){return a.each(function(){o(this,b)})},remove:function(a,b){return a.each(function(){p(this,b)})}},a.fn.accordion.parseOptions=function(b){a(b);return a.extend({},a.parser.parseOptions(b,["width","height",{fit:"boolean",border:"boolean",animate:"boolean",multiple:"boolean",selected:"number"}]))},a.fn.accordion.defaults={width:"auto",height:"auto",fit:!1,border:!0,animate:!0,multiple:!1,selected:0,onSelect:function(){},onUnselect:function(){},onAdd:function(){},onBeforeRemove:function(){},onRemove:function(){}}}(jQuery),function($){function _1(a,b,c,d){var e=$(a).window("window");if(e){switch(b){case null:e.show();break;case"slide":e.slideDown(c);break;case"fade":e.fadeIn(c);break;case"show":e.show(c)}var f=null;d>0&&(f=setTimeout(function(){_7(a,b,c)},d)),e.hover(function(){f&&clearTimeout(f)},function(){d>0&&(f=setTimeout(function(){_7(a,b,c)},d))})}}function _7(a,b,c){if(1!=a.locked){a.locked=!0;var d=$(a).window("window");if(d){switch(b){case null:d.hide();break;case"slide":d.slideUp(c);break;case"fade":d.fadeOut(c);break;case"show":d.hide(c)}setTimeout(function(){$(a).window("destroy")},c)}}}function _b(a){var b=$.extend({},$.fn.window.defaults,{collapsible:!1,minimizable:!1,maximizable:!1,shadow:!1,draggable:!1,resizable:!1,closed:!0,style:{left:"",top:"",right:0,zIndex:$.fn.window.defaults.zIndex++,bottom:-document.body.scrollTop-document.documentElement.scrollTop},onBeforeOpen:function(){return _1(this,b.showType,b.showSpeed,b.timeout),!1},onBeforeClose:function(){return _7(this,b.showType,b.showSpeed),!1}},{title:"",width:250,height:100,showType:"slide",showSpeed:600,msg:"",timeout:4e3},a);b.style.zIndex=$.fn.window.defaults.zIndex++;var c=$('<div class="messager-body"></div>').html(b.msg).appendTo("body");return c.window(b),c.window("window").css(b.style),c.window("open"),c}function _f(_10,_11,_12){var win=$('<div class="messager-body"></div>').appendTo("body");if(win.append(_11),_12){var tb=$('<div class="messager-button"></div>').appendTo(win);for(var _13 in _12)$("<a></a>").attr("href","javascript:void(0)").text(_13).css("margin-left",10).bind("click",eval(_12[_13])).appendTo(tb).linkbutton()}return win.window({title:_10,noheader:_10?!1:!0,width:300,height:"auto",modal:!0,collapsible:!1,minimizable:!1,maximizable:!1,resizable:!1,onClose:function(){setTimeout(function(){win.window("destroy")},100)}}),win.window("window").addClass("messager-window"),win.children("div.messager-button").children("a:first").focus(),win}$.messager={show:function(a){return _b(a)},alert:function(a,b,c,d){var e="<div>"+b+"</div>";switch(c){case"error":e='<div class="messager-icon messager-error"></div>'+e;break;case"info":e='<div class="messager-icon messager-info"></div>'+e;break;case"question":e='<div class="messager-icon messager-question"></div>'+e;break;case"warning":e='<div class="messager-icon messager-warning"></div>'+e}e+='<div style="clear:both;"/>';var f={};f[$.messager.defaults.ok]=function(){return g.window("close"),d?(d(),!1):void 0};var g=_f(a,e,f);return g},confirm:function(a,b,c){var d='<div class="messager-icon messager-question"></div><div>'+b+'</div><div style="clear:both;"/>',e={};e[$.messager.defaults.ok]=function(){return f.window("close"),c?(c(!0),!1):void 0},e[$.messager.defaults.cancel]=function(){return f.window("close"),c?(c(!1),!1):void 0};var f=_f(a,d,e);return f},prompt:function(a,b,c){var d='<div class="messager-icon messager-question"></div><div>'+b+'</div><br/><div style="clear:both;"/><div><input class="messager-input" type="text"/></div>',e={};e[$.messager.defaults.ok]=function(){return f.window("close"),c?(c($(".messager-input",f).val()),!1):void 0},e[$.messager.defaults.cancel]=function(){return f.window("close"),c?(c(),!1):void 0};var f=_f(a,d,e);return f.children("input.messager-input").focus(),f},progress:function(a){var b={bar:function(){return $("body>div.messager-window").find("div.messager-p-bar")},close:function(){var a=$("body>div.messager-window>div.messager-body:has(div.messager-progress)");a.length&&a.window("close")}};if("string"==typeof a){var c=b[a];return c()}var d=$.extend({title:"",msg:"",text:void 0,interval:300},a||{}),e='<div class="messager-progress"><div class="messager-p-msg"></div><div class="messager-p-bar"></div></div>',f=_f(d.title,e,null);f.find("div.messager-p-msg").html(d.msg);var g=f.find("div.messager-p-bar");return g.progressbar({text:d.text}),f.window({closable:!1,onClose:function(){this.timer&&clearInterval(this.timer),$(this).window("destroy")}}),d.interval&&(f[0].timer=setInterval(function(){var a=g.progressbar("getValue");a+=10,a>100&&(a=0),g.progressbar("setValue",a)},d.interval)),f}},$.messager.defaults={ok:"Ok",cancel:"Cancel"}}(jQuery),function(a){function b(b,c){var d=a.data(b,"window").options;c&&a.extend(d,c),a(b).panel("resize",d)}function c(b,c){var d=a.data(b,"window");c&&(null!=c.left&&(d.options.left=c.left),null!=c.top&&(d.options.top=c.top)),a(b).panel("move",d.options),d.shadow&&d.shadow.css({left:d.options.left,top:d.options.top})}function d(b,d){var e=a.data(b,"window"),f=e.options,g=f.width;if(isNaN(g)&&(g=e.window._outerWidth()),f.inline){var h=e.window.parent();f.left=(h.width()-g)/2+h.scrollLeft()}else f.left=(a(window)._outerWidth()-g)/2+a(document).scrollLeft();d&&c(b)}function e(b,d){var e=a.data(b,"window"),f=e.options,g=f.height;if(isNaN(g)&&(g=e.window._outerHeight()),f.inline){var h=e.window.parent();f.top=(h.height()-g)/2+h.scrollTop()}else f.top=(a(window)._outerHeight()-g)/2+a(document).scrollTop();d&&c(b)}function f(b){var f=a.data(b,"window"),g=a(b).panel(a.extend({},f.options,{border:!1,doSize:!0,closed:!0,cls:"window",headerCls:"window-header",bodyCls:"window-body "+(f.options.noheader?"window-body-noheader":""),onBeforeDestroy:function(){return 0==f.options.onBeforeDestroy.call(b)?!1:(f.shadow&&f.shadow.remove(),void(f.mask&&f.mask.remove()))},onClose:function(){f.shadow&&f.shadow.hide(),f.mask&&f.mask.hide(),f.options.onClose.call(b)},onOpen:function(){f.mask&&f.mask.css({display:"block",zIndex:a.fn.window.defaults.zIndex++}),f.shadow&&f.shadow.css({display:"block",zIndex:a.fn.window.defaults.zIndex++,left:f.options.left,top:f.options.top,width:f.window._outerWidth(),height:f.window._outerHeight()}),f.window.css("z-index",a.fn.window.defaults.zIndex++),f.options.onOpen.call(b)},onResize:function(c,d){var e=a(this).panel("options");a.extend(f.options,{width:e.width,height:e.height,left:e.left,top:e.top}),f.shadow&&f.shadow.css({left:f.options.left,top:f.options.top,width:f.window._outerWidth(),height:f.window._outerHeight()}),f.options.onResize.call(b,c,d)},onMinimize:function(){f.shadow&&f.shadow.hide(),f.mask&&f.mask.hide(),f.options.onMinimize.call(b)},onBeforeCollapse:function(){return 0==f.options.onBeforeCollapse.call(b)?!1:void(f.shadow&&f.shadow.hide())},onExpand:function(){f.shadow&&f.shadow.show(),f.options.onExpand.call(b)}}));f.window=g.panel("panel"),f.mask&&f.mask.remove(),1==f.options.modal&&(f.mask=a('<div class="window-mask"></div>').insertAfter(f.window),f.mask.css({width:f.options.inline?f.mask.parent().width():h().width,height:f.options.inline?f.mask.parent().height():h().height,display:"none"})),f.shadow&&f.shadow.remove(),1==f.options.shadow&&(f.shadow=a('<div class="window-shadow"></div>').insertAfter(f.window),f.shadow.css({display:"none"})),null==f.options.left&&d(b),null==f.options.top&&e(b),c(b),0==f.options.closed&&g.window("open")}function g(c){var d=a.data(c,"window");d.window.draggable({handle:">div.panel-header>div.panel-title",disabled:0==d.options.draggable,onStartDrag:function(b){d.mask&&d.mask.css("z-index",a.fn.window.defaults.zIndex++),d.shadow&&d.shadow.css("z-index",a.fn.window.defaults.zIndex++),d.window.css("z-index",a.fn.window.defaults.zIndex++),d.proxy||(d.proxy=a('<div class="window-proxy"></div>').insertAfter(d.window)),d.proxy.css({display:"none",zIndex:a.fn.window.defaults.zIndex++,left:b.data.left,top:b.data.top}),d.proxy._outerWidth(d.window._outerWidth()),d.proxy._outerHeight(d.window._outerHeight()),setTimeout(function(){d.proxy&&d.proxy.show()},500)},onDrag:function(a){return d.proxy.css({display:"block",left:a.data.left,top:a.data.top}),!1},onStopDrag:function(b){d.options.left=b.data.left,d.options.top=b.data.top,a(c).window("move"),d.proxy.remove(),d.proxy=null}}),d.window.resizable({disabled:0==d.options.resizable,onStartResize:function(b){d.pmask=a('<div class="window-proxy-mask"></div>').insertAfter(d.window),d.pmask.css({zIndex:a.fn.window.defaults.zIndex++,left:b.data.left,top:b.data.top,width:d.window._outerWidth(),height:d.window._outerHeight()}),d.proxy||(d.proxy=a('<div class="window-proxy"></div>').insertAfter(d.window)),d.proxy.css({zIndex:a.fn.window.defaults.zIndex++,left:b.data.left,top:b.data.top}),d.proxy._outerWidth(b.data.width),d.proxy._outerHeight(b.data.height)},onResize:function(a){return d.proxy.css({left:a.data.left,top:a.data.top}),d.proxy._outerWidth(a.data.width),d.proxy._outerHeight(a.data.height),!1},onStopResize:function(e){a.extend(d.options,{left:e.data.left,top:e.data.top,width:e.data.width,height:e.data.height}),b(c),d.pmask.remove(),d.pmask=null,d.proxy.remove(),d.proxy=null}})}function h(){return"BackCompat"==document.compatMode?{width:Math.max(document.body.scrollWidth,document.body.clientWidth),height:Math.max(document.body.scrollHeight,document.body.clientHeight)}:{width:Math.max(document.documentElement.scrollWidth,document.documentElement.clientWidth),height:Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight)}}a(window).resize(function(){a("body>div.window-mask").css({width:a(window)._outerWidth(),height:a(window)._outerHeight()}),setTimeout(function(){a("body>div.window-mask").css({width:h().width,height:h().height})},50)}),a.fn.window=function(b,c){if("string"==typeof b){var d=a.fn.window.methods[b];return d?d(this,c):this.panel(b,c)}return b=b||{},this.each(function(){var c=a.data(this,"window");c?a.extend(c.options,b):(c=a.data(this,"window",{options:a.extend({},a.fn.window.defaults,a.fn.window.parseOptions(this),b)}),c.options.inline||document.body.appendChild(this)),f(this),g(this)})},a.fn.window.methods={options:function(b){var c=b.panel("options"),d=a.data(b[0],"window").options;return a.extend(d,{closed:c.closed,collapsed:c.collapsed,minimized:c.minimized,maximized:c.maximized})},window:function(b){return a.data(b[0],"window").window},resize:function(a,c){return a.each(function(){b(this,c)})},move:function(a,b){return a.each(function(){c(this,b)})},hcenter:function(a){return a.each(function(){d(this,!0)})},vcenter:function(a){return a.each(function(){e(this,!0)})},center:function(a){return a.each(function(){d(this),e(this),c(this)})}},a.fn.window.parseOptions=function(b){return a.extend({},a.fn.panel.parseOptions(b),a.parser.parseOptions(b,[{draggable:"boolean",resizable:"boolean",shadow:"boolean",modal:"boolean",inline:"boolean"}]))},a.fn.window.defaults=a.extend({},a.fn.panel.defaults,{zIndex:9e3,draggable:!0,resizable:!0,shadow:!0,modal:!1,inline:!1,title:"New Window",collapsible:!0,minimizable:!0,maximizable:!0,closable:!0,closed:!1})}(jQuery),function($){function _1(a){for(var b=document.createElement("div");a.firstChild;)b.appendChild(a.firstChild);a.appendChild(b);var c=$(b);return c.attr("style",$(a).attr("style")),$(a).removeAttr("style").css("overflow","hidden"),c.panel({border:!1,doSize:!1,bodyCls:"dialog-content"}),c}function _4(_5){var _6=$.data(_5,"dialog").options,_7=$.data(_5,"dialog").contentPanel;if(_6.toolbar)if($.isArray(_6.toolbar)){$(_5).find("div.dialog-toolbar").remove();for(var _8=$('<div class="dialog-toolbar"><table cellspacing="0" cellpadding="0"><tr></tr></table></div>').prependTo(_5),tr=_8.find("tr"),i=0;i<_6.toolbar.length;i++){var _9=_6.toolbar[i];if("-"==_9)$('<td><div class="dialog-tool-separator"></div></td>').appendTo(tr);else{var td=$("<td></td>").appendTo(tr),_a=$('<a href="javascript:void(0)"></a>').appendTo(td);_a[0].onclick=eval(_9.handler||function(){}),_a.linkbutton($.extend({},_9,{plain:!0}))}}}else $(_6.toolbar).addClass("dialog-toolbar").prependTo(_5),$(_6.toolbar).show();else $(_5).find("div.dialog-toolbar").remove();if(_6.buttons)if($.isArray(_6.buttons)){$(_5).find("div.dialog-button").remove();for(var _b=$('<div class="dialog-button"></div>').appendTo(_5),i=0;i<_6.buttons.length;i++){var p=_6.buttons[i],_c=$('<a href="javascript:void(0)"></a>').appendTo(_b);p.handler&&(_c[0].onclick=p.handler),_c.linkbutton(p)}}else $(_6.buttons).addClass("dialog-button").appendTo(_5),$(_6.buttons).show();else $(_5).find("div.dialog-button").remove();var _d=_6.href,_e=_6.content;_6.href=null,_6.content=null,_7.panel({closed:_6.closed,cache:_6.cache,href:_d,content:_e,onLoad:function(){"auto"==_6.height&&$(_5).window("resize"),_6.onLoad.apply(_5,arguments)}}),$(_5).window($.extend({},_6,{onOpen:function(){_7.panel("options").closed&&_7.panel("open"),_6.onOpen&&_6.onOpen.call(_5)},onResize:function(a,b){var c=$(_5);_7.panel("panel").show(),_7.panel("resize",{width:c.width(),height:"auto"==b?"auto":c.height()-c.children("div.dialog-toolbar")._outerHeight()-c.children("div.dialog-button")._outerHeight()}),_6.onResize&&_6.onResize.call(_5,a,b)}})),_6.href=_d,_6.content=_e}function _12(a,b){var c=$.data(a,"dialog").contentPanel;c.panel("refresh",b)}$.fn.dialog=function(a,b){if("string"==typeof a){var c=$.fn.dialog.methods[a];return c?c(this,b):this.window(a,b)}return a=a||{},this.each(function(){var b=$.data(this,"dialog");b?$.extend(b.options,a):$.data(this,"dialog",{options:$.extend({},$.fn.dialog.defaults,$.fn.dialog.parseOptions(this),a),contentPanel:_1(this)}),_4(this)})},$.fn.dialog.methods={options:function(a){var b=$.data(a[0],"dialog").options,c=a.panel("options");$.extend(b,{closed:c.closed,collapsed:c.collapsed,minimized:c.minimized,maximized:c.maximized});$.data(a[0],"dialog").contentPanel;return b},dialog:function(a){return a.window("window")},refresh:function(a,b){return a.each(function(){_12(this,b)})}},$.fn.dialog.parseOptions=function(a){return $.extend({},$.fn.window.parseOptions(a),$.parser.parseOptions(a,["toolbar","buttons"]))
},$.fn.dialog.defaults=$.extend({},$.fn.window.defaults,{title:"New Dialog",collapsible:!1,minimizable:!1,maximizable:!1,resizable:!1,toolbar:null,buttons:null})}(jQuery),function(a){function b(b,c){function d(){var b=a("#"+h);if(b.length)try{var c=b.contents()[0].readyState;c&&"uninitialized"==c.toLowerCase()&&setTimeout(d,100)}catch(f){e()}}function e(){var b=a("#"+h);if(b.length){b.unbind();var d="";try{var f=b.contents().find("body");if(d=f.html(),""==d&&--o)return void setTimeout(e,100);var g=f.find(">textarea");if(g.length)d=g.val();else{var i=f.find(">pre");i.length&&(d=i.html())}}catch(j){}c.success&&c.success(d),setTimeout(function(){b.unbind(),b.remove()},100)}}c=c||{};var f={};if(!c.onSubmit||0!=c.onSubmit.call(b,f)){var g=a(b);c.url&&g.attr("action",c.url);var h="easyui_frame_"+(new Date).getTime(),i=a("<iframe id="+h+" name="+h+"></iframe>").attr("src",window.ActiveXObject?"javascript:false":"about:blank").css({position:"absolute",top:-1e3,left:-1e3}),j=g.attr("target"),k=g.attr("action");g.attr("target",h);var l=a();try{i.appendTo("body"),i.bind("load",e);for(var m in f){var n=a('<input type="hidden" name="'+m+'">').val(f[m]).appendTo(g);l=l.add(n)}d(),g[0].submit()}finally{g.attr("action",k),j?g.attr("target",j):g.removeAttr("target"),l.remove()}var o=10}}function c(b,c){function d(c){var d=a(b);for(var j in c){var k=c[j],l=e(j,k);if(!l.length){var m=f(j,k);m||(a('input[name="'+j+'"]',d).val(k),a('textarea[name="'+j+'"]',d).val(k),a('select[name="'+j+'"]',d).val(k))}h(j,k)}i.onLoadSuccess.call(b,c),g(b)}function e(c,d){var e=a(b).find('input[name="'+c+'"][type=radio], input[name="'+c+'"][type=checkbox]');return e._propAttr("checked",!1),e.each(function(){var b=a(this);(b.val()==String(d)||a.inArray(b.val(),a.isArray(d)?d:[d])>=0)&&b._propAttr("checked",!0)}),e}function f(c,d){for(var e=0,f=["numberbox","slider"],g=0;g<f.length;g++){var h=f[g],i=a(b).find("input["+h+'Name="'+c+'"]');i.length&&(i[h]("setValue",d),e+=i.length)}return e}function h(c,d){var e=a(b),f=["combobox","combotree","combogrid","datetimebox","datebox","combo"],g=e.find('[comboName="'+c+'"]');if(g.length)for(var h=0;h<f.length;h++){var i=f[h];if(g.hasClass(i+"-f"))return void(g[i]("options").multiple?g[i]("setValues",d):g[i]("setValue",d))}}a.data(b,"form")||a.data(b,"form",{options:a.extend({},a.fn.form.defaults)});var i=a.data(b,"form").options;if("string"==typeof c){var j={};if(0==i.onBeforeLoad.call(b,j))return;a.ajax({url:c,data:j,dataType:"json",success:function(a){d(a)},error:function(){i.onLoadError.apply(b,arguments)}})}else d(c)}function d(b){a(".easyui-editor",b)[0]&&(a(".easyui-editor",b).editor("clearValue"),a(".easyui-editor",b).editor("setValue","请填写内容")),a("input,select,textarea",b).each(function(){var b=this.type,c=this.tagName.toLowerCase();if("text"==b||"password"==b||"textarea"==c)this.value="";else if("file"==b){var d=a(this);d.after(d.clone().val("")),d.remove()}else"checkbox"==b||"radio"==b?this.checked=!1:"select"==c&&(this.selectedIndex=-1)});for(var c=a(b),d=["combo","combobox","combotree","combogrid","slider"],e=0;e<d.length;e++){var f=d[e],g=c.find("."+f+"-f");g.length&&g[f]&&g[f]("clear")}}function e(b){b.reset();for(var c=a(b),d=["combo","combobox","combotree","combogrid","datebox","datetimebox","spinner","timespinner","numberbox","numberspinner","slider"],e=0;e<d.length;e++){var f=d[e],h=c.find("."+f+"-f");h.length&&h[f]&&h[f]("reset")}g(b)}function f(c){var d=a.data(c,"form").options,e=a(c);e.unbind(".form").bind("submit.form",function(){return setTimeout(function(){b(c,d)},0),!1})}function g(b){if(a.fn.validatebox){var c=a(b);c.find(".validatebox-text:not(:disabled)").validatebox("validate");var d=c.find(".validatebox-invalid");return d.filter(":not(:disabled):first").focus(),0==d.length}return!0}function h(b,c){a(b).find(".validatebox-text:not(:disabled)").validatebox(c?"disableValidation":"enableValidation")}a.fn.form=function(b,c){return"string"==typeof b?a.fn.form.methods[b](this,c):(b=b||{},this.each(function(){a.data(this,"form")||a.data(this,"form",{options:a.extend({},a.fn.form.defaults,b)}),f(this)}))},a.fn.form.methods={submit:function(c,d){return c.each(function(){b(this,a.extend({},a.fn.form.defaults,d||{}))})},load:function(a,b){return a.each(function(){c(this,b)})},clear:function(a){return a.each(function(){d(this)})},reset:function(a){return a.each(function(){e(this)})},validate:function(a){return g(a[0])},disableValidation:function(a){return a.each(function(){h(this,!0)})},enableValidation:function(a){return a.each(function(){h(this,!1)})}},a.fn.form.defaults={url:null,onSubmit:function(){return a(this).form("validate")},success:function(){},onBeforeLoad:function(){},onLoadSuccess:function(){},onLoadError:function(){}}}(jQuery),function(a){function b(b){var c=a.data(b,"district").options,d=a(b),e=a("<select />").attr("id","ProvinceSelect"),f=a("<select />").attr("id","CitySelect"),g=a("<select />").attr("id","AreaSelect");d.append(e),e.combobox({data:[{value:"",text:"请选择"},{value:"1",text:"广东省"},{value:"2",text:"广西省"}],textField:"text",valueField:"value",width:100,onChange:function(){a("#CitySelect",b)[0]&&f.combobox({disabled:!1,value:"1"})}}),c.level>1&&(d.append(f),f.combobox({data:[{value:"",text:"请选择"},{value:"1",text:"广州市"},{value:"2",text:"深圳市"}],textField:"text",valueField:"value",style:"margin-left:5px;",disabled:!0,width:120,onChange:function(){a("#AreaSelect",b)[0]&&g.combobox({disabled:!1,value:"1"})}})),c.level>2&&(d.append(g),g.combobox({data:[{value:"",text:"请选择"},{value:"1",text:"天河区"},{value:"2",text:"越秀区"},{value:"3",text:"白云区"}],textField:"text",valueField:"value",style:"margin-left:5px;",disabled:!0,width:120}))}a.fn.district=function(c,d){if("string"==typeof c){var e=a.fn.district.methods[c];return e?e(this,d):this.combo(c,d)}return c=c||{},this.each(function(){var d=this,e=a.data(d,"district");e?a.extend(e.options,c):(a.data(d,"district",{options:a.extend({},a.fn.district.defaults,a.fn.district.parseOptions(d),c)}),b(d))})},a.fn.district.methods={options:function(b){return a.data(b[0],"district").options},getValue:function(b){var c=a("#ProvinceSelect",b).combobox("getValue"),d=a("#CitySelect",b).combobox("getValue"),e=a("#AreaSelect",b).combobox("getValue");return{p:c,c:d,a:e}},setValue:function(b,c){var d=c.p,e=c.c,f=c.a;d&&a("#ProvinceSelect",b).combobox("setValue",d),e&&a("#CitySelect",b).combobox("setValue",e),f&&a("#AreaSelect",b).combobox({disabled:!1}).combobox("setValue",f)}},a.fn.district.parseOptions=function(b){return a.extend({},a.parser.parseOptions(b,["level"]))},a.fn.district.defaults={id:null,level:3},a.parser&&a.parser.plugins.push("district")}(jQuery),function(a){function b(b){if(!a(b).hasClass("jqfile")){var c=a(b).width(),d=a("<div>").addClass("file-button"),e=a('<input class="ipt">').addClass(a(b).attr("class")).css({display:"inline","float":"left",width:c+"px"});a(b).before(e),a(b).wrap(d),a(b).css({"float":"left",position:"relative",cursor:"pointer",opacity:"0.0"}).addClass("jqfile"),a(b).css({"margin-left":-c+50+"px"}),a(b).bind("change",function(){e.val(a(b).val())})}}a.fn.inputfile=function(c){return"string"==typeof c?a(this).inputfile.methods[c].call(this,params):(c=c||{},this.each(function(){var d=this,e=a.data(d,"inputfile");e?a.extend(e.options,c):(a.data(d,"inputfile",{options:a.extend({},a.fn.inputfile.defaults,a.fn.inputfile.parseOptions(d),c)}),b(d))}))},a.fn.inputfile.methods={options:function(b){return a.data(b[0],"inputfile").options}},a.fn.inputfile.parseOptions=function(b){a(b);return a.extend({},a.parser.parseOptions(b,["id"]))},a.fn.inputfile.defaults={id:null},a.parser&&a.parser.plugins.push("inputfile")}(jQuery),function(window,undefined){function _isArray(a){return a?"[object Array]"===Object.prototype.toString.call(a):!1}function _isFunction(a){return a?"[object Function]"===Object.prototype.toString.call(a):!1}function _inArray(a,b){for(var c=0,d=b.length;d>c;c++)if(a===b[c])return c;return-1}function _each(a,b){if(_isArray(a))for(var c=0,d=a.length;d>c&&b.call(a[c],c,a[c])!==!1;c++);else for(var e in a)if(a.hasOwnProperty(e)&&b.call(a[e],e,a[e])===!1)break}function _trim(a){return a.replace(/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")}function _inString(a,b,c){return c=c===undefined?",":c,(c+b+c).indexOf(c+a+c)>=0}function _addUnit(a,b){return b=b||"px",a&&/^\d+$/.test(a)?a+b:a}function _removeUnit(a){var b;return a&&(b=/(\d+)/.exec(a))?parseInt(b[1],10):0}function _escape(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function _unescape(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function _toCamel(a){var b=a.split("-");return a="",_each(b,function(b,c){a+=b>0?c.charAt(0).toUpperCase()+c.substr(1):c}),a}function _toHex(a){function b(a){var b=parseInt(a,10).toString(16).toUpperCase();return b.length>1?b:"0"+b}return a.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/gi,function(a,c,d,e){return"#"+b(c)+b(d)+b(e)})}function _toMap(a,b){b=b===undefined?",":b;var c,d={},e=_isArray(a)?a:a.split(b);return _each(e,function(a,b){if(c=/^(\d+)\.\.(\d+)$/.exec(b))for(var e=parseInt(c[1],10);e<=parseInt(c[2],10);e++)d[e.toString()]=!0;else d[b]=!0}),d}function _toArray(a,b){return Array.prototype.slice.call(a,b||0)}function _undef(a,b){return a===undefined?b:a}function _invalidUrl(a){return!a||/[<>"]/.test(a)}function _addParam(a,b){return a.indexOf("?")>=0?a+"&"+b:a+"?"+b}function _extend(a,b,c){c||(c=b,b=null);var d;if(b){var e=function(){};e.prototype=b.prototype,d=new e,_each(c,function(a,b){d[a]=b})}else d=c;d.constructor=a,a.prototype=d,a.parent=b?b.prototype:null}function _json(text){var match;(match=/\{[\s\S]*\}|\[[\s\S]*\]/.exec(text))&&(text=match[0]);var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return eval("("+text+")");throw"JSON parse error"}function _getBasePath(){for(var a,b=document.getElementsByTagName("script"),c=0,d=b.length;d>c;c++)if(a=b[c].src||"",/kindeditor[\w\-\.]*\.js/.test(a))return a.substring(0,a.lastIndexOf("/")+1);return""}function _bindEvent(a,b,c){a.addEventListener?a.addEventListener(b,c,_useCapture):a.attachEvent&&a.attachEvent("on"+b,c)}function _unbindEvent(a,b,c){a.removeEventListener?a.removeEventListener(b,c,_useCapture):a.detachEvent&&a.detachEvent("on"+b,c)}function KEvent(a,b){this.init(a,b)}function _getId(a){return a[_eventExpendo]||null}function _setId(a){return a[_eventExpendo]=++_eventId,_eventId}function _removeId(a){try{delete a[_eventExpendo]}catch(b){a.removeAttribute&&a.removeAttribute(_eventExpendo)}}function _bind(a,b,c){if(b.indexOf(",")>=0)return void _each(b.split(","),function(){_bind(a,this,c)});var d=_getId(a);d||(d=_setId(a)),_eventData[d]===undefined&&(_eventData[d]={});var e=_eventData[d][b];e&&e.length>0?_unbindEvent(a,b,e[0]):(_eventData[d][b]=[],_eventData[d].el=a),e=_eventData[d][b],0===e.length&&(e[0]=function(b){var c=b?new KEvent(a,b):undefined;_each(e,function(b,d){b>0&&d&&d.call(a,c)})}),_inArray(c,e)<0&&e.push(c),_bindEvent(a,b,e[0])}function _unbind(a,b,c){if(b&&b.indexOf(",")>=0)return void _each(b.split(","),function(){_unbind(a,this,c)});var d=_getId(a);if(d){if(b===undefined)return void(d in _eventData&&(_each(_eventData[d],function(b,c){"el"!=b&&c.length>0&&_unbindEvent(a,b,c[0])}),delete _eventData[d],_removeId(a)));if(_eventData[d]){var e=_eventData[d][b];if(e&&e.length>0){c===undefined?(_unbindEvent(a,b,e[0]),delete _eventData[d][b]):(_each(e,function(a,b){a>0&&b===c&&e.splice(a,1)}),1==e.length&&(_unbindEvent(a,b,e[0]),delete _eventData[d][b]));var f=0;_each(_eventData[d],function(){f++}),2>f&&(delete _eventData[d],_removeId(a))}}}}function _fire(a,b){if(b.indexOf(",")>=0)return void _each(b.split(","),function(){_fire(a,this)});var c=_getId(a);if(c){var d=_eventData[c][b];_eventData[c]&&d&&d.length>0&&d[0]()}}function _ctrl(a,b,c){b=/^\d{2,}$/.test(b)?b:b.toUpperCase().charCodeAt(0),_bind(a,"keydown",function(d){!d.ctrlKey||d.which!=b||d.shiftKey||d.altKey||(c.call(a),d.stop())})}function _ready(a){function b(){e||(e=!0,a(KindEditor))}function c(){if(!e){try{document.documentElement.doScroll("left")}catch(a){return void setTimeout(c,100)}b()}}function d(){"complete"===document.readyState&&b()}var e=!1;if(document.addEventListener)_bind(document,"DOMContentLoaded",b);else if(document.attachEvent){_bind(document,"readystatechange",d);var f=!1;try{f=null==window.frameElement}catch(g){}document.documentElement.doScroll&&f&&c()}_bind(window,"load",b)}function _getCssList(a){for(var b,c={},d=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g;b=d.exec(a);){var e=_trim(b[1].toLowerCase()),f=_trim(_toHex(b[2]));c[e]=f}return c}function _getAttrList(a){for(var b,c={},d=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g;b=d.exec(a);){var e=(b[1]||b[2]||b[4]||b[6]).toLowerCase(),f=(b[2]?b[3]:b[4]?b[5]:b[7])||"";c[e]=f}return c}function _addClassToTag(a,b){return a=/\s+class\s*=/.test(a)?a.replace(/(\s+class=["']?)([^"']*)(["']?[\s>])/,function(a,c,d,e){return(" "+d+" ").indexOf(" "+b+" ")<0?""===d?c+b+e:c+d+" "+b+e:a}):a.substr(0,a.length-1)+' class="'+b+'">'}function _formatCss(a){var b="";return _each(_getCssList(a),function(a,c){b+=a+":"+c+";"}),b}function _formatUrl(a,b,c,d){function e(a){for(var b=a.split("/"),c=[],d=0,e=b.length;e>d;d++){var f=b[d];".."==f?c.length>0&&c.pop():""!==f&&"."!=f&&c.push(f)}return"/"+c.join("/")}function f(b,c){if(a.substr(0,b.length)===b){for(var e=[],g=0;c>g;g++)e.push("..");var i=".";return e.length>0&&(i+="/"+e.join("/")),"/"==d&&(i+="/"),i+a.substr(b.length)}return(h=/^(.*)\//.exec(b))?f(h[1],++c):void 0}if(b=_undef(b,"").toLowerCase(),"data:"!=a.substr(0,5)&&(a=a.replace(/([^:])\/\//g,"$1/")),_inArray(b,["absolute","relative","domain"])<0)return a;if(c=c||location.protocol+"//"+location.host,d===undefined){var g=location.pathname.match(/^(\/.*)\//);d=g?g[1]:""}var h;if(h=/^(\w+:\/\/[^\/]*)/.exec(a)){if(h[1]!==c)return a}else if(/^\w+:/.test(a))return a;return/^\//.test(a)?a=c+e(a.substr(1)):/^\w+:\/\//.test(a)||(a=c+e(d+"/"+a)),"relative"===b?a=f(c+d,0).substr(2):"absolute"===b&&a.substr(0,c.length)===c&&(a=a.substr(c.length)),a}function _formatHtml(a,b,c,d,e){c=c||"",d=_undef(d,!1),e=_undef(e,"	");var f="xx-small,x-small,small,medium,large,x-large,xx-large".split(",");a=a.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/gi,function(a,b,c,d){return b+c.replace(/<(?:br|br\s[^>]*)>/gi,"\n")+d}),a=a.replace(/<(?:br|br\s[^>]*)\s*\/?>\s*<\/p>/gi,"</p>"),a=a.replace(/(<(?:p|p\s[^>]*)>)\s*(<\/p>)/gi,"$1<br />$2"),a=a.replace(/\u200B/g,""),a=a.replace(/\u00A9/g,"&copy;");var g={};b&&(_each(b,function(a,b){for(var c=a.split(","),d=0,e=c.length;e>d;d++)g[c[d]]=_toMap(b)}),g.script||(a=a.replace(/(<(?:script|script\s[^>]*)>)([\s\S]*?)(<\/script>)/gi,"")),g.style||(a=a.replace(/(<(?:style|style\s[^>]*)>)([\s\S]*?)(<\/style>)/gi,"")));var h=/([ \t\n\r]*)<(\/)?([\w\-:]+)((?:\s+|(?:\s+[\w\-:]+)|(?:\s+[\w\-:]+=[^\s"'<>]+)|(?:\s+[\w\-:"]+="[^"]*")|(?:\s+[\w\-:"]+='[^']*'))*)(\/)?>([ \t\n\r]*)/g,i=[];return a=a.replace(h,function(a,h,j,k,l,m,n){var o=a,p=h||"",q=j||"",r=k.toLowerCase(),s=l||"",t=m?" "+m:"",u=n||"";if(b&&!g[r])return"";if(""===t&&_SINGLE_TAG_MAP[r]&&(t=" /"),_INLINE_TAG_MAP[r]&&(p&&(p=" "),u&&(u=" ")),_PRE_TAG_MAP[r]&&(q?u="\n":p="\n"),d&&"br"==r&&(u="\n"),_BLOCK_TAG_MAP[r]&&!_PRE_TAG_MAP[r])if(d){q&&i.length>0&&i[i.length-1]===r?i.pop():i.push(r),p="\n",u="\n";for(var v=0,w=q?i.length:i.length-1;w>v;v++)p+=e,q||(u+=e);t?i.pop():q||(u+=e)}else p=u="";if(""!==s){var x=_getAttrList(o);if("font"===r){var y={},z="";_each(x,function(a,b){"color"===a&&(y.color=b,delete x[a]),"size"===a&&(y["font-size"]=f[parseInt(b,10)-1]||"",delete x[a]),"face"===a&&(y["font-family"]=b,delete x[a]),"style"===a&&(z=b)}),z&&!/;$/.test(z)&&(z+=";"),_each(y,function(a,b){""!==b&&(/\s/.test(b)&&(b="'"+b+"'"),z+=a+":"+b+";")}),x.style=z}_each(x,function(a,d){if(_FILL_ATTR_MAP[a]&&(x[a]=a),_inArray(a,["src","href"])>=0&&(x[a]=_formatUrl(d,c)),(b&&"style"!==a&&!g[r]["*"]&&!g[r][a]||"body"===r&&"contenteditable"===a||/^kindeditor_\d+$/.test(a))&&delete x[a],"style"===a&&""!==d){var e=_getCssList(d);_each(e,function(a){!b||g[r].style||g[r]["."+a]||delete e[a]});var f="";_each(e,function(a,b){f+=a+":"+b+";"}),x.style=f}}),s="",_each(x,function(a,b){("style"!==a||""!==b)&&(b=b.replace(/"/g,"&quot;"),s+=" "+a+'="'+b+'"')})}return"font"===r&&(r="span"),p+"<"+q+r+s+t+">"+u}),a=a.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/gi,function(a,b,c,d){return b+c.replace(/\n/g,'<span id="__kindeditor_pre_newline__">\n')+d}),a=a.replace(/\n\s*\n/g,"\n"),a=a.replace(/<span id="__kindeditor_pre_newline__">\n/g,"\n"),_trim(a)}function _clearMsWord(a,b){return a=a.replace(/<meta[\s\S]*?>/gi,"").replace(/<![\s\S]*?>/gi,"").replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<w:[^>]+>[\s\S]*?<\/w:[^>]+>/gi,"").replace(/<o:[^>]+>[\s\S]*?<\/o:[^>]+>/gi,"").replace(/<xml>[\s\S]*?<\/xml>/gi,"").replace(/<(?:table|td)[^>]*>/gi,function(a){return a.replace(/border-bottom:([#\w\s]+)/gi,"border:$1")}),_formatHtml(a,b)}function _mediaType(a){return/\.(rm|rmvb)(\?|$)/i.test(a)?"audio/x-pn-realaudio-plugin":/\.(swf|flv)(\?|$)/i.test(a)?"application/x-shockwave-flash":"video/x-ms-asf-plugin"}function _mediaClass(a){return/realaudio/i.test(a)?"ke-rm":/flash/i.test(a)?"ke-flash":"ke-media"}function _mediaAttrs(a){return _getAttrList(unescape(a))}function _mediaEmbed(a){var b="<embed ";return _each(a,function(a,c){b+=a+'="'+c+'" '}),b+="/>"}function _mediaImg(a,b){var c=b.width,d=b.height,e=b.type||_mediaType(b.src),f=_mediaEmbed(b),g="";c>0&&(g+="width:"+c+"px;"),d>0&&(g+="height:"+d+"px;");var h='<img class="'+_mediaClass(e)+'" src="'+a+'" ';return""!==g&&(h+='style="'+g+'" '),h+='data-ke-tag="'+escape(f)+'" alt="" />'}function _tmpl(a,b){var c=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return b?c(b):c}function _contains(a,b){if(9==a.nodeType&&9!=b.nodeType)return!0;for(;b=b.parentNode;)if(b==a)return!0;return!1}function _getAttr(a,b){b=b.toLowerCase();var c=null;if(_GET_SET_ATTRIBUTE||"script"==a.nodeName.toLowerCase())try{c=a.getAttribute(b,2)}catch(d){c=a.getAttribute(b,1)}else{var e=a.ownerDocument.createElement("div");e.appendChild(a.cloneNode(!1));var f=_getAttrList(_unescape(e.innerHTML));b in f&&(c=f[b])}return"style"===b&&null!==c&&(c=_formatCss(c)),c}function _queryAll(a,b){function c(a){return"string"!=typeof a?a:a.replace(/([^\w\-])/g,"\\$1")}function d(a){return a.replace(/\\/g,"")}function e(a,b){return"*"===a||a.toLowerCase()===c(b.toLowerCase())}function f(a,b,c){var f=[],g=c.ownerDocument||c,h=g.getElementById(d(a));return h&&e(b,h.nodeName)&&_contains(c,h)&&f.push(h),f}function g(a,b,c){var f,g,h,i,j=c.ownerDocument||c,k=[];if(c.getElementsByClassName)for(f=c.getElementsByClassName(d(a)),g=0,h=f.length;h>g;g++)i=f[g],e(b,i.nodeName)&&k.push(i);else if(j.querySelectorAll)for(f=j.querySelectorAll(("#document"!==c.nodeName?c.nodeName+" ":"")+b+"."+a),g=0,h=f.length;h>g;g++)i=f[g],_contains(c,i)&&k.push(i);else for(f=c.getElementsByTagName(b),a=" "+a+" ",g=0,h=f.length;h>g;g++)if(i=f[g],1==i.nodeType){var l=i.className;l&&(" "+l+" ").indexOf(a)>-1&&k.push(i)}return k}function h(a,b,c){for(var f,g=[],h=c.ownerDocument||c,i=h.getElementsByName(d(a)),j=0,k=i.length;k>j;j++)f=i[j],e(b,f.nodeName)&&_contains(c,f)&&f.getAttributeNode("name")&&g.push(f);return g}function i(a,b,d,e){for(var f,g=[],h=e.getElementsByTagName(d),i=0,j=h.length;j>i;i++)f=h[i],1==f.nodeType&&(null===b?null!==_getAttr(f,a)&&g.push(f):b===c(_getAttr(f,a))&&g.push(f));return g}function j(a,b){var c,d=[];c=/^((?:\\.|[^.#\s\[<>])+)/.exec(a);var e=c?c[1]:"*";if(c=/#((?:[\w\-]|\\.)+)$/.exec(a))d=f(c[1],e,b);else if(c=/\.((?:[\w\-]|\\.)+)$/.exec(a))d=g(c[1],e,b);else if(c=/\[((?:[\w\-]|\\.)+)\]/.exec(a))d=i(c[1].toLowerCase(),null,e,b);else if(c=/\[((?:[\w\-]|\\.)+)\s*=\s*['"]?((?:\\.|[^'"]+)+)['"]?\]/.exec(a)){var j=c[1].toLowerCase(),k=c[2];d="id"===j?f(k,e,b):"class"===j?g(k,e,b):"name"===j?h(k,e,b):i(j,k,e,b)}else for(var l,m=b.getElementsByTagName(e),n=0,o=m.length;o>n;n++)l=m[n],1==l.nodeType&&d.push(l);return d}var k=a.split(",");if(k.length>1){var l=[];return _each(k,function(){_each(_queryAll(this,b),function(){_inArray(this,l)<0&&l.push(this)})}),l}b=b||document;for(var m,n=[],o=/((?:\\.|[^\s>])+|[\s>])/g;m=o.exec(a);)" "!==m[1]&&n.push(m[1]);var p=[];if(1==n.length)return j(n[0],b);var q,r,s,t,u,v,w,x,y,z,A=!1;for(v=0,lenth=n.length;lenth>v;v++)if(q=n[v],">"!==q){if(v>0){for(r=[],w=0,y=p.length;y>w;w++)for(t=p[w],s=j(q,t),x=0,z=s.length;z>x;x++)u=s[x],A?t===u.parentNode&&r.push(u):r.push(u);p=r}else p=j(q,b);if(0===p.length)return[]}else A=!0;return p}function _query(a,b){var c=_queryAll(a,b);return c.length>0?c[0]:null}function _get(a){return K(a)[0]}function _getDoc(a){return a?a.ownerDocument||a.document||a:document}function _getWin(a){if(!a)return window;var b=_getDoc(a);return b.parentWindow||b.defaultView}function _setHtml(a,b){if(1==a.nodeType){var c=_getDoc(a);try{a.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+b;var d=c.getElementById("__kindeditor_temp_tag__");d.parentNode.removeChild(d)}catch(e){K(a).empty(),K("@"+b,c).each(function(){a.appendChild(this)})}}}function _hasClass(a,b){return _inString(b,a.className," ")}function _setAttr(a,b,c){_IE&&8>_V&&"class"==b.toLowerCase()&&(b="className"),a.setAttribute(b,""+c)}function _removeAttr(a,b){_IE&&8>_V&&"class"==b.toLowerCase()&&(b="className"),_setAttr(a,b,""),a.removeAttribute(b)}function _getNodeName(a){return a&&a.nodeName?a.nodeName.toLowerCase():""}function _computedCss(a,b){var c=_getWin(a),d=_toCamel(b),e="";if(c.getComputedStyle){var f=c.getComputedStyle(a,null);e=f[d]||f.getPropertyValue(b)||a.style[d]}else a.currentStyle&&(e=a.currentStyle[d]||a.style[d]);return e}function _hasVal(a){return!!_VALUE_TAG_MAP[_getNodeName(a)]}function _docElement(a){return a=a||document,_QUIRKS?a.body:a.documentElement}function _docHeight(a){var b=_docElement(a);return Math.max(b.scrollHeight,b.clientHeight)}function _docWidth(a){var b=_docElement(a);return Math.max(b.scrollWidth,b.clientWidth)}function _getScrollPos(a){a=a||document;var b,c;return _IE||_OPERA?(b=_docElement(a).scrollLeft,c=_docElement(a).scrollTop):(b=_getWin(a).scrollX,c=_getWin(a).scrollY),{x:b,y:c}}function KNode(a){this.init(a)}function _updateCollapsed(a){return a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a}function _copyAndDelete(a,b,c){function d(d,e,f){var g,i=d.nodeValue.length;if(b){var j=d.cloneNode(!0);g=e>0?j.splitText(e):j,i>f&&g.splitText(f-e)}if(c){var k=d;if(e>0&&(k=d.splitText(e),a.setStart(d,e)),i>f){var l=k.splitText(f-e);a.setEnd(l,0)}h.push(k)}return g}function e(){c&&a.up().collapse(!0);for(var b=0,d=h.length;d>b;b++){var e=h[b];e.parentNode&&e.parentNode.removeChild(e)}}function f(e,n){for(var o,p=e.firstChild;p;){var q=new KRange(g).selectNode(p);if(j=q.compareBoundaryPoints(_START_TO_END,a),j>=0&&0>=k&&(k=q.compareBoundaryPoints(_START_TO_START,a)),k>=0&&0>=l&&(l=q.compareBoundaryPoints(_END_TO_END,a)),l>=0&&0>=m&&(m=q.compareBoundaryPoints(_END_TO_START,a)),m>=0)return!1;if(o=p.nextSibling,j>0)if(1==p.nodeType)if(k>=0&&0>=l)b&&n.appendChild(p.cloneNode(!0)),c&&h.push(p);else{var r;if(b&&(r=p.cloneNode(!1),n.appendChild(r)),f(p,r)===!1)return!1}else if(3==p.nodeType){var s;if(s=p==i.startContainer?d(p,i.startOffset,p.nodeValue.length):p==i.endContainer?d(p,0,i.endOffset):d(p,0,p.nodeValue.length),b)try{n.appendChild(s)}catch(t){}}p=o}}var g=a.doc,h=[],i=a.cloneRange().down(),j=-1,k=-1,l=-1,m=-1,n=a.commonAncestor(),o=g.createDocumentFragment();if(3==n.nodeType){var p=d(n,a.startOffset,a.endOffset);return b&&o.appendChild(p),e(),b?o:a}f(n,o),c&&a.up().collapse(!0);for(var q=0,r=h.length;r>q;q++){var s=h[q];s.parentNode&&s.parentNode.removeChild(s)}return b?o:a}function _moveToElementText(a,b){for(var c=b;c;){var d=K(c);if("marquee"==d.name||"select"==d.name)return;c=c.parentNode}try{a.moveToElementText(b)}catch(e){}}function _getStartEnd(a,b){var c=a.parentElement().ownerDocument,d=a.duplicate();d.collapse(b);var e=d.parentElement(),f=e.childNodes;if(0===f.length)return{node:e.parentNode,offset:K(e).index()};var g=c,h=0,i=-1,j=a.duplicate();_moveToElementText(j,e);for(var k=0,l=f.length;l>k;k++){var m=f[k];if(i=j.compareEndPoints("StartToStart",d),0===i)return{node:m.parentNode,offset:k};if(1==m.nodeType){var n,o=a.duplicate(),p=K(m),q=m;p.isControl()&&(n=c.createElement("span"),p.after(n),q=n,h+=p.text().replace(/\r\n|\n|\r/g,"").length),_moveToElementText(o,q),j.setEndPoint("StartToEnd",o),i>0?h+=o.text.replace(/\r\n|\n|\r/g,"").length:h=0,n&&K(n).remove()}else 3==m.nodeType&&(j.moveStart("character",m.nodeValue.length),h+=m.nodeValue.length);0>i&&(g=m)}if(0>i&&1==g.nodeType)return{node:e,offset:K(e.lastChild).index()+1};if(i>0)for(;g.nextSibling&&1==g.nodeType;)g=g.nextSibling;if(j=a.duplicate(),_moveToElementText(j,e),j.setEndPoint("StartToEnd",d),h-=j.text.replace(/\r\n|\n|\r/g,"").length,i>0&&3==g.nodeType)for(var r=g.previousSibling;r&&3==r.nodeType;)h-=r.nodeValue.length,r=r.previousSibling;return{node:g,offset:h}}function _getEndRange(a,b){var c=a.ownerDocument||a,d=c.body.createTextRange();if(c==a)return d.collapse(!0),d;if(1==a.nodeType&&a.childNodes.length>0){var e,f,g=a.childNodes;if(0===b?(f=g[0],e=!0):(f=g[b-1],e=!1),!f)return d;if("head"===K(f).name)return 1===b&&(e=!0),2===b&&(e=!1),d.collapse(e),d;if(1==f.nodeType){var h,i=K(f);return i.isControl()&&(h=c.createElement("span"),e?i.before(h):i.after(h),f=h),_moveToElementText(d,f),d.collapse(e),h&&K(h).remove(),d}a=f,b=e?0:f.nodeValue.length}var j=c.createElement("span");return K(a).before(j),_moveToElementText(d,j),d.moveStart("character",b),K(j).remove(),d}function _toRange(a){function b(a){"tr"==K(a.node).name&&(a.node=a.node.cells[a.offset],a.offset=0)}var c,d;if(_IE){if(a.item)return c=_getDoc(a.item(0)),d=new KRange(c),d.selectNode(a.item(0)),d;c=a.parentElement().ownerDocument;var e=_getStartEnd(a,!0),f=_getStartEnd(a,!1);return b(e),b(f),d=new KRange(c),d.setStart(e.node,e.offset),d.setEnd(f.node,f.offset),d}var g=a.startContainer;return c=g.ownerDocument||g,d=new KRange(c),d.setStart(g,a.startOffset),d.setEnd(a.endContainer,a.endOffset),d}function KRange(a){this.init(a)}function _range(a){return a.nodeName?new KRange(a):a.constructor===KRange?a:_toRange(a)}function _nativeCommand(a,b,c){try{a.execCommand(b,!1,c)}catch(d){}}function _nativeCommandValue(a,b){var c="";try{c=a.queryCommandValue(b)}catch(d){}return"string"!=typeof c&&(c=""),c}function _getSel(a){var b=_getWin(a);return a.selection||b.getSelection()}function _getRng(a){var b,c=_getSel(a);try{b=c.rangeCount>0?c.getRangeAt(0):c.createRange()}catch(d){}return!_IE||b&&(b.item||b.parentElement().ownerDocument===a)?b:null}function _singleKeyMap(a){var b,c,d={};return _each(a,function(a,e){b=a.split(",");for(var f=0,g=b.length;g>f;f++)c=b[f],d[c]=e}),d}function _hasAttrOrCss(a,b){return _hasAttrOrCssByKey(a,b,"*")||_hasAttrOrCssByKey(a,b)}function _hasAttrOrCssByKey(a,b,c){if(c=c||a.name,1!==a.type)return!1;var d=_singleKeyMap(b);if(!d[c])return!1;for(var e=d[c].split(","),f=0,g=e.length;g>f;f++){var h=e[f];if("*"===h)return!0;var i=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(h),j=i[1]?"css":"attr";h=i[2];var k=i[3]||"";if(""===k&&""!==a[j](h))return!0;if(""!==k&&a[j](h)===k)return!0}return!1}function _removeAttrOrCss(a,b){1==a.type&&(_removeAttrOrCssByKey(a,b,"*"),_removeAttrOrCssByKey(a,b))}function _removeAttrOrCssByKey(a,b,c){if(c=c||a.name,1===a.type){var d=_singleKeyMap(b);if(d[c]){for(var e=d[c].split(","),f=!1,g=0,h=e.length;h>g;g++){var i=e[g];if("*"===i){f=!0;break}var j=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(i);i=j[2],j[1]?(i=_toCamel(i),a[0].style[i]&&(a[0].style[i]="")):a.removeAttr(i)}f&&a.remove(!0)}}}function _getInnerNode(a){for(var b=a;b.first();)b=b.first();return b}function _isEmptyNode(a){return 1!=a.type||a.isSingle()?!1:""===a.html().replace(/<[^>]+>/g,"")}function _mergeWrapper(a,b){a=a.clone(!0);for(var c=_getInnerNode(a),d=a,e=!1;b;){for(;d;)d.name===b.name&&(_mergeAttrs(d,b.attr(),b.css()),e=!0),d=d.first();e||c.append(b.clone(!1)),e=!1,b=b.first()}return a}function _wrapNode(a,b){if(b=b.clone(!0),3==a.type)return _getInnerNode(b).append(a.clone(!1)),a.replaceWith(b),b;for(var c,d=a;(c=a.first())&&1==c.children().length;)a=c;c=a.first();for(var e=a.doc.createDocumentFragment();c;)e.appendChild(c[0]),c=c.next();return b=_mergeWrapper(d,b),e.firstChild&&_getInnerNode(b).append(e),d.replaceWith(b),b}function _mergeAttrs(a,b,c){_each(b,function(b,c){"style"!==b&&a.attr(b,c)}),_each(c,function(b,c){a.css(b,c)})}function _inPreElement(a){for(;a&&"body"!=a.name;){if(_PRE_TAG_MAP[a.name]||"div"==a.name&&a.hasClass("ke-script"))return!0;a=a.parent()}return!1}function KCmd(a){this.init(a)}function _cmd(a){if(a.nodeName){var b=_getDoc(a);a=_range(b).selectNodeContents(b.body).collapse(!1)}return new KCmd(a)}function _drag(a){var b=a.moveEl,c=a.moveFn,d=a.clickEl||b,e=a.beforeDrag,f=a.iframeFix===undefined?!0:a.iframeFix,g=[document];f&&K("iframe").each(function(){var a=_formatUrl(this.src||"","absolute");if(!/^https?:\/\//.test(a)){var b;try{b=_iframeDoc(this)}catch(c){}if(b){var d=K(this).pos();K(b).data("pos-x",d.x),K(b).data("pos-y",d.y),g.push(b)}}}),d.mousedown(function(a){function f(a){a.preventDefault();var b=K(_getDoc(a.target)),e=_round((b.data("pos-x")||0)+a.pageX-o),f=_round((b.data("pos-y")||0)+a.pageY-p);c.call(d,k,l,m,n,e,f)}function h(a){a.preventDefault()}function i(a){a.preventDefault(),K(g).unbind("mousemove",f).unbind("mouseup",i).unbind("selectstart",h),j.releaseCapture&&j.releaseCapture()}a.stopPropagation();var j=d.get(),k=_removeUnit(b.css("left")),l=_removeUnit(b.css("top")),m=b.width(),n=b.height(),o=a.pageX,p=a.pageY;e&&e(),K(g).mousemove(f).mouseup(i).bind("selectstart",h),j.setCapture&&j.setCapture()})}function KWidget(a){this.init(a)}function _widget(a){return new KWidget(a)}function _iframeDoc(a){return a=_get(a),a.contentDocument||a.contentWindow.document}function _getInitHtml(a,b,c,d){var e=[""===_direction?"<html>":'<html dir="'+_direction+'">','<head><meta charset="utf-8" /><title></title>',"<style>","html {margin:0;padding:0;}","body {margin:0;padding:5px;}",'body, td {font:12px/1.5 "sans serif",tahoma,verdana,helvetica;}',"body, p, div {word-wrap: break-word;}","p {margin:5px 0;}","table {border-collapse:collapse;}","img {border:0;}","noscript {display:none;}","table.ke-zeroborder td {border:1px dotted #AAA;}","img.ke-flash {","	border:1px solid #AAA;","	background-image:url("+a+"common/flash.gif);","	background-position:center center;","	background-repeat:no-repeat;","	width:100px;","	height:100px;","}","img.ke-rm {","	border:1px solid #AAA;","	background-image:url("+a+"common/rm.gif);","	background-position:center center;","	background-repeat:no-repeat;","	width:100px;","	height:100px;","}","img.ke-media {","	border:1px solid #AAA;","	background-image:url("+a+"common/media.gif);","	background-position:center center;","	background-repeat:no-repeat;","	width:100px;","	height:100px;","}","img.ke-anchor {","	border:1px dashed #666;","	width:16px;","	height:16px;","}",".ke-script, .ke-noscript, .ke-display-none {","	display:none;","	font-size:0;","	width:0;","	height:0;","}",".ke-pagebreak {","	border:1px dotted #AAA;","	font-size:0;","	height:2px;","}","</style>"];
return _isArray(c)||(c=[c]),_each(c,function(a,b){b&&e.push('<link href="'+b+'" rel="stylesheet" />')}),d&&e.push("<style>"+d+"</style>"),e.push("</head><body "+(b?'class="'+b+'"':"")+"></body></html>"),e.join("\n")}function _elementVal(a,b){if(a.hasVal()){if(b===undefined){var c=a.val();return c=c.replace(/(<(?:p|p\s[^>]*)>) *(<\/p>)/gi,"")}return a.val(b)}return a.html(b)}function KEdit(a){this.init(a)}function _edit(a){return new KEdit(a)}function _selectToolbar(a,b){var c=this,d=c.get(a);if(d){if(d.hasClass("ke-disabled"))return;b(d)}}function KToolbar(a){this.init(a)}function _toolbar(a){return new KToolbar(a)}function KMenu(a){this.init(a)}function _menu(a){return new KMenu(a)}function KColorPicker(a){this.init(a)}function _colorpicker(a){return new KColorPicker(a)}function KUploadButton(a){this.init(a)}function _uploadbutton(a){return new KUploadButton(a)}function _createButton(a){a=a||{};var b=a.name||"",c=K('<span class="ke-button-common ke-button-outer" title="'+b+'"></span>'),d=K('<input class="ke-button-common ke-button" type="button" value="'+b+'" />');return a.click&&d.click(a.click),c.append(d),c}function KDialog(a){this.init(a)}function _dialog(a){return new KDialog(a)}function _tabs(a){var b=_widget(a),c=b.remove,d=a.afterSelect,e=b.div,f=[];e.addClass("ke-tabs").bind("contextmenu,mousedown,mousemove",function(a){a.preventDefault()});var g=K('<ul class="ke-tabs-ul ke-clearfix"></ul>');return e.append(g),b.add=function(a){var b=K('<li class="ke-tabs-li">'+a.title+"</li>");b.data("tab",a),f.push(b),g.append(b)},b.selectedIndex=0,b.select=function(a){b.selectedIndex=a,_each(f,function(c,d){d.unbind(),c===a?(d.addClass("ke-tabs-li-selected"),K(d.data("tab").panel).show("")):(d.removeClass("ke-tabs-li-selected").removeClass("ke-tabs-li-on").mouseover(function(){K(this).addClass("ke-tabs-li-on")}).mouseout(function(){K(this).removeClass("ke-tabs-li-on")}).click(function(){b.select(c)}),K(d.data("tab").panel).hide())}),d&&d.call(b,a)},b.remove=function(){_each(f,function(){this.remove()}),g.remove(),c.call(b)},b}function _loadScript(a,b){var c=document.getElementsByTagName("head")[0]||(_QUIRKS?document.body:document.documentElement),d=document.createElement("script");c.appendChild(d),d.src=a,d.charset="utf-8",d.onload=d.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState||(b&&b(),d.onload=d.onreadystatechange=null,c.removeChild(d))}}function _chopQuery(a){var b=a.indexOf("?");return b>0?a.substr(0,b):a}function _loadStyle(a){for(var b=document.getElementsByTagName("head")[0]||(_QUIRKS?document.body:document.documentElement),c=document.createElement("link"),d=_chopQuery(_formatUrl(a,"absolute")),e=K('link[rel="stylesheet"]',b),f=0,g=e.length;g>f;f++)if(_chopQuery(_formatUrl(e[f].href,"absolute"))===d)return;b.appendChild(c),c.href=a,c.rel="stylesheet"}function _ajax(a,b,c,d,e){c=c||"GET",e=e||"json";var f=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(f.open(c,a,!0),f.onreadystatechange=function(){if(4==f.readyState&&200==f.status&&b){var a=_trim(f.responseText);"json"==e&&(a=_json(a)),b(a)}},"POST"==c){var g=[];_each(d,function(a,b){g.push(encodeURIComponent(a)+"="+encodeURIComponent(b))});try{f.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}catch(h){}f.send(g.join("&"))}else f.send(null)}function _plugin(a,b){return a===undefined?_plugins:b?void(_plugins[a]=b):_plugins[a]}function _parseLangKey(a){var b,c="core";return(b=/^(\w+)\.(\w+)$/.exec(a))&&(c=b[1],a=b[2]),{ns:c,key:a}}function _lang(a,b){if(b=b===undefined?K.options.langType:b,"string"==typeof a){if(!_language[b])return"no language";var c=a.length-1;if("."===a.substr(c))return _language[b][a.substr(0,c)];var d=_parseLangKey(a);return _language[b][d.ns][d.key]}_each(a,function(a,c){var d=_parseLangKey(a);_language[b]||(_language[b]={}),_language[b][d.ns]||(_language[b][d.ns]={}),_language[b][d.ns][d.key]=c})}function _getImageFromRange(a,b){if(!a.collapsed){a=a.cloneRange().up();var c=a.startContainer,d=a.startOffset;if(_WEBKIT||a.isControl()){var e=K(c.childNodes[d]);if(e&&"img"==e.name)return b(e)?e:void 0}}}function _bindContextmenuEvent(){var a=this,b=a.edit.doc;K(b).contextmenu(function(b){if(a.menu&&a.hideMenu(),!a.useContextmenu)return void b.preventDefault();if(0!==a._contextmenus.length){var c=0,d=[];for(_each(a._contextmenus,function(){return"-"==this.title?void d.push(this):void(this.cond&&this.cond()&&(d.push(this),this.width&&this.width>c&&(c=this.width)))});d.length>0&&"-"==d[0].title;)d.shift();for(;d.length>0&&"-"==d[d.length-1].title;)d.pop();var e=null;if(_each(d,function(a){"-"==this.title&&"-"==e.title&&delete d[a],e=this}),d.length>0){b.preventDefault();var f=K(a.edit.iframe).pos(),g=_menu({x:f.x+b.clientX,y:f.y+b.clientY,width:c,css:{visibility:"hidden"},shadowMode:a.shadowMode});_each(d,function(){this.title&&g.addItem(this)});var h=_docElement(g.doc),i=g.div.height();b.clientY+i>=h.clientHeight-100&&g.pos(g.x,_removeUnit(g.y)-i),g.div.css("visibility","visible"),a.menu=g}}})}function _bindNewlineEvent(){function a(a){for(var b=K(a.commonAncestor());b&&(1!=b.type||b.isStyle());)b=b.parent();return b.name}var b=this,c=b.edit.doc,d=b.newlineTag;if(!(_IE&&"br"!==d||_GECKO&&3>_V&&"p"!==d||_OPERA&&9>_V)){var e=_toMap("h1,h2,h3,h4,h5,h6,pre,li"),f=_toMap("p,h1,h2,h3,h4,h5,h6,pre,li,blockquote");K(c).keydown(function(g){if(!(13!=g.which||g.shiftKey||g.ctrlKey||g.altKey)){b.cmd.selection();var h=a(b.cmd.range);if("marquee"!=h&&"select"!=h)return"br"!==d||e[h]?void(f[h]||_nativeCommand(c,"formatblock","<p>")):(g.preventDefault(),void b.insertHtml("<br />"+(_IE&&9>_V?"":"​")))}}),K(c).keyup(function(e){if(!(13!=e.which||e.shiftKey||e.ctrlKey||e.altKey)&&"br"!=d){if(_GECKO){var g=b.cmd.commonAncestor("p"),h=b.cmd.commonAncestor("a");return void(h&&""==h.text()&&(h.remove(!0),b.cmd.range.selectNodeContents(g[0]).collapse(!0),b.cmd.select()))}b.cmd.selection();var i=a(b.cmd.range);if("marquee"!=i&&"select"!=i){f[i]||_nativeCommand(c,"formatblock","<p>");var j=b.cmd.commonAncestor("div");if(j){for(var k=K("<p></p>"),l=j[0].firstChild;l;){var m=l.nextSibling;k.append(l),l=m}j.before(k),j.remove(),b.cmd.range.selectNodeContents(k[0]),b.cmd.select()}}}})}}function _bindTabEvent(){var a=this,b=a.edit.doc;K(b).keydown(function(c){if(9==c.which){if(c.preventDefault(),a.afterTab)return void a.afterTab.call(a,c);var d=a.cmd,e=d.range;e.shrink(),e.collapsed&&1==e.startContainer.nodeType&&(e.insertNode(K("@&nbsp;",b)[0]),d.select()),a.insertHtml("&nbsp;&nbsp;&nbsp;&nbsp;")}})}function _bindFocusEvent(){var a=this;K(a.edit.textarea[0],a.edit.win).focus(function(b){a.afterFocus&&a.afterFocus.call(a,b)}).blur(function(b){a.afterBlur&&a.afterBlur.call(a,b)})}function _removeBookmarkTag(a){return _trim(a.replace(/<span [^>]*id="?__kindeditor_bookmark_\w+_\d+__"?[^>]*><\/span>/gi,""))}function _removeTempTag(a){return a.replace(/<div[^>]+class="?__kindeditor_paste__"?[^>]*>[\s\S]*?<\/div>/gi,"")}function _addBookmarkToStack(a,b){if(0===a.length)return void a.push(b);var c=a[a.length-1];_removeBookmarkTag(b.html)!==_removeBookmarkTag(c.html)&&a.push(b)}function _undoToRedo(a,b){var c,d,e=this,f=e.edit,g=f.doc.body;if(0===a.length)return e;f.designMode?(c=e.cmd.range,d=c.createBookmark(!0),d.html=g.innerHTML):d={html:g.innerHTML},_addBookmarkToStack(b,d);var h=a.pop();return _removeBookmarkTag(d.html)===_removeBookmarkTag(h.html)&&a.length>0&&(h=a.pop()),f.designMode?(f.html(h.html),h.start&&(c.moveToBookmark(h),e.select())):K(g).html(_removeBookmarkTag(h.html)),e}function KEditor(a){function b(a,b){KEditor.prototype[a]===undefined&&(c[a]=b),c.options[a]=b}var c=this;c.options={},_each(a,function(c){b(c,a[c])}),_each(K.options,function(a,d){c[a]===undefined&&b(a,d)});var d=K(c.srcElement||"<textarea/>");c.width||(c.width=d[0].style.width||d.width()),c.height||(c.height=d[0].style.height||d.height()),b("width",_undef(c.width,c.minWidth)),b("height",_undef(c.height,c.minHeight)),b("width",_addUnit(c.width)),b("height",_addUnit(c.height)),_MOBILE&&(!_IOS||534>_V)&&(c.designMode=!1),c.srcElement=d,c.initContent="",c.plugin={},c.isCreated=!1,c.isLoading=!1,c._handlers={},c._contextmenus=[],c._undoStack=[],c._redoStack=[],c._calledPlugins={},c._firstAddBookmark=!0,c.menu=c.contextmenu=null,c.dialogs=[]}function _editor(a){return new KEditor(a)}function _create(a,b){function c(a){return _each(_plugins,function(b,c){c.call(a,KindEditor)}),a.create()}if(b=b||{},b.basePath=_undef(b.basePath,K.basePath),b.themesPath=_undef(b.themesPath,b.basePath+"themes/"),b.langPath=_undef(b.langPath,b.basePath+"lang/"),b.pluginsPath=_undef(b.pluginsPath,b.basePath+"plugins/"),_undef(b.loadStyleMode,K.options.loadStyleMode)){var d=_undef(b.themeType,K.options.themeType);_loadStyle(b.themesPath+"default/default.css"),_loadStyle(b.themesPath+d+"/"+d+".css")}var e=K(a);if(e&&0!==e.length){if(e.length>1)return e.each(function(){_create(this,b)}),_instances[0];b.srcElement=e[0];var f=new KEditor(b);return _instances.push(f),_language[f.langType]?c(f):(_loadScript(f.langPath+f.langType+".js?ver="+encodeURIComponent(K.DEBUG?_TIME:_VERSION),function(){c(f)}),f)}}function _eachEditor(a,b){K(a).each(function(a,c){K.each(_instances,function(a,d){return d&&d.srcElement[0]==c?(b.call(d,a,d),!1):void 0})})}if(!window.KindEditor){window.console||(window.console={}),console.log||(console.log=function(){});var _VERSION="4.1.7 (2013-04-21)",_ua=navigator.userAgent.toLowerCase(),_IE=_ua.indexOf("msie")>-1&&-1==_ua.indexOf("opera"),_GECKO=_ua.indexOf("gecko")>-1&&-1==_ua.indexOf("khtml"),_WEBKIT=_ua.indexOf("applewebkit")>-1,_OPERA=_ua.indexOf("opera")>-1,_MOBILE=_ua.indexOf("mobile")>-1,_IOS=/ipad|iphone|ipod/.test(_ua),_QUIRKS="CSS1Compat"!=document.compatMode,_matches=/(?:msie|firefox|webkit|opera)[\/:\s](\d+)/.exec(_ua),_V=_matches?_matches[1]:"0",_TIME=(new Date).getTime(),_round=Math.round,K={DEBUG:!1,VERSION:_VERSION,IE:_IE,GECKO:_GECKO,WEBKIT:_WEBKIT,OPERA:_OPERA,V:_V,TIME:_TIME,each:_each,isArray:_isArray,isFunction:_isFunction,inArray:_inArray,inString:_inString,trim:_trim,addUnit:_addUnit,removeUnit:_removeUnit,escape:_escape,unescape:_unescape,toCamel:_toCamel,toHex:_toHex,toMap:_toMap,toArray:_toArray,undef:_undef,invalidUrl:_invalidUrl,addParam:_addParam,extend:_extend,json:_json},_INLINE_TAG_MAP=_toMap("a,abbr,acronym,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,img,input,ins,kbd,label,map,q,s,samp,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),_BLOCK_TAG_MAP=_toMap("address,applet,blockquote,body,center,dd,dir,div,dl,dt,fieldset,form,frameset,h1,h2,h3,h4,h5,h6,head,hr,html,iframe,ins,isindex,li,map,menu,meta,noframes,noscript,object,ol,p,pre,script,style,table,tbody,td,tfoot,th,thead,title,tr,ul"),_SINGLE_TAG_MAP=_toMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),_STYLE_TAG_MAP=_toMap("b,basefont,big,del,em,font,i,s,small,span,strike,strong,sub,sup,u"),_CONTROL_TAG_MAP=_toMap("img,table,input,textarea,button"),_PRE_TAG_MAP=_toMap("pre,style,script"),_NOSPLIT_TAG_MAP=_toMap("html,head,body,td,tr,table,ol,ul,li"),_AUTOCLOSE_TAG_MAP=_toMap("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),_FILL_ATTR_MAP=_toMap("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),_VALUE_TAG_MAP=_toMap("input,button,textarea,select");K.basePath=_getBasePath(),K.options={designMode:!0,fullscreenMode:!1,filterMode:!0,wellFormatMode:!0,shadowMode:!0,loadStyleMode:!0,basePath:K.basePath,themesPath:K.basePath+"themes/",langPath:K.basePath+"lang/",pluginsPath:K.basePath+"plugins/",themeType:"default",langType:"zh_CN",urlType:"",newlineTag:"p",resizeType:2,syncType:"form",pasteType:2,dialogAlignType:"page",useContextmenu:!0,fullscreenShortcut:!1,bodyClass:"ke-content",indentChar:"	",cssPath:"",cssData:"",minWidth:250,minHeight:100,minChangeSize:50,zIndex:811213,items:["source","|","undo","redo","|","preview","print","template","code","cut","copy","paste","plainpaste","wordpaste","|","justifyleft","justifycenter","justifyright","justifyfull","insertorderedlist","insertunorderedlist","indent","outdent","subscript","superscript","clearhtml","quickformat","selectall","|","fullscreen","/","formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","lineheight","removeformat","|","image","multiimage","flash","media","insertfile","table","hr","emoticons","baidumap","pagebreak","anchor","link","unlink","|","about"],noDisableItems:["source","fullscreen"],colorTable:[["#E53333","#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]],fontSizeTable:["9px","10px","12px","14px","16px","18px","24px","32px"],htmlTags:{font:["id","class","color","size","face",".background-color"],span:["id","class",".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align",".line-height"],div:["id","class","align",".border",".margin",".padding",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".background",".font-style",".text-decoration",".vertical-align",".margin-left"],table:["id","class","border","cellspacing","cellpadding","width","height","align","bordercolor",".padding",".margin",".border","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".background",".width",".height",".border-collapse"],"td,th":["id","class","align","valign","width","height","colspan","rowspan","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".vertical-align",".background",".border"],a:["id","class","href","target","name"],embed:["id","class","src","width","height","type","loop","autostart","quality",".width",".height","align","allowscriptaccess"],img:["id","class","src","width","height","border","alt","title","align",".width",".height",".border"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["id","class","align",".text-align",".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align",".text-indent",".margin-left"],pre:["id","class"],hr:["id","class",".page-break-after"],"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":["id","class"],iframe:["id","class","src","frameborder","width","height",".width",".height"]},layout:'<div class="container"><div class="toolbar"></div><div class="edit"></div><div class="statusbar"></div></div>'};var _useCapture=!1,_INPUT_KEY_MAP=_toMap("8,9,13,32,46,48..57,59,61,65..90,106,109..111,188,190..192,219..222"),_CURSORMOVE_KEY_MAP=_toMap("33..40"),_CHANGE_KEY_MAP={};_each(_INPUT_KEY_MAP,function(a,b){_CHANGE_KEY_MAP[a]=b}),_each(_CURSORMOVE_KEY_MAP,function(a,b){_CHANGE_KEY_MAP[a]=b});var _EVENT_PROPS="altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,originalTarget,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which".split(",");_extend(KEvent,{init:function(a,b){var c=this,d=a.ownerDocument||a.document||a;if(c.event=b,_each(_EVENT_PROPS,function(a,d){c[d]=b[d]}),c.target||(c.target=c.srcElement||d),3===c.target.nodeType&&(c.target=c.target.parentNode),!c.relatedTarget&&c.fromElement&&(c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement),null==c.pageX&&null!=c.clientX){var e=d.documentElement,f=d.body;c.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),c.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)}switch(!c.which&&(c.charCode||0===c.charCode?c.charCode:c.keyCode)&&(c.which=c.charCode||c.keyCode),!c.metaKey&&c.ctrlKey&&(c.metaKey=c.ctrlKey),c.which||c.button===undefined||(c.which=1&c.button?1:2&c.button?3:4&c.button?2:0),c.which){case 186:c.which=59;break;case 187:case 107:case 43:c.which=61;break;case 189:case 45:c.which=109;break;case 42:c.which=106;break;case 47:c.which=111;break;case 78:c.which=110}c.which>=96&&c.which<=105&&(c.which-=48)},preventDefault:function(){var a=this.event;a.preventDefault&&a.preventDefault(),a.returnValue=!1},stopPropagation:function(){var a=this.event;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stop:function(){this.preventDefault(),this.stopPropagation()}});var _eventExpendo="kindeditor_"+_TIME,_eventId=0,_eventData={};_IE&&window.attachEvent("onunload",function(){_each(_eventData,function(a,b){b.el&&_unbind(b.el)})}),K.ctrl=_ctrl,K.ready=_ready,K.formatUrl=_formatUrl,K.formatHtml=_formatHtml,K.getCssList=_getCssList,K.getAttrList=_getAttrList,K.mediaType=_mediaType,K.mediaAttrs=_mediaAttrs,K.mediaEmbed=_mediaEmbed,K.mediaImg=_mediaImg,K.clearMsWord=_clearMsWord,K.tmpl=_tmpl;var _getSetAttrDiv=document.createElement("div");_getSetAttrDiv.setAttribute("className","t");var _GET_SET_ATTRIBUTE="t"!==_getSetAttrDiv.className;K.query=_query,K.queryAll=_queryAll,_extend(KNode,{init:function(a){var b=this;a=_isArray(a)?a:[a];for(var c=0,d=0,e=a.length;e>d;d++)a[d]&&(b[d]=a[d].constructor===KNode?a[d][0]:a[d],c++);b.length=c,b.doc=_getDoc(b[0]),b.name=_getNodeName(b[0]),b.type=b.length>0?b[0].nodeType:null,b.win=_getWin(b[0])},each:function(a){for(var b=this,c=0;c<b.length;c++)if(a.call(b[c],c,b[c])===!1)return b;return b},bind:function(a,b){return this.each(function(){_bind(this,a,b)}),this},unbind:function(a,b){return this.each(function(){_unbind(this,a,b)}),this},fire:function(a){return this.length<1?this:(_fire(this[0],a),this)},hasAttr:function(a){return this.length<1?!1:!!_getAttr(this[0],a)},attr:function(a,b){var c=this;return a===undefined?_getAttrList(c.outer()):"object"==typeof a?(_each(a,function(a,b){c.attr(a,b)}),c):b===undefined?(b=c.length<1?null:_getAttr(c[0],a),null===b?"":b):(c.each(function(){_setAttr(this,a,b)}),c)},removeAttr:function(a){return this.each(function(){_removeAttr(this,a)}),this},get:function(a){return this.length<1?null:this[a||0]},eq:function(a){return this.length<1?null:this[a]?new KNode(this[a]):null},hasClass:function(a){return this.length<1?!1:_hasClass(this[0],a)},addClass:function(a){return this.each(function(){_hasClass(this,a)||(this.className=_trim(this.className+" "+a))}),this},removeClass:function(a){return this.each(function(){_hasClass(this,a)&&(this.className=_trim(this.className.replace(new RegExp("(^|\\s)"+a+"(\\s|$)")," ")))}),this},html:function(a){var b=this;return a===undefined?b.length<1||1!=b.type?"":_formatHtml(b[0].innerHTML):(b.each(function(){_setHtml(this,a)}),b)},text:function(){var a=this;return a.length<1?"":_IE?a[0].innerText:a[0].textContent},hasVal:function(){return this.length<1?!1:_hasVal(this[0])},val:function(a){var b=this;return a===undefined?b.length<1?"":b.hasVal()?b[0].value:b.attr("value"):(b.each(function(){_hasVal(this)?this.value=a:_setAttr(this,"value",a)}),b)},css:function(a,b){var c=this;return a===undefined?_getCssList(c.attr("style")):"object"==typeof a?(_each(a,function(a,b){c.css(a,b)}),c):b===undefined?c.length<1?"":c[0].style[_toCamel(a)]||_computedCss(c[0],a)||"":(c.each(function(){this.style[_toCamel(a)]=b}),c)},width:function(a){var b=this;return a===undefined?b.length<1?0:b[0].offsetWidth:b.css("width",_addUnit(a))},height:function(a){var b=this;return a===undefined?b.length<1?0:b[0].offsetHeight:b.css("height",_addUnit(a))},opacity:function(a){return this.each(function(){this.style.opacity===undefined?this.style.filter=1==a?"":"alpha(opacity="+100*a+")":this.style.opacity=1==a?"":a}),this},data:function(a,b){var c=this;return a="kindeditor_data_"+a,b===undefined?c.length<1?null:c[0][a]:(this.each(function(){this[a]=b}),c)},pos:function(){var a=this,b=a[0],c=0,d=0;if(b)if(b.getBoundingClientRect){var e=b.getBoundingClientRect(),f=_getScrollPos(a.doc);c=e.left+f.x,d=e.top+f.y}else for(;b;)c+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;return{x:_round(c),y:_round(d)}},clone:function(a){return new KNode(this.length<1?[]:this[0].cloneNode(a))},append:function(a){return this.each(function(){this.appendChild&&this.appendChild(_get(a))}),this},appendTo:function(a){return this.each(function(){_get(a).appendChild(this)}),this},before:function(a){return this.each(function(){this.parentNode.insertBefore(_get(a),this)}),this},after:function(a){return this.each(function(){this.nextSibling?this.parentNode.insertBefore(_get(a),this.nextSibling):this.parentNode.appendChild(_get(a))}),this},replaceWith:function(a){var b=[];return this.each(function(c,d){_unbind(d);var e=_get(a);d.parentNode.replaceChild(e,d),b.push(e)}),K(b)},empty:function(){var a=this;return a.each(function(a,b){for(var c=b.firstChild;c;){if(!b.parentNode)return;var d=c.nextSibling;c.parentNode.removeChild(c),c=d}}),a},remove:function(a){var b=this;return b.each(function(c,d){if(d.parentNode){if(_unbind(d),a)for(var e=d.firstChild;e;){var f=e.nextSibling;d.parentNode.insertBefore(e,d),e=f}d.parentNode.removeChild(d),delete b[c]}}),b.length=0,b},show:function(a){var b=this;return a===undefined&&(a=b._originDisplay||""),"none"!=b.css("display")?b:b.css("display",a)},hide:function(){var a=this;return a.length<1?a:(a._originDisplay=a[0].style.display,a.css("display","none"))},outer:function(){var a=this;if(a.length<1)return"";var b,c=a.doc.createElement("div");return c.appendChild(a[0].cloneNode(!0)),b=_formatHtml(c.innerHTML),c=null,b},isSingle:function(){return!!_SINGLE_TAG_MAP[this.name]},isInline:function(){return!!_INLINE_TAG_MAP[this.name]},isBlock:function(){return!!_BLOCK_TAG_MAP[this.name]},isStyle:function(){return!!_STYLE_TAG_MAP[this.name]},isControl:function(){return!!_CONTROL_TAG_MAP[this.name]},contains:function(a){return this.length<1?!1:_contains(this[0],_get(a))},parent:function(){if(this.length<1)return null;var a=this[0].parentNode;return a?new KNode(a):null},children:function(){if(this.length<1)return new KNode([]);for(var a=[],b=this[0].firstChild;b;)(3!=b.nodeType||""!==_trim(b.nodeValue))&&a.push(b),b=b.nextSibling;return new KNode(a)},first:function(){var a=this.children();return a.length>0?a.eq(0):null},last:function(){var a=this.children();return a.length>0?a.eq(a.length-1):null},index:function(){if(this.length<1)return-1;for(var a=-1,b=this[0];b;)a++,b=b.previousSibling;return a},prev:function(){if(this.length<1)return null;var a=this[0].previousSibling;return a?new KNode(a):null},next:function(){if(this.length<1)return null;var a=this[0].nextSibling;return a?new KNode(a):null},scan:function(a,b){function c(d){for(var e=b?d.firstChild:d.lastChild;e;){var f=b?e.nextSibling:e.previousSibling;if(a(e)===!1)return!1;if(c(e)===!1)return!1;e=f}}if(!(this.length<1))return b=b===undefined?!0:b,c(this[0]),this}}),_each("blur,focus,focusin,focusout,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error,contextmenu".split(","),function(a,b){KNode.prototype[b]=function(a){return a?this.bind(b,a):this.fire(b)}});var _K=K;K=function(a,b){function c(a){return a[0]||(a=[]),new KNode(a)}if(a!==undefined&&null!==a){if("string"==typeof a){b&&(b=_get(b));var d=a.length;if("@"===a.charAt(0)&&(a=a.substr(1)),a.length!==d||/<.+>/.test(a)){var e=b?b.ownerDocument||b:document,f=e.createElement("div"),g=[];f.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+a;for(var h=0,i=f.childNodes.length;i>h;h++){var j=f.childNodes[h];"__kindeditor_temp_tag__"!=j.id&&g.push(j)}return c(g)}return c(_queryAll(a,b))}return a&&a.constructor===KNode?a:(a.toArray&&(a=a.toArray()),c(_isArray(a)?a:_toArray(arguments)))}},_each(_K,function(a,b){K[a]=b}),K.NodeClass=KNode,window.KindEditor=K;var _START_TO_START=0,_START_TO_END=1,_END_TO_END=2,_END_TO_START=3,_BOOKMARK_ID=0;_extend(KRange,{init:function(a){var b=this;b.startContainer=a,b.startOffset=0,b.endContainer=a,b.endOffset=0,b.collapsed=!0,b.doc=a},commonAncestor:function(){function a(a){for(var b=[];a;)b.push(a),a=a.parentNode;return b}for(var b,c,d=a(this.startContainer),e=a(this.endContainer),f=0,g=d.length,h=e.length;++f&&(b=d[g-f],c=e[h-f],b&&c&&b===c););return d[g-f+1]},setStart:function(a,b){var c=this,d=c.doc;return c.startContainer=a,c.startOffset=b,c.endContainer===d&&(c.endContainer=a,c.endOffset=b),_updateCollapsed(this)},setEnd:function(a,b){var c=this,d=c.doc;return c.endContainer=a,c.endOffset=b,c.startContainer===d&&(c.startContainer=a,c.startOffset=b),_updateCollapsed(this)},setStartBefore:function(a){return this.setStart(a.parentNode||this.doc,K(a).index())},setStartAfter:function(a){return this.setStart(a.parentNode||this.doc,K(a).index()+1)},setEndBefore:function(a){return this.setEnd(a.parentNode||this.doc,K(a).index())},setEndAfter:function(a){return this.setEnd(a.parentNode||this.doc,K(a).index()+1)},selectNode:function(a){return this.setStartBefore(a).setEndAfter(a)},selectNodeContents:function(a){var b=K(a);if(3==b.type||b.isSingle())return this.selectNode(a);var c=b.children();return c.length>0?this.setStartBefore(c[0]).setEndAfter(c[c.length-1]):this.setStart(a,0).setEnd(a,0)},collapse:function(a){return a?this.setEnd(this.startContainer,this.startOffset):this.setStart(this.endContainer,this.endOffset)},compareBoundaryPoints:function(a,b){var c=this.get(),d=b.get();if(!_IE)return c.compareBoundaryPoints(a,d);var e={};e[_START_TO_START]="StartToStart",e[_START_TO_END]="EndToStart",e[_END_TO_END]="EndToEnd",e[_END_TO_START]="StartToEnd";var f=c.compareEndPoints(e[a],d);if(0!==f)return f;var g,h,i,j,k;if((a===_START_TO_START||a===_END_TO_START)&&(g=this.startContainer,j=this.startOffset),(a===_START_TO_END||a===_END_TO_END)&&(g=this.endContainer,j=this.endOffset),(a===_START_TO_START||a===_START_TO_END)&&(h=b.startContainer,k=b.startOffset),(a===_END_TO_END||a===_END_TO_START)&&(h=b.endContainer,k=b.endOffset),g===h){var l=j-k;return l>0?1:0>l?-1:0}for(i=h;i&&i.parentNode!==g;)i=i.parentNode;if(i)return K(i).index()>=j?-1:1;for(i=g;i&&i.parentNode!==h;)i=i.parentNode;return i?K(i).index()>=k?1:-1:(i=K(h).next(),i&&i.contains(g)?1:(i=K(g).next(),i&&i.contains(h)?-1:void 0))},cloneRange:function(){return new KRange(this.doc).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},toString:function(){var a=this.get(),b=_IE?a.text:a.toString();return b.replace(/\r\n|\n|\r/g,"")},cloneContents:function(){return _copyAndDelete(this,!0,!1)},deleteContents:function(){return _copyAndDelete(this,!1,!0)},extractContents:function(){return _copyAndDelete(this,!0,!0)},insertNode:function(a){var b,c,d,e=this,f=e.startContainer,g=e.startOffset,h=e.endContainer,i=e.endOffset,j=1;return"#document-fragment"===a.nodeName.toLowerCase()&&(b=a.firstChild,c=a.lastChild,j=a.childNodes.length),1==f.nodeType?(d=f.childNodes[g],d?(f.insertBefore(a,d),f===h&&(i+=j)):f.appendChild(a)):3==f.nodeType&&(0===g?(f.parentNode.insertBefore(a,f),f.parentNode===h&&(i+=j)):g>=f.nodeValue.length?f.nextSibling?f.parentNode.insertBefore(a,f.nextSibling):f.parentNode.appendChild(a):(d=g>0?f.splitText(g):f,f.parentNode.insertBefore(a,d),f===h&&(h=d,i-=g))),b?e.setStartBefore(b).setEndAfter(c):e.selectNode(a),e.compareBoundaryPoints(_END_TO_END,e.cloneRange().setEnd(h,i))>=1?e:e.setEnd(h,i)},surroundContents:function(a){return a.appendChild(this.extractContents()),this.insertNode(a).selectNode(a)},isControl:function(){var a=this,b=a.startContainer,c=a.startOffset,d=a.endContainer,e=a.endOffset;return 1==b.nodeType&&b===d&&c+1===e&&K(b.childNodes[c]).isControl()},get:function(a){var b,c=this,d=c.doc;if(!_IE){b=d.createRange();try{b.setStart(c.startContainer,c.startOffset),b.setEnd(c.endContainer,c.endOffset)}catch(e){}return b}if(a&&c.isControl())return b=d.body.createControlRange(),b.addElement(c.startContainer.childNodes[c.startOffset]),b;var f=c.cloneRange().down();return b=d.body.createTextRange(),b.setEndPoint("StartToStart",_getEndRange(f.startContainer,f.startOffset)),b.setEndPoint("EndToStart",_getEndRange(f.endContainer,f.endOffset)),b},html:function(){return K(this.cloneContents()).outer()},down:function(){function a(a,c,d){if(1==a.nodeType){var e=K(a).children();if(0!==e.length){var f,g,h,i;c>0&&(f=e.eq(c-1)),c<e.length&&(g=e.eq(c)),f&&3==f.type&&(h=f[0],i=h.nodeValue.length),g&&3==g.type&&(h=g[0],i=0),h&&(d?b.setStart(h,i):b.setEnd(h,i))}}}var b=this;return a(b.startContainer,b.startOffset,!0),a(b.endContainer,b.endOffset,!1),b},up:function(){function a(a,c,d){3==a.nodeType&&(0===c?d?b.setStartBefore(a):b.setEndBefore(a):c==a.nodeValue.length&&(d?b.setStartAfter(a):b.setEndAfter(a)))}var b=this;return a(b.startContainer,b.startOffset,!0),a(b.endContainer,b.endOffset,!1),b},enlarge:function(a){function b(b,d,e){var f,g=K(b);if(!(3==g.type||_NOSPLIT_TAG_MAP[g.name]||!a&&g.isBlock()))if(0===d){for(;!g.prev()&&(f=g.parent(),f&&!_NOSPLIT_TAG_MAP[f.name]&&(a||!f.isBlock()));)g=f;e?c.setStartBefore(g[0]):c.setEndBefore(g[0])}else if(d==g.children().length){for(;!g.next()&&(f=g.parent(),f&&!_NOSPLIT_TAG_MAP[f.name]&&(a||!f.isBlock()));)g=f;e?c.setStartAfter(g[0]):c.setEndAfter(g[0])}}var c=this;return c.up(),b(c.startContainer,c.startOffset,!0),b(c.endContainer,c.endOffset,!1),c},shrink:function(){for(var a,b=this,c=b.collapsed;1==b.startContainer.nodeType&&(a=b.startContainer.childNodes[b.startOffset])&&1==a.nodeType&&!K(a).isSingle();)b.setStart(a,0);if(c)return b.collapse(c);for(;1==b.endContainer.nodeType&&b.endOffset>0&&(a=b.endContainer.childNodes[b.endOffset-1])&&1==a.nodeType&&!K(a).isSingle();)b.setEnd(a,a.childNodes.length);return b},createBookmark:function(a){var b,c=this,d=c.doc,e=K('<span style="display:none;"></span>',d)[0];return e.id="__kindeditor_bookmark_start_"+_BOOKMARK_ID++ +"__",c.collapsed||(b=e.cloneNode(!0),b.id="__kindeditor_bookmark_end_"+_BOOKMARK_ID++ +"__"),b&&c.cloneRange().collapse(!1).insertNode(b).setEndBefore(b),c.insertNode(e).setStartAfter(e),{start:a?"#"+e.id:e,end:b?a?"#"+b.id:b:null}},moveToBookmark:function(a){var b=this,c=b.doc,d=K(a.start,c),e=a.end?K(a.end,c):null;return!d||d.length<1?b:(b.setStartBefore(d[0]),d.remove(),e&&e.length>0?(b.setEndBefore(e[0]),e.remove()):b.collapse(!0),b)},dump:function(){console.log("--------------------"),console.log(3==this.startContainer.nodeType?this.startContainer.nodeValue:this.startContainer,this.startOffset),console.log(3==this.endContainer.nodeType?this.endContainer.nodeValue:this.endContainer,this.endOffset)}}),K.RangeClass=KRange,K.range=_range,K.START_TO_START=_START_TO_START,K.START_TO_END=_START_TO_END,K.END_TO_END=_END_TO_END,K.END_TO_START=_END_TO_START,_extend(KCmd,{init:function(a){var b=this,c=a.doc;b.doc=c,b.win=_getWin(c),b.sel=_getSel(c),b.range=a},selection:function(a){var b=this,c=b.doc,d=_getRng(c);return b.sel=_getSel(c),d?(b.range=_range(d),"html"==K(b.range.startContainer).name&&b.range.selectNodeContents(c.body).collapse(!1),b):(a&&b.range.selectNodeContents(c.body).collapse(!1),b)},select:function(a){a=_undef(a,!0);var b,c=this,d=c.sel,e=c.range.cloneRange().shrink(),f=e.startContainer,g=e.startOffset,h=(e.endContainer,e.endOffset,_getDoc(f)),i=c.win,j=!1;if(a&&1==f.nodeType&&e.collapsed){if(_IE){var k=K("<span>&nbsp;</span>",h);e.insertNode(k[0]),b=h.body.createTextRange();try{b.moveToElementText(k[0])}catch(l){}return b.collapse(!1),b.select(),k.remove(),i.focus(),c}if(_WEBKIT){var m=f.childNodes;(K(f).isInline()||g>0&&K(m[g-1]).isInline()||m[g]&&K(m[g]).isInline())&&(e.insertNode(h.createTextNode("​")),j=!0)}}if(_IE)try{b=e.get(!0),b.select()}catch(n){}else if(j&&e.collapse(!1),b=e.get(!0),d.removeAllRanges(),d.addRange(b),h!==document){var o=K(b.endContainer).pos();i.scrollTo(o.x,o.y)}return i.focus(),c},wrap:function(a){var b,c=this,d=c.doc,e=c.range;if(b=K(a,d),e.collapsed)return e.shrink(),e.insertNode(b[0]).selectNodeContents(b[0]),c;
if(b.isBlock()){for(var f=b.clone(!0),g=f;g.first();)g=g.first();return g.append(e.extractContents()),e.insertNode(f[0]).selectNode(f[0]),c}e.enlarge();var h=e.createBookmark(),i=e.commonAncestor(),j=!1;return K(i).scan(function(a){if(!j&&a==h.start)return void(j=!0);if(j){if(a==h.end)return!1;var c=K(a);if(_inPreElement(c))return;if(3==c.type&&_trim(a.nodeValue).length>0){for(var d;(d=c.parent())&&d.isStyle()&&1==d.children().length;)c=d;_wrapNode(c,b)}}}),e.moveToBookmark(h),c},split:function(a,b){for(var c,d=this.range,e=d.doc,f=d.cloneRange().collapse(a),g=f.startContainer,h=f.startOffset,i=3==g.nodeType?g.parentNode:g,j=!1;i&&i.parentNode;){if(c=K(i),b){if(!c.isStyle())break;if(!_hasAttrOrCss(c,b))break}else if(_NOSPLIT_TAG_MAP[c.name])break;j=!0,i=i.parentNode}if(j){var k=e.createElement("span");d.cloneRange().collapse(!a).insertNode(k),a?f.setStartBefore(i.firstChild).setEnd(g,h):f.setStart(g,h).setEndAfter(i.lastChild);var l=f.extractContents(),m=l.firstChild,n=l.lastChild;a?(f.insertNode(l),d.setStartAfter(n).setEndBefore(k)):(i.appendChild(l),d.setStartBefore(k).setEndBefore(m));var o=k.parentNode;if(o==d.endContainer){var p=K(k).prev(),q=K(k).next();p&&q&&3==p.type&&3==q.type?d.setEnd(p[0],p[0].nodeValue.length):a||d.setEnd(d.endContainer,d.endOffset-1)}o.removeChild(k)}return this},remove:function(a){var b=this,c=b.doc,d=b.range;if(d.enlarge(),0===d.startOffset){for(var e,f=K(d.startContainer);(e=f.parent())&&e.isStyle()&&1==e.children().length;)f=e;d.setStart(f[0],0),f=K(d.startContainer),f.isBlock()&&_removeAttrOrCss(f,a);var g=f.parent();g&&g.isBlock()&&_removeAttrOrCss(g,a)}var h,i;if(d.collapsed){if(b.split(!0,a),h=d.startContainer,i=d.startOffset,i>0){var j=K(h.childNodes[i-1]);j&&_isEmptyNode(j)&&(j.remove(),d.setStart(h,i-1))}var k=K(h.childNodes[i]);return k&&_isEmptyNode(k)&&k.remove(),_isEmptyNode(h)&&(d.startBefore(h),h.remove()),d.collapse(!0),b}b.split(!0,a),b.split(!1,a);var l=c.createElement("span"),m=c.createElement("span");d.cloneRange().collapse(!1).insertNode(m),d.cloneRange().collapse(!0).insertNode(l);var n=[],o=!1;K(d.commonAncestor()).scan(function(a){return o||a!=l?a==m?!1:void(o&&n.push(a)):void(o=!0)}),K(l).remove(),K(m).remove(),h=d.startContainer,i=d.startOffset;var p=d.endContainer,q=d.endOffset;if(i>0){var r=K(h.childNodes[i-1]);r&&_isEmptyNode(r)&&(r.remove(),d.setStart(h,i-1),h==p&&d.setEnd(p,q-1));var s=K(h.childNodes[i]);s&&_isEmptyNode(s)&&(s.remove(),h==p&&d.setEnd(p,q-1))}var t=K(p.childNodes[d.endOffset]);t&&_isEmptyNode(t)&&t.remove();var u=d.createBookmark(!0);return _each(n,function(b,c){_removeAttrOrCss(K(c),a)}),d.moveToBookmark(u),b},commonNode:function(a){function b(b){for(var c=b,d=b;d;){if(_hasAttrOrCss(K(d),a))return K(d);d=d.parentNode}for(;c&&(c=c.lastChild);)if(_hasAttrOrCss(K(c),a))return K(c);return null}var c=this.range,d=c.endContainer,e=c.endOffset,f=3==d.nodeType||0===e?d:d.childNodes[e-1],g=b(f);if(g)return g;if(1==f.nodeType||3==d.nodeType&&0===e){var h=K(f).prev();if(h)return b(h)}return null},commonAncestor:function(a){function b(b){for(;b;){if(1==b.nodeType&&b.tagName.toLowerCase()===a)return b;b=b.parentNode}return null}var c=this.range,d=c.startContainer,e=c.startOffset,f=c.endContainer,g=c.endOffset,h=3==d.nodeType||0===e?d:d.childNodes[e-1],i=3==f.nodeType||0===g?f:f.childNodes[g-1],j=b(h),k=b(i);return j&&k&&j===k?K(j):null},state:function(a){var b=this,c=b.doc,d=!1;try{d=c.queryCommandState(a)}catch(e){}return d},val:function(a){function b(a){return a.toLowerCase()}{var c=this,d=c.doc;c.range}a=b(a);var e,f="";return"fontfamily"===a||"fontname"===a?(f=_nativeCommandValue(d,"fontname"),f=f.replace(/['"]/g,""),b(f)):"formatblock"===a?(f=_nativeCommandValue(d,a),""===f&&(e=c.commonNode({"h1,h2,h3,h4,h5,h6,p,div,pre,address":"*"}),e&&(f=e.name)),"Normal"===f&&(f="p"),b(f)):"fontsize"===a?(e=c.commonNode({"*":".font-size"}),e&&(f=e.css("font-size")),b(f)):"forecolor"===a?(e=c.commonNode({"*":".color"}),e&&(f=e.css("color")),f=_toHex(f),""===f&&(f="default"),b(f)):"hilitecolor"===a?(e=c.commonNode({"*":".background-color"}),e&&(f=e.css("background-color")),f=_toHex(f),""===f&&(f="default"),b(f)):f},toggle:function(a,b){var c=this;return c.commonNode(b)?c.remove(b):c.wrap(a),c.select()},bold:function(){return this.toggle("<strong></strong>",{span:".font-weight=bold",strong:"*",b:"*"})},italic:function(){return this.toggle("<em></em>",{span:".font-style=italic",em:"*",i:"*"})},underline:function(){return this.toggle("<u></u>",{span:".text-decoration=underline",u:"*"})},strikethrough:function(){return this.toggle("<s></s>",{span:".text-decoration=line-through",s:"*"})},forecolor:function(a){return this.toggle('<span style="color:'+a+';"></span>',{span:".color="+a,font:"color"})},hilitecolor:function(a){return this.toggle('<span style="background-color:'+a+';"></span>',{span:".background-color="+a})},fontsize:function(a){return this.toggle('<span style="font-size:'+a+';"></span>',{span:".font-size="+a,font:"size"})},fontname:function(a){return this.fontfamily(a)},fontfamily:function(a){return this.toggle('<span style="font-family:'+a+';"></span>',{span:".font-family="+a,font:"face"})},removeformat:function(){var a={"*":".font-weight,.font-style,.text-decoration,.color,.background-color,.font-size,.font-family,.text-indent"},b=_STYLE_TAG_MAP;return _each(b,function(b){a[b]="*"}),this.remove(a),this.select()},inserthtml:function(a,b){function c(a,b){b='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+b;var c=a.get();c.item?c.item(0).outerHTML=b:c.pasteHTML(b);var d=a.doc.getElementById("__kindeditor_temp_tag__");d.parentNode.removeChild(d);var f=_toRange(c);a.setEnd(f.endContainer,f.endOffset),a.collapse(!1),e.select(!1)}function d(a,b){var c=a.doc,d=c.createDocumentFragment();K("@"+b,c).each(function(){d.appendChild(this)}),a.deleteContents(),a.insertNode(d),a.collapse(!1),e.select(!1)}var e=this,f=e.range;if(""===a)return e;if(_IE&&b){try{c(f,a)}catch(g){d(f,a)}return e}return d(f,a),e},hr:function(){return this.inserthtml("<hr />")},print:function(){return this.win.print(),this},insertimage:function(a,b,c,d,e,f){b=_undef(b,""),e=_undef(e,0);var g='<img src="'+_escape(a)+'" data-ke-src="'+_escape(a)+'" ';return c&&(g+='width="'+_escape(c)+'" '),d&&(g+='height="'+_escape(d)+'" '),b&&(g+='title="'+_escape(b)+'" '),f&&(g+='align="'+_escape(f)+'" '),g+='alt="'+_escape(b)+'" ',g+="/>",this.inserthtml(g)},createlink:function(a,b){var c=this,d=c.doc,e=c.range;c.select();var f=c.commonNode({a:"*"});f&&!e.isControl()&&(e.selectNode(f.get()),c.select());var g='<a href="'+_escape(a)+'" data-ke-src="'+_escape(a)+'" ';if(b&&(g+=' target="'+_escape(b)+'"'),e.collapsed)return g+=">"+_escape(a)+"</a>",c.inserthtml(g);if(e.isControl()){var h=K(e.startContainer.childNodes[e.startOffset]);return g+="></a>",h.after(K(g,d)),h.next().append(h),e.selectNode(h[0]),c.select()}return _nativeCommand(d,"createlink","__kindeditor_temp_url__"),K('a[href="__kindeditor_temp_url__"]',d).each(function(){K(this).attr("href",a).attr("data-ke-src",a),b?K(this).attr("target",b):K(this).removeAttr("target")}),c},unlink:function(){var a=this,b=a.doc,c=a.range;if(a.select(),c.collapsed){var d=a.commonNode({a:"*"});if(d&&(c.selectNode(d.get()),a.select()),_nativeCommand(b,"unlink",null),_WEBKIT&&"img"===K(c.startContainer).name){var e=K(c.startContainer).parent();"a"===e.name&&e.remove(!0)}}else _nativeCommand(b,"unlink",null);return a}}),_each("formatblock,selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript".split(","),function(a,b){KCmd.prototype[b]=function(a){var c=this;return c.select(),_nativeCommand(c.doc,b,a),(!_IE||_inArray(b,"formatblock,selectall,insertorderedlist,insertunorderedlist".split(","))>=0)&&c.selection(),c}}),_each("cut,copy,paste".split(","),function(a,b){KCmd.prototype[b]=function(){var a=this;if(!a.doc.queryCommandSupported(b))throw"not supported";return a.select(),_nativeCommand(a.doc,b,null),a}}),K.CmdClass=KCmd,K.cmd=_cmd,_extend(KWidget,{init:function(a){var b=this;if(b.name=a.name||"",b.doc=a.doc||document,b.win=_getWin(b.doc),b.x=_addUnit(a.x),b.y=_addUnit(a.y),b.z=a.z,b.width=_addUnit(a.width),b.height=_addUnit(a.height),b.div=K('<div style="display:block;"></div>'),b.options=a,b._alignEl=a.alignEl,b.width&&b.div.css("width",b.width),b.height&&b.div.css("height",b.height),b.z&&b.div.css({position:"absolute",left:b.x,top:b.y,"z-index":b.z}),!b.z||b.x!==undefined&&b.y!==undefined||b.autoPos(b.width,b.height),a.cls&&b.div.addClass(a.cls),a.shadowMode&&b.div.addClass("ke-shadow"),a.css&&b.div.css(a.css),a.src?K(a.src).replaceWith(b.div):K(b.doc.body).append(b.div),a.html&&b.div.html(a.html),a.autoScroll)if(_IE&&7>_V||_QUIRKS){var c=_getScrollPos();K(b.win).bind("scroll",function(){var a=_getScrollPos(),d=a.x-c.x,e=a.y-c.y;b.pos(_removeUnit(b.x)+d,_removeUnit(b.y)+e,!1)})}else b.div.css("position","fixed")},pos:function(a,b,c){var d=this;return c=_undef(c,!0),null!==a&&(a=0>a?0:_addUnit(a),d.div.css("left",a),c&&(d.x=a)),null!==b&&(b=0>b?0:_addUnit(b),d.div.css("top",b),c&&(d.y=b)),d},autoPos:function(a,b){var c=this,d=_removeUnit(a)||0,e=_removeUnit(b)||0,f=_getScrollPos();if(c._alignEl){var g=K(c._alignEl),h=g.pos(),i=_round(g[0].clientWidth/2-d/2),j=_round(g[0].clientHeight/2-e/2);x=0>i?h.x:h.x+i,y=0>j?h.y:h.y+j}else{var k=_docElement(c.doc);x=_round(f.x+(k.clientWidth-d)/2),y=_round(f.y+(k.clientHeight-e)/2)}return _IE&&7>_V||_QUIRKS||(x-=f.x,y-=f.y),c.pos(x,y)},remove:function(){var a=this;return(_IE&&7>_V||_QUIRKS)&&K(a.win).unbind("scroll"),a.div.remove(),_each(a,function(b){a[b]=null}),this},show:function(){return this.div.show(),this},hide:function(){return this.div.hide(),this},draggable:function(a){var b=this;return a=a||{},a.moveEl=b.div,a.moveFn=function(a,c,d,e,f,g){(a+=f)<0&&(a=0),(c+=g)<0&&(c=0),b.pos(a,c)},_drag(a),b}}),K.WidgetClass=KWidget,K.widget=_widget;var html,_direction="";(html=document.getElementsByTagName("html"))&&(_direction=html[0].dir),_extend(KEdit,KWidget,{init:function(a){function b(){var b=_iframeDoc(c.iframe);b.open(),h&&(b.domain=document.domain),b.write(_getInitHtml(d,e,f,g)),b.close(),c.win=c.iframe[0].contentWindow,c.doc=b;var i=_cmd(b);c.afterChange(function(){i.selection()}),_WEBKIT&&K(b).click(function(a){"img"===K(a.target).name&&(i.selection(!0),i.range.selectNode(a.target),i.select())}),_IE&&(c._mousedownHandler=function(){var a=i.range.cloneRange();a.shrink(),a.isControl()&&c.blur()},K(document).mousedown(c._mousedownHandler),K(b).keydown(function(a){if(8==a.which){i.selection();var b=i.range;b.isControl()&&(b.collapse(!0),K(b.startContainer.childNodes[b.startOffset]).remove(),a.preventDefault())}})),c.cmd=i,c.html(_elementVal(c.srcElement)),_IE?(b.body.disabled=!0,b.body.contentEditable=!0,b.body.removeAttribute("disabled")):b.designMode="on",a.afterCreate&&a.afterCreate.call(c)}var c=this;KEdit.parent.init.call(c,a),c.srcElement=K(a.srcElement),c.div.addClass("ke-edit"),c.designMode=_undef(a.designMode,!0),c.beforeGetHtml=a.beforeGetHtml,c.beforeSetHtml=a.beforeSetHtml,c.afterSetHtml=a.afterSetHtml;var d=_undef(a.themesPath,""),e=a.bodyClass,f=a.cssPath,g=a.cssData,h=location.host.replace(/:\d+/,"")!==document.domain,i="document.open();"+(h?'document.domain="'+document.domain+'";':"")+"document.close();",j=_IE?' src="javascript:void(function(){'+encodeURIComponent(i)+'}())"':"";c.iframe=K('<iframe class="ke-edit-iframe" hidefocus="true" frameborder="0"'+j+"></iframe>").css("width","100%"),c.textarea=K('<textarea class="ke-edit-textarea" hidefocus="true"></textarea>').css("width","100%"),c.width&&c.setWidth(c.width),c.height&&c.setHeight(c.height),c.designMode?c.textarea.hide():c.iframe.hide(),h&&c.iframe.bind("load",function(){c.iframe.unbind("load"),_IE?b():setTimeout(b,0)}),c.div.append(c.iframe),c.div.append(c.textarea),c.srcElement.hide(),!h&&b()},setWidth:function(a){return this.div.css("width",_addUnit(a)),this},setHeight:function(a){var b=this;return a=_addUnit(a),b.div.css("height",a),b.iframe.css("height",a),(_IE&&8>_V||_QUIRKS)&&(a=_addUnit(_removeUnit(a)-2)),b.textarea.css("height",a),b},remove:function(){var a=this,b=a.doc;K(b.body).unbind(),K(b).unbind(),K(a.win).unbind(),a._mousedownHandler&&K(document).unbind("mousedown",a._mousedownHandler),_elementVal(a.srcElement,a.html()),a.srcElement.show(),b.write(""),a.iframe.unbind(),a.textarea.unbind(),KEdit.parent.remove.call(a)},html:function(a,b){var c=this,d=c.doc;if(c.designMode){var e=d.body;return a===undefined?(a=b?"<!doctype html><html>"+e.parentNode.innerHTML+"</html>":e.innerHTML,c.beforeGetHtml&&(a=c.beforeGetHtml(a)),_GECKO&&"<br />"==a&&(a=""),a):(c.beforeSetHtml&&(a=c.beforeSetHtml(a)),_IE&&_V>=9&&(a=a.replace(/(<.*?checked=")checked(".*>)/gi,"$1$2")),K(e).html(a),c.afterSetHtml&&c.afterSetHtml(),c)}return a===undefined?c.textarea.val():(c.textarea.val(a),c)},design:function(a){var b,c=this;return(a===undefined?!c.designMode:a)?c.designMode||(b=c.html(),c.designMode=!0,c.html(b),c.textarea.hide(),c.iframe.show()):c.designMode&&(b=c.html(),c.designMode=!1,c.html(b),c.iframe.hide(),c.textarea.show()),c.focus()},focus:function(){var a=this;return a.designMode?a.win.focus():a.textarea[0].focus(),a},blur:function(){var a=this;if(_IE){var b=K('<input type="text" style="float:left;width:0;height:0;padding:0;margin:0;border:0;" value="" />',a.div);a.div.append(b),b[0].focus(),b.remove()}else a.designMode?a.win.blur():a.textarea[0].blur();return a},afterChange:function(a){function b(b){setTimeout(function(){a(b)},1)}var c=this,d=c.doc,e=d.body;return K(d).keyup(function(b){b.ctrlKey||b.altKey||!_CHANGE_KEY_MAP[b.which]||a(b)}),K(d).mouseup(a).contextmenu(a),K(c.win).blur(a),K(e).bind("paste",b),K(e).bind("cut",b),c}}),K.EditClass=KEdit,K.edit=_edit,K.iframeDoc=_iframeDoc,_extend(KToolbar,KWidget,{init:function(a){function b(a){var b=K(a);return b.hasClass("ke-outline")?b:b.hasClass("ke-toolbar-icon")?b.parent():void 0}function c(a,c){var d=b(a.target);if(d){if(d.hasClass("ke-disabled"))return;if(d.hasClass("ke-selected"))return;d[c]("ke-on")}}var d=this;KToolbar.parent.init.call(d,a),d.disableMode=_undef(a.disableMode,!1),d.noDisableItemMap=_toMap(_undef(a.noDisableItems,[])),d._itemMap={},d.div.addClass("ke-toolbar").bind("contextmenu,mousedown,mousemove",function(a){a.preventDefault()}).attr("unselectable","on"),d.div.mouseover(function(a){c(a,"addClass")}).mouseout(function(a){c(a,"removeClass")}).click(function(a){var c=b(a.target);if(c){if(c.hasClass("ke-disabled"))return;d.options.click.call(this,a,c.attr("data-name"))}})},get:function(a){return this._itemMap[a]?this._itemMap[a]:this._itemMap[a]=K("span.ke-icon-"+a,this.div).parent()},select:function(a){return _selectToolbar.call(this,a,function(a){a.addClass("ke-selected")}),self},unselect:function(a){return _selectToolbar.call(this,a,function(a){a.removeClass("ke-selected").removeClass("ke-on")}),self},enable:function(a){var b=this,c=a.get?a:b.get(a);return c&&(c.removeClass("ke-disabled"),c.opacity(1)),b},disable:function(a){var b=this,c=a.get?a:b.get(a);return c&&(c.removeClass("ke-selected").addClass("ke-disabled"),c.opacity(.5)),b},disableAll:function(a,b){var c=this,d=c.noDisableItemMap;return b&&(d=_toMap(b)),(a===undefined?!c.disableMode:a)?(K("span.ke-outline",c.div).each(function(){var a=K(this),b=a[0].getAttribute("data-name",2);d[b]||c.disable(a)}),c.disableMode=!0):(K("span.ke-outline",c.div).each(function(){var a=K(this),b=a[0].getAttribute("data-name",2);d[b]||c.enable(a)}),c.disableMode=!1),c}}),K.ToolbarClass=KToolbar,K.toolbar=_toolbar,_extend(KMenu,KWidget,{init:function(a){var b=this;a.z=a.z||811213,KMenu.parent.init.call(b,a),b.centerLineMode=_undef(a.centerLineMode,!0),b.div.addClass("ke-menu").bind("click,mousedown",function(a){a.stopPropagation()}).attr("unselectable","on")},addItem:function(a){var b=this;if("-"===a.title)return void b.div.append(K('<div class="ke-menu-separator"></div>'));var c=K('<div class="ke-menu-item" unselectable="on"></div>'),d=K('<div class="ke-inline-block ke-menu-item-left"></div>'),e=K('<div class="ke-inline-block ke-menu-item-right"></div>'),f=_addUnit(a.height),g=_undef(a.iconClass,"");b.div.append(c),f&&(c.css("height",f),e.css("line-height",f));var h;return b.centerLineMode&&(h=K('<div class="ke-inline-block ke-menu-item-center"></div>'),f&&h.css("height",f)),c.mouseover(function(){K(this).addClass("ke-menu-item-on"),h&&h.addClass("ke-menu-item-center-on")}).mouseout(function(){K(this).removeClass("ke-menu-item-on"),h&&h.removeClass("ke-menu-item-center-on")}).click(function(b){a.click.call(K(this)),b.stopPropagation()}).append(d),h&&c.append(h),c.append(e),a.checked&&(g="ke-icon-checked"),""!==g&&d.html('<span class="ke-inline-block ke-toolbar-icon ke-toolbar-icon-url '+g+'"></span>'),e.html(a.title),b},remove:function(){var a=this;return a.options.beforeRemove&&a.options.beforeRemove.call(a),K(".ke-menu-item",a.div[0]).unbind(),KMenu.parent.remove.call(a),a}}),K.MenuClass=KMenu,K.menu=_menu,_extend(KColorPicker,KWidget,{init:function(a){var b=this;a.z=a.z||811213,KColorPicker.parent.init.call(b,a);var c=a.colors||[["#E53333","#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]];b.selectedColor=(a.selectedColor||"").toLowerCase(),b._cells=[],b.div.addClass("ke-colorpicker").bind("click,mousedown",function(a){a.stopPropagation()}).attr("unselectable","on");var d=b.doc.createElement("table");b.div.append(d),d.className="ke-colorpicker-table",d.cellPadding=0,d.cellSpacing=0,d.border=0;var e=d.insertRow(0),f=e.insertCell(0);f.colSpan=c[0].length,b._addAttr(f,"","ke-colorpicker-cell-top");for(var g=0;g<c.length;g++){e=d.insertRow(g+1);for(var h=0;h<c[g].length;h++)f=e.insertCell(h),b._addAttr(f,c[g][h],"ke-colorpicker-cell")}},_addAttr:function(a,b,c){var d=this;a=K(a).addClass(c),d.selectedColor===b.toLowerCase()&&a.addClass("ke-colorpicker-cell-selected"),a.attr("title",b||d.options.noColor),a.mouseover(function(){K(this).addClass("ke-colorpicker-cell-on")}),a.mouseout(function(){K(this).removeClass("ke-colorpicker-cell-on")}),a.click(function(a){a.stop(),d.options.click.call(K(this),b)}),b?a.append(K('<div class="ke-colorpicker-cell-color" unselectable="on"></div>').css("background-color",b)):a.html(d.options.noColor),K(a).attr("unselectable","on"),d._cells.push(a)},remove:function(){var a=this;return _each(a._cells,function(){this.unbind()}),KColorPicker.parent.remove.call(a),a}}),K.ColorPickerClass=KColorPicker,K.colorpicker=_colorpicker,_extend(KUploadButton,{init:function(a){var b=this,c=K(a.button),d=a.fieldName||"file",e=a.url||"",f=c.val(),g=a.extraParams||{},h=c[0].className||"",i=a.target||"kindeditor_upload_iframe_"+(new Date).getTime();a.afterError=a.afterError||function(a){alert(a)};var j=[];for(var k in g)j.push('<input type="hidden" name="'+k+'" value="'+g[k]+'" />');var l=['<div class="ke-inline-block '+h+'">',a.target?"":'<iframe name="'+i+'" style="display:none;"></iframe>',a.form?'<div class="ke-upload-area">':'<form class="ke-upload-area ke-form" method="post" enctype="multipart/form-data" target="'+i+'" action="'+e+'">','<span class="ke-button-common">',j.join(""),'<input type="button" class="ke-button-common ke-button" value="'+f+'" />',"</span>",'<input type="file" class="ke-upload-file" name="'+d+'" tabindex="-1" />',a.form?"</div>":"</form>","</div>"].join(""),m=K(l,c.doc);c.hide(),c.before(m),b.div=m,b.button=c,b.iframe=a.target?K('iframe[name="'+i+'"]'):K("iframe",m),b.form=a.form?K(a.form):K("form",m);var n=a.width||K(".ke-button-common",m).width();b.fileBox=K(".ke-upload-file",m).width(n),b.options=a},submit:function(){var a=this,b=a.iframe;return b.bind("load",function(){b.unbind();var c=document.createElement("form");a.fileBox.before(c),K(c).append(a.fileBox),c.reset(),K(c).remove(!0);var d,e=K.iframeDoc(b),f=e.getElementsByTagName("pre")[0],g="";g=f?f.innerHTML:e.body.innerHTML,g=_unescape(g),b[0].src="javascript:false";try{d=K.json(g)}catch(h){a.options.afterError.call(a,"<!doctype html><html>"+e.body.parentNode.innerHTML+"</html>")}d&&a.options.afterUpload.call(a,d)}),a.form[0].submit(),a},remove:function(){var a=this;return a.fileBox&&a.fileBox.unbind(),a.iframe.remove(),a.div.remove(),a.button.show(),a}}),K.UploadButtonClass=KUploadButton,K.uploadbutton=_uploadbutton,_extend(KDialog,KWidget,{init:function(a){var b=this,c=_undef(a.shadowMode,!0);a.z=a.z||811213,a.shadowMode=!1,a.autoScroll=_undef(a.autoScroll,!0),KDialog.parent.init.call(b,a);var d=a.title,e=K(a.body,b.doc),f=a.previewBtn,g=a.yesBtn,h=a.noBtn,i=a.closeBtn,j=_undef(a.showMask,!0);b.div.addClass("ke-dialog").bind("click,mousedown",function(a){a.stopPropagation()});var k=K('<div class="ke-dialog-content"></div>').appendTo(b.div);_IE&&7>_V?b.iframeMask=K('<iframe src="about:blank" class="ke-dialog-shadow"></iframe>').appendTo(b.div):c&&K('<div class="ke-dialog-shadow"></div>').appendTo(b.div);var l=K('<div class="ke-dialog-header"></div>');k.append(l),l.html(d),b.closeIcon=K('<span class="ke-dialog-icon-close" title="'+i.name+'"></span>').click(i.click),l.append(b.closeIcon),b.draggable({clickEl:l,beforeDrag:a.beforeDrag});var m=K('<div class="ke-dialog-body"></div>');k.append(m),m.append(e);var n=K('<div class="ke-dialog-footer"></div>');if((f||g||h)&&k.append(n),_each([{btn:f,name:"preview"},{btn:g,name:"yes"},{btn:h,name:"no"}],function(){if(this.btn){var a=_createButton(this.btn);a.addClass("ke-dialog-"+this.name),n.append(a)}}),b.height&&m.height(_removeUnit(b.height)-l.height()-n.height()),b.div.width(b.div.width()),b.div.height(b.div.height()),b.mask=null,j){var o=_docElement(b.doc),p=Math.max(o.scrollWidth,o.clientWidth),q=Math.max(o.scrollHeight,o.clientHeight);b.mask=_widget({x:0,y:0,z:b.z-1,cls:"ke-dialog-mask",width:p,height:q})}b.autoPos(b.div.width(),b.div.height()),b.footerDiv=n,b.bodyDiv=m,b.headerDiv=l,b.isLoading=!1},setMaskIndex:function(a){var b=this;b.mask.div.css("z-index",a)},showLoading:function(a){a=_undef(a,"");var b=this,c=b.bodyDiv;return b.loading=K('<div class="ke-dialog-loading"><div class="ke-inline-block ke-dialog-loading-content" >'+a+"</div></div>").width(c.width()).height(c.height()).css("top",b.headerDiv.height()+"px"),c.css("visibility","hidden").after(b.loading),b.isLoading=!0,b},hideLoading:function(){return this.loading&&this.loading.remove(),this.bodyDiv.css("visibility","visible"),this.isLoading=!1,this},remove:function(){var a=this;return a.options.beforeRemove&&a.options.beforeRemove.call(a),a.mask&&a.mask.remove(),a.iframeMask&&a.iframeMask.remove(),a.closeIcon.unbind(),K("input",a.div).unbind(),K("button",a.div).unbind(),a.footerDiv.unbind(),a.bodyDiv.unbind(),a.headerDiv.unbind(),K("iframe",a.div).each(function(){K(this).remove()}),KDialog.parent.remove.call(a),a}}),K.DialogClass=KDialog,K.dialog=_dialog,K.tabs=_tabs,K.loadScript=_loadScript,K.loadStyle=_loadStyle,K.ajax=_ajax;var _plugins={},_language={};KEditor.prototype={lang:function(a){return _lang(a,this.langType)},loadPlugin:function(a,b){var c=this;return _plugins[a]?c._calledPlugins[a]?(b&&b.call(c),c):(_plugins[a].call(c,KindEditor),b&&b.call(c),c._calledPlugins[a]=!0,c):c.isLoading?c:(c.isLoading=!0,_loadScript(c.pluginsPath+a+"/"+a+".js?ver="+encodeURIComponent(K.DEBUG?_TIME:_VERSION),function(){c.isLoading=!1,_plugins[a]&&c.loadPlugin(a,b)}),c)},handler:function(a,b){var c=this;return c._handlers[a]||(c._handlers[a]=[]),_isFunction(b)?(c._handlers[a].push(b),c):(_each(c._handlers[a],function(){b=this.call(c,b)}),b)},clickToolbar:function(a,b){var c=this,d="clickToolbar"+a;return b===undefined?c._handlers[d]?c.handler(d):(c.loadPlugin(a,function(){c.handler(d)}),c):c.handler(d,b)},updateState:function(){var a=this;return _each("justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,subscript,superscript,bold,italic,underline,strikethrough".split(","),function(b,c){a.cmd.state(c)?a.toolbar.select(c):a.toolbar.unselect(c)}),a},addContextmenu:function(a){return this._contextmenus.push(a),this},afterCreate:function(a){return this.handler("afterCreate",a)},beforeRemove:function(a){return this.handler("beforeRemove",a)},beforeGetHtml:function(a){return this.handler("beforeGetHtml",a)},beforeSetHtml:function(a){return this.handler("beforeSetHtml",a)},afterSetHtml:function(a){return this.handler("afterSetHtml",a)},create:function(){function a(){return 0===i.height()?void setTimeout(a,100):void b.resize(d,e,!1)}var b=this,c=b.fullscreenMode;if(b.isCreated)return b;if(b.srcElement.data("kindeditor"))return b;b.srcElement.data("kindeditor","true"),_docElement().style.overflow=c?"hidden":"";var d=c?_docElement().clientWidth+"px":b.width,e=c?_docElement().clientHeight+"px":b.height;(_IE&&8>_V||_QUIRKS)&&(e=_addUnit(_removeUnit(e)+2));var f=b.container=K(b.layout);c?K(document.body).append(f):b.srcElement.before(f);var g=K(".toolbar",f),h=K(".edit",f),i=b.statusbar=K(".statusbar",f);f.removeClass("container").addClass("ke-container ke-container-"+b.themeType).css("width",d),c?(f.css({position:"absolute",left:0,top:0,"z-index":811211}),_GECKO||(b._scrollPos=_getScrollPos()),window.scrollTo(0,0),K(document.body).css({}),K(document.body.parentNode).css("overflow","hidden"),b._fullscreenExecuted=!0):(b._fullscreenExecuted&&(K(document.body).css({height:"",overflow:""}),K(document.body.parentNode).css("overflow","")),b._scrollPos&&window.scrollTo(b._scrollPos.x,b._scrollPos.y));var j=[];K.each(b.items,function(a,c){"|"==c?j.push('<span class="ke-inline-block ke-separator"></span>'):"/"==c?j.push('<div class="ke-hr"></div>'):(j.push('<span class="ke-outline" data-name="'+c+'" title="'+b.lang(c)+'" unselectable="on">'),j.push('<span class="ke-toolbar-icon ke-toolbar-icon-url ke-icon-'+c+'" unselectable="on"></span></span>'))});var k=b.toolbar=_toolbar({src:g,html:j.join(""),noDisableItems:b.noDisableItems,click:function(a,c){if(a.stop(),b.menu){var d=b.menu.name;if(b.hideMenu(),d===c)return}b.clickToolbar(c)}}),l=_removeUnit(e)-k.div.height(),m=b.edit=_edit({height:l>0&&_removeUnit(e)>b.minHeight?l:b.minHeight,src:h,srcElement:b.srcElement,designMode:b.designMode,themesPath:b.themesPath,bodyClass:b.bodyClass,cssPath:b.cssPath,cssData:b.cssData,beforeGetHtml:function(a){return a=b.beforeGetHtml(a),_formatHtml(a,b.filterMode?b.htmlTags:null,b.urlType,b.wellFormatMode,b.indentChar)},beforeSetHtml:function(a){return a=_formatHtml(a,b.filterMode?b.htmlTags:null,"",!1),b.beforeSetHtml(a)},afterSetHtml:function(){b.edit=m=this,b.afterSetHtml()},afterCreate:function(){b.edit=m=this,b.cmd=m.cmd,b._docMousedownFn=function(){b.menu&&b.hideMenu()},K(m.doc,document).mousedown(b._docMousedownFn),_bindContextmenuEvent.call(b),_bindNewlineEvent.call(b),_bindTabEvent.call(b),_bindFocusEvent.call(b),m.afterChange(function(){m.designMode&&(b.updateState(),b.addBookmark(),b.options.afterChange&&b.options.afterChange.call(b))}),m.textarea.keyup(function(a){a.ctrlKey||a.altKey||!_INPUT_KEY_MAP[a.which]||b.options.afterChange&&b.options.afterChange.call(b)}),b.readonlyMode&&b.readonly(),b.isCreated=!0,""===b.initContent&&(b.initContent=b.html()),b.afterCreate(),b.options.afterCreate&&b.options.afterCreate.call(b)}});return i.removeClass("statusbar").addClass("ke-statusbar").append('<span class="ke-inline-block ke-statusbar-center-icon"></span>').append('<span class="ke-inline-block ke-statusbar-right-icon"></span>'),b._fullscreenResizeHandler&&(K(window).unbind("resize",b._fullscreenResizeHandler),b._fullscreenResizeHandler=null),a(),c?(b._fullscreenResizeHandler=function(){b.isCreated&&b.resize(_docElement().clientWidth,_docElement().clientHeight,!1)},K(window).bind("resize",b._fullscreenResizeHandler),k.select("fullscreen"),i.first().css("visibility","hidden"),i.last().css("visibility","hidden")):(_GECKO&&K(window).bind("scroll",function(){b._scrollPos=_getScrollPos()}),b.resizeType>0?_drag({moveEl:f,clickEl:i,moveFn:function(a,c,d,e,f,g){e+=g,b.resize(null,e)}}):i.first().css("visibility","hidden"),2===b.resizeType?_drag({moveEl:f,clickEl:i.last(),moveFn:function(a,c,d,e,f,g){d+=f,e+=g,b.resize(d,e)}}):i.last().css("visibility","hidden")),b},remove:function(){var a=this;return a.isCreated?(a.beforeRemove(),a.srcElement.data("kindeditor",""),a.menu&&a.hideMenu(),_each(a.dialogs,function(){a.hideDialog()}),K(document).unbind("mousedown",a._docMousedownFn),a.toolbar.remove(),a.edit.remove(),a.statusbar.last().unbind(),a.statusbar.unbind(),a.container.remove(),a.container=a.toolbar=a.edit=a.menu=null,a.dialogs=[],a.isCreated=!1,a):a},resize:function(a,b,c){var d=this;return c=_undef(c,!0),a&&(/%/.test(a)||(a=_removeUnit(a),a=a<d.minWidth?d.minWidth:a),d.container.css("width",_addUnit(a)),c&&(d.width=_addUnit(a))),b&&(b=_removeUnit(b),editHeight=_removeUnit(b)-d.toolbar.div.height()-d.statusbar.height(),editHeight=editHeight<d.minHeight?d.minHeight:editHeight,d.edit.setHeight(editHeight),c&&(d.height=_addUnit(b))),d},select:function(){return this.isCreated&&this.cmd.select(),this},html:function(a){var b=this;return a===undefined?b.isCreated?b.edit.html():_elementVal(b.srcElement):(b.isCreated?b.edit.html(a):_elementVal(b.srcElement,a),b.isCreated&&b.cmd.selection(),b)},fullHtml:function(){return this.isCreated?this.edit.html(undefined,!0):""},text:function(a){var b=this;return a===undefined?_trim(b.html().replace(/<(?!img|embed).*?>/gi,"").replace(/&nbsp;/gi," ")):b.html(_escape(a))},isEmpty:function(){return""===_trim(this.text().replace(/\r\n|\n|\r/,""))},isDirty:function(){return _trim(this.initContent.replace(/\r\n|\n|\r|t/g,""))!==_trim(this.html().replace(/\r\n|\n|\r|t/g,""))},selectedHtml:function(){return this.isCreated?this.cmd.range.html():""},count:function(a){var b=this;return a=(a||"html").toLowerCase(),"html"===a?_removeBookmarkTag(_removeTempTag(b.html())).length:"text"===a?b.text().replace(/<(?:img|embed).*?>/gi,"K").replace(/\r\n|\n|\r/g,"").length:0},exec:function(a){a=a.toLowerCase();var b=this,c=b.cmd,d=_inArray(a,"selectall,copy,paste,print".split(","))<0;return d&&b.addBookmark(!1),c[a].apply(c,_toArray(arguments,1)),d&&(b.updateState(),b.addBookmark(!1),b.options.afterChange&&b.options.afterChange.call(b)),b},insertHtml:function(a,b){return this.isCreated?(a=this.beforeSetHtml(a),this.exec("inserthtml",a,b),this):this},appendHtml:function(a){if(this.html(this.html()+a),this.isCreated){var b=this.cmd;b.range.selectNodeContents(b.doc.body).collapse(!1),b.select()}return this},sync:function(){return _elementVal(this.srcElement,this.html()),this},focus:function(){return this.isCreated?this.edit.focus():this.srcElement[0].focus(),this},blur:function(){return this.isCreated?this.edit.blur():this.srcElement[0].blur(),this},addBookmark:function(a){a=_undef(a,!0);var b,c=this,d=c.edit,e=d.doc.body,f=_removeTempTag(e.innerHTML);if(a&&c._undoStack.length>0){var g=c._undoStack[c._undoStack.length-1];if(Math.abs(f.length-_removeBookmarkTag(g.html).length)<c.minChangeSize)return c}if(d.designMode&&!c._firstAddBookmark){var h=c.cmd.range;b=h.createBookmark(!0),b.html=_removeTempTag(e.innerHTML),h.moveToBookmark(b)}else b={html:f};return c._firstAddBookmark=!1,_addBookmarkToStack(c._undoStack,b),c},undo:function(){return _undoToRedo.call(this,this._undoStack,this._redoStack)},redo:function(){return _undoToRedo.call(this,this._redoStack,this._undoStack)},fullscreen:function(a){return this.fullscreenMode=a===undefined?!this.fullscreenMode:a,this.remove().create()},readonly:function(a){a=_undef(a,!0);var b=this,c=b.edit,d=c.doc;b.designMode?b.toolbar.disableAll(a,[]):_each(b.noDisableItems,function(){b.toolbar[a?"disable":"enable"](this)}),_IE?d.body.contentEditable=!a:d.designMode=a?"off":"on",c.textarea[0].disabled=a},createMenu:function(a){var b=this,c=a.name,d=b.toolbar.get(c),e=d.pos();return a.x=e.x,a.y=e.y+d.height(),a.z=b.options.zIndex,a.shadowMode=_undef(a.shadowMode,b.shadowMode),a.selectedColor!==undefined?(a.cls="ke-colorpicker-"+b.themeType,a.noColor=b.lang("noColor"),b.menu=_colorpicker(a)):(a.cls="ke-menu-"+b.themeType,a.centerLineMode=!1,b.menu=_menu(a)),b.menu
},hideMenu:function(){return this.menu.remove(),this.menu=null,this},hideContextmenu:function(){return this.contextmenu.remove(),this.contextmenu=null,this},createDialog:function(a){{var b=this;a.name}if(a.z=b.options.zIndex,a.shadowMode=_undef(a.shadowMode,b.shadowMode),a.closeBtn=_undef(a.closeBtn,{name:b.lang("close"),click:function(){b.hideDialog(),_IE&&b.cmd&&b.cmd.select()}}),a.noBtn=_undef(a.noBtn,{name:b.lang(a.yesBtn?"no":"close"),click:function(){b.hideDialog(),_IE&&b.cmd&&b.cmd.select()}}),"page"!=b.dialogAlignType&&(a.alignEl=b.container),a.cls="ke-dialog-"+b.themeType,b.dialogs.length>0){var c=b.dialogs[0],d=b.dialogs[b.dialogs.length-1];c.setMaskIndex(d.z+2),a.z=d.z+3,a.showMask=!1}var e=_dialog(a);return b.dialogs.push(e),e},hideDialog:function(){var a=this;if(a.dialogs.length>0&&a.dialogs.pop().remove(),a.dialogs.length>0){var b=a.dialogs[0],c=a.dialogs[a.dialogs.length-1];b.setMaskIndex(c.z-1)}return a},errorDialog:function(a){var b=this,c=b.createDialog({width:750,title:b.lang("uploadError"),body:'<div style="padding:10px 20px;"><iframe frameborder="0" style="width:708px;height:400px;"></iframe></div>'}),d=K("iframe",c.div),e=K.iframeDoc(d);return e.open(),e.write(a),e.close(),K(e.body).css("background-color","#FFF"),d[0].contentWindow.focus(),b}},_instances=[],K.remove=function(a){_eachEditor(a,function(a){this.remove(),_instances.splice(a,1)})},K.sync=function(a){_eachEditor(a,function(){this.sync()})},_IE&&7>_V&&_nativeCommand(document,"BackgroundImageCache",!0),K.EditorClass=KEditor,K.editor=_editor,K.create=_create,K.instances=_instances,K.plugin=_plugin,K.lang=_lang,_plugin("core",function(a){var b=this,c={undo:"Z",redo:"Y",bold:"B",italic:"I",underline:"U",print:"P",selectall:"A"};if(b.afterSetHtml(function(){b.options.afterChange&&b.options.afterChange.call(b)}),b.afterCreate(function(){if("form"==b.syncType){for(var c=a(b.srcElement),d=!1;c=c.parent();)if("form"==c.name){d=!0;break}if(d){c.bind("submit",function(){b.sync(),a(window).bind("unload",function(){b.edit.textarea.remove()})});var e=a('[type="reset"]',c);e.click(function(){b.html(b.initContent),b.cmd.selection()}),b.beforeRemove(function(){c.unbind(),e.unbind()})}}}),b.clickToolbar("source",function(){b.edit.designMode?(b.toolbar.disableAll(!0),b.edit.design(!1),b.toolbar.select("source")):(b.toolbar.disableAll(!1),b.edit.design(!0),b.toolbar.unselect("source"),b.cmd.selection()),b.designMode=b.edit.designMode}),b.afterCreate(function(){b.designMode||b.toolbar.disableAll(!0).select("source")}),b.clickToolbar("fullscreen",function(){b.fullscreen()}),b.fullscreenShortcut){var d=!1;b.afterCreate(function(){if(a(b.edit.doc,b.edit.textarea).keyup(function(a){27==a.which&&setTimeout(function(){b.fullscreen()},0)}),d){if(_IE&&!b.designMode)return;b.focus()}d||(d=!0)})}_each("undo,redo".split(","),function(a,d){c[d]&&b.afterCreate(function(){_ctrl(this.edit.doc,c[d],function(){b.clickToolbar(d)})}),b.clickToolbar(d,function(){b[d]()})}),b.clickToolbar("formatblock",function(){var a=b.lang("formatblock.formatBlock"),c={h1:28,h2:24,h3:18,H4:14,p:12},d=b.cmd.val("formatblock"),e=b.createMenu({name:"formatblock",width:"en"==b.langType?200:150});_each(a,function(a,f){var g="font-size:"+c[a]+"px;";"h"===a.charAt(0)&&(g+="font-weight:bold;"),e.addItem({title:'<span style="'+g+'" unselectable="on">'+f+"</span>",height:c[a]+12,checked:d===a||d===f,click:function(){b.select().exec("formatblock","<"+a+">").hideMenu()}})})}),b.clickToolbar("fontname",function(){var a=b.cmd.val("fontname"),c=b.createMenu({name:"fontname",width:150});_each(b.lang("fontname.fontName"),function(d,e){c.addItem({title:'<span style="font-family: '+d+';" unselectable="on">'+e+"</span>",checked:a===d.toLowerCase()||a===e.toLowerCase(),click:function(){b.exec("fontname",d).hideMenu()}})})}),b.clickToolbar("fontsize",function(){var a=b.cmd.val("fontsize"),c=b.createMenu({name:"fontsize",width:150});_each(b.fontSizeTable,function(d,e){c.addItem({title:'<span style="font-size:'+e+';" unselectable="on">'+e+"</span>",height:_removeUnit(e)+12,checked:a===e,click:function(){b.exec("fontsize",e).hideMenu()}})})}),_each("forecolor,hilitecolor".split(","),function(a,c){b.clickToolbar(c,function(){b.createMenu({name:c,selectedColor:b.cmd.val(c)||"default",colors:b.colorTable,click:function(a){b.exec(c,a).hideMenu()}})})}),_each("cut,copy,paste".split(","),function(a,c){b.clickToolbar(c,function(){b.focus();try{b.exec(c,null)}catch(a){alert(b.lang(c+"Error"))}})}),b.clickToolbar("about",function(){var a='<div style="margin:20px;"><div>KindEditor '+_VERSION+'</div><div>Copyright &copy; <a href="http://www.kindsoft.net/" target="_blank">kindsoft.net</a> All rights reserved.</div></div>';b.createDialog({name:"about",width:350,title:b.lang("about"),body:a})}),b.plugin.getSelectedLink=function(){return b.cmd.commonAncestor("a")},b.plugin.getSelectedImage=function(){return _getImageFromRange(b.edit.cmd.range,function(a){return!/^ke-\w+$/i.test(a[0].className)})},b.plugin.getSelectedFlash=function(){return _getImageFromRange(b.edit.cmd.range,function(a){return"ke-flash"==a[0].className})},b.plugin.getSelectedMedia=function(){return _getImageFromRange(b.edit.cmd.range,function(a){return"ke-media"==a[0].className||"ke-rm"==a[0].className})},b.plugin.getSelectedAnchor=function(){return _getImageFromRange(b.edit.cmd.range,function(a){return"ke-anchor"==a[0].className})},_each("link,image,flash,media,anchor".split(","),function(a,c){var d=c.charAt(0).toUpperCase()+c.substr(1);_each("edit,delete".split(","),function(a,e){b.addContextmenu({title:b.lang(e+d),click:function(){b.loadPlugin(c,function(){b.plugin[c][e](),b.hideMenu()})},cond:b.plugin["getSelected"+d],width:150,iconClass:"edit"==e?"ke-icon-"+c:undefined})}),b.addContextmenu({title:"-"})}),b.plugin.getSelectedTable=function(){return b.cmd.commonAncestor("table")},b.plugin.getSelectedRow=function(){return b.cmd.commonAncestor("tr")},b.plugin.getSelectedCell=function(){return b.cmd.commonAncestor("td")},_each("prop,cellprop,colinsertleft,colinsertright,rowinsertabove,rowinsertbelow,rowmerge,colmerge,rowsplit,colsplit,coldelete,rowdelete,insert,delete".split(","),function(a,c){var d=_inArray(c,["prop","delete"])<0?b.plugin.getSelectedCell:b.plugin.getSelectedTable;b.addContextmenu({title:b.lang("table"+c),click:function(){b.loadPlugin("table",function(){b.plugin.table[c](),b.hideMenu()})},cond:d,width:170,iconClass:"ke-icon-table"+c})}),b.addContextmenu({title:"-"}),_each("selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript,hr,print,bold,italic,underline,strikethrough,removeformat,unlink".split(","),function(a,d){c[d]&&b.afterCreate(function(){_ctrl(this.edit.doc,c[d],function(){b.cmd.selection(),b.clickToolbar(d)})}),b.clickToolbar(d,function(){b.focus().exec(d,null)})}),b.afterCreate(function(){function c(){d.range.moveToBookmark(e),d.select(),_WEBKIT&&(a("div."+h,f).each(function(){a(this).after("<br />").remove(!0)}),a("span.Apple-style-span",f).remove(!0),a("span.Apple-tab-span",f).remove(!0),a("span[style]",f).each(function(){"nowrap"==a(this).css("white-space")&&a(this).remove(!0)}),a("meta",f).remove());var c=f[0].innerHTML;f.remove(),""!==c&&(_WEBKIT&&(c=c.replace(/(<br>)\1/gi,"$1")),2===b.pasteType&&(c=c.replace(/(<(?:p|p\s[^>]*)>) *(<\/p>)/gi,""),/schemas-microsoft-com|worddocument|mso-\w+/i.test(c)?c=_clearMsWord(c,b.filterMode?b.htmlTags:a.options.htmlTags):(c=_formatHtml(c,b.filterMode?b.htmlTags:null),c=b.beforeSetHtml(c))),1===b.pasteType&&(c=c.replace(/&nbsp;/gi," "),c=c.replace(/\n\s*\n/g,"\n"),c=c.replace(/<br[^>]*>/gi,"\n"),c=c.replace(/<\/p><p[^>]*>/gi,"\n"),c=c.replace(/<[^>]+>/g,""),c=c.replace(/ {2}/g," &nbsp;"),"p"==b.newlineTag?/\n/.test(c)&&(c=c.replace(/^/,"<p>").replace(/$/,"<br /></p>").replace(/\n/g,"<br /></p><p>")):c=c.replace(/\n/g,"<br />$&")),b.insertHtml(c,!0))}var d,e,f,g=b.edit.doc,h="__kindeditor_paste__",i=!1;a(g.body).bind("paste",function(j){if(0===b.pasteType)return void j.stop();if(!i){if(i=!0,a("div."+h,g).remove(),d=b.cmd.selection(),e=d.range.createBookmark(),f=a('<div class="'+h+'"></div>',g).css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",left:"-1981px",top:a(e.start).pos().y+"px","white-space":"nowrap"}),a(g.body).append(f),_IE){var k=d.range.get(!0);k.moveToElementText(f[0]),k.select(),k.execCommand("paste"),j.preventDefault()}else d.range.selectNodeContents(f[0]),d.select();setTimeout(function(){c(),i=!1},0)}})}),b.beforeGetHtml(function(a){return _IE&&8>=_V&&(a=a.replace(/<div\s+[^>]*data-ke-input-tag="([^"]*)"[^>]*>([\s\S]*?)<\/div>/gi,function(a,b){return unescape(b)}),a=a.replace(/(<input)((?:\s+[^>]*)?>)/gi,function(a,b,c){return/\s+type="[^"]+"/i.test(a)?a:b+' type="text"'+c})),a.replace(/(<(?:noscript|noscript\s[^>]*)>)([\s\S]*?)(<\/noscript>)/gi,function(a,b,c,d){return b+_unescape(c).replace(/\s+/g," ")+d}).replace(/<img[^>]*class="?ke-(flash|rm|media)"?[^>]*>/gi,function(a){var b=_getAttrList(a),c=_getCssList(b.style||""),d=_mediaAttrs(b["data-ke-tag"]);return d.width=_undef(b.width,_removeUnit(_undef(c.width,""))),d.height=_undef(b.height,_removeUnit(_undef(c.height,""))),_mediaEmbed(d)}).replace(/<img[^>]*class="?ke-anchor"?[^>]*>/gi,function(a){var b=_getAttrList(a);return'<a name="'+unescape(b["data-ke-name"])+'"></a>'}).replace(/<div\s+[^>]*data-ke-script-attr="([^"]*)"[^>]*>([\s\S]*?)<\/div>/gi,function(a,b,c){return"<script"+unescape(b)+">"+unescape(c)+"</script>"}).replace(/<div\s+[^>]*data-ke-noscript-attr="([^"]*)"[^>]*>([\s\S]*?)<\/div>/gi,function(a,b,c){return"<noscript"+unescape(b)+">"+unescape(c)+"</noscript>"}).replace(/(<[^>]*)data-ke-src="([^"]*)"([^>]*>)/gi,function(a,b,c){return a=a.replace(/(\s+(?:href|src)=")[^"]*(")/i,function(a,b,d){return b+_unescape(c)+d}),a=a.replace(/\s+data-ke-src="[^"]*"/i,"")}).replace(/(<[^>]+\s)data-ke-(on\w+="[^"]*"[^>]*>)/gi,function(a,b,c){return b+c})}),b.beforeSetHtml(function(a){return _IE&&8>=_V&&(a=a.replace(/<input[^>]*>|<(select|button)[^>]*>[\s\S]*?<\/\1>/gi,function(a){var b=_getAttrList(a),c=_getCssList(b.style||"");return"none"==c.display?'<div class="ke-display-none" data-ke-input-tag="'+escape(a)+'"></div>':a})),a.replace(/<embed[^>]*type="([^"]+)"[^>]*>(?:<\/embed>)?/gi,function(a){var c=_getAttrList(a);return c.src=_undef(c.src,""),c.width=_undef(c.width,0),c.height=_undef(c.height,0),_mediaImg(b.themesPath+"common/blank.gif",c)}).replace(/<a[^>]*name="([^"]+)"[^>]*>(?:<\/a>)?/gi,function(a){var c=_getAttrList(a);return c.href!==undefined?a:'<img class="ke-anchor" src="'+b.themesPath+'common/anchor.gif" data-ke-name="'+escape(c.name)+'" />'}).replace(/<script([^>]*)>([\s\S]*?)<\/script>/gi,function(a,b,c){return'<div class="ke-script" data-ke-script-attr="'+escape(b)+'">'+escape(c)+"</div>"}).replace(/<noscript([^>]*)>([\s\S]*?)<\/noscript>/gi,function(a,b,c){return'<div class="ke-noscript" data-ke-noscript-attr="'+escape(b)+'">'+escape(c)+"</div>"}).replace(/(<[^>]*)(href|src)="([^"]*)"([^>]*>)/gi,function(a,b,c,d,e){return a.match(/\sdata-ke-src="[^"]*"/i)?a:a=b+c+'="'+d+'" data-ke-src="'+_escape(d)+'"'+e}).replace(/(<[^>]+\s)(on\w+="[^"]*"[^>]*>)/gi,function(a,b,c){return b+"data-ke-"+c}).replace(/<table[^>]*\s+border="0"[^>]*>/gi,function(a){return a.indexOf("ke-zeroborder")>=0?a:_addClassToTag(a,"ke-zeroborder")})})})}}(window);var editor;!function(a){a.fn.editor=function(b,c){return"string"==typeof b?a.fn.editor.methods[b](this,c):(b=b||{},this.each(function(){var c,d=a.data(this,"editor");d?(c=a.extend(d.options,b),d.opts=c):(c=a.extend({},a.fn.editor.defaults,a.fn.editor.parseOptions(this),b),a.data(this,"editor",{options:c}));var e=a(this);setTimeout(function(){KindEditor.create(e,c)},500)}))},a.fn.editor.methods={setValue:function(a,b){KindEditor.instances[0].html(b)},getValue:function(){return KindEditor.instances[0].html()},clearValue:function(){"请填写内容"!=KindEditor.instances[0].html()&&KindEditor.instances[0].html("")}},a.fn.editor.parseOptions=function(b){return a.extend({},a.parser.parseOptions(b,["width","height","designMode","resizeType"]))},a.fn.editor.defaults={basePath:bootPATH+"assets/js/libs/kindeditor/",allowPreviewEmoticons:!1,filterMode:!0,imageUploadJson:bootPATH+"assets/js/libs/kindeditor/php/upload_json.php",resizeType:1,allowFileManager:!0,useContextmenu:!1,htmlTags:{font:["color","size","face",".background-color"],span:["style"],div:["class","align","style"],table:["class","border","cellspacing","cellpadding","width","height","align","style"],"td,th":["class","align","valign","width","height","colspan","rowspan","bgcolor","style"],a:["class","href","target","name","style","onclick"],embed:["src","width","height","type","loop","autostart","quality","style","align","allowscriptaccess","/"],img:["src","width","height","border","alt","title","align","style","/"],hr:["class","/"],br:["/"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["align","style"],"tbody,tr,strong,b,sub,sup,em,i,u,strike":[]},items:["source","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","removeformat","|","justifyleft","justifycenter","justifyright","insertorderedlist","insertunorderedlist","table","|","image","flash","link","fullscreen"]},a.parser.plugins.push("editor")}(jQuery),function(a){function b(b){var c=a.data(b,"iptsearch").options,d=c.clickFn,e=c.width,f=c.offsetWidth,g=a("<div>").addClass("ipt-search-box").width(e+f),h=a("<i>");a(b).wrap(g).after(h),a(b).width(e),(c.readonly||c.disabled)&&a(b).attr("readonly",!0),c.disabled&&a(b).addClass("disabled"),c.validatebox&&a(b).validatebox(c.validatebox.options||{}),c.enterKey&&a(b).bind("keydown",function(a){switch(a.keyCode){case 13:a.stopPropagation(),a.preventDefault(),h.trigger("click")}}),h.bind("click",function(){return"function"!=typeof d||c.disabled||(d(),top.iptSearchInputObj=b),"string"==typeof d&&new Function(d+"()")(),!1})}a.fn.iptSearch=a.fn.iptsearch=function(c,d){return"string"==typeof c?a.fn.iptsearch.methods[c](this,d):(c=c||{},this.each(function(){var d=this,e=a.data(d,"iptsearch");e?a.extend(e.options,c):(a.data(d,"iptsearch",{options:a.extend({},a.fn.iptsearch.defaults,a.fn.iptsearch.parseOptions(d),c)}),b(d))}))},a.fn.iptsearch.methods={options:function(b){return a.data(b[0],"iptsearch").options},disable:function(b){a(b).addClass("disabled");var c=b.iptsearch("options");c.disabled=!0},enable:function(a){a.removeClass("disabled");var b=a.iptsearch("options");b.disabled=!1}},a.fn.iptsearch.parseOptions=function(b){return a.extend({},a.parser.parseOptions(b,["width","disabled"]))},a.fn.iptsearch.defaults={width:134,offsetWidth:26,disabled:!1,readonly:!0,enterKey:!1,validatebox:!1,clickFn:null},a.parser&&a.parser.plugins.push("iptsearch")}(jQuery),function(a){function b(a){a._extensionsPanel={href:a.href,content:a.content},a.iniframe&&(a.href=null,a.content=null)}function c(b){var c=a(b),e=c.panel("options"),f=e._extensionsPanel?e._extensionsPanel:e._extensionsPanel={href:e.href,content:e.content};if(e.href=f.href,e.content=f.content,e.plain||e.fieldset){c.addClass("plain clearfix");var g=a(c.parent(0));g.addClass("plain"),a("div.panel-tool:first",g).addClass("plain"),a("div.panel-header:first",g).addClass("plain"),a("div.panel-title:first",g).addClass("plain"),a("div.panel-header:first",g).append('<div class="panel-header-line"></div>')}e.fieldset&&(g.addClass("fieldset clearfix"),c.addClass("fieldset clearfix")),e.fieldset&&0==e.collapsible&&(a("div.panel-title:first",g).css({"padding-left":"5px"}),a("div.panel-tool:first",g).remove()),e.fitWidth&&!e.fit&&c.addClass("fit-width"),e.iniframe&&d(b,e.href)}function d(b,c){var d=a.util.parseJquery(b),f=d.panel("options");if(c=c?f.href=c:f.href,f.iniframe){var g=f._extensionsPanel?f._extensionsPanel:f._extensionsPanel={href:f.href,content:f.content};g.href=f.href,g.content=f.content,f.href=null,f.content="<iframe class='panel-iframe' frameborder='0' width='100%' height='100%' marginwidth='0px' marginheight='0px' scrolling='auto'></iframe>",s.call(d,d),f.href=g.href,f.content=g.content,e(b).attr("src",c)}else s.call(d,d,c)}function e(b){var c=a.util.parseJquery(b),d=c.panel("body"),e=e||a.fn.datagrid.defaults.loadMsg;d.css("position","relative");var f=(a('<div class="datagrid-mask" style="display:block;"></div>').appendTo(d),a('<div class="datagrid-mask-msg" style="display:none; left: 50%;"></div>').html(e).appendTo(d));f.css("marginLeft",-f.outerWidth()/2).show();var g=d.children("iframe.panel-iframe");return g.bind("load",function(){c.panel("body").children("div.datagrid-mask-msg").remove(),c.panel("body").children("div.datagrid-mask").remove(),g.css({visibility:"visible"})}),g}function f(b){var c=a.util.parseJquery(b);if(!n(b))return t.call(c,c);var d=c.panel("panel"),e=d.index(),f=d.closest(".tabs-container");return f.find(">div.tabs-header>div.tabs-wrap>ul.tabs>li").eq(e)}function g(b,c){var d=a.util.parseJquery(b);if(!n(b))return u.call(d,d,c);if(c){var e=d.panel("options"),f=d.panel("header");e.title=c,f.find(">a.tabs-inner>span.tabs-title").text(c)}}a.fn.panel.extensions={};var h=function(){a("iframe,frame",this).each(function(){try{this.contentWindow&&this.contentWindow.document&&this.contentWindow.close&&(this.contentWindow.document.write(""),this.contentWindow.close()),a.isFunction(window.CollectGarbage)&&window.CollectGarbage()}catch(b){}}).remove()};a.fn.panel.defaults.onBeforeDestroy=h,a.fn.window.defaults.onBeforeDestroy=h,a.fn.dialog.defaults.onBeforeDestroy=h,a.fn.datagrid.defaults.onBeforeDestroy=h,a.fn.propertygrid.defaults.onBeforeDestroy=h,a.fn.treegrid.defaults.onBeforeDestroy=h;var i={panel:a.fn.panel.defaults.onResize,window:a.fn.window.defaults.onResize,dialog:a.fn.dialog.defaults.onResize},j=function(b,c){var d=a.util.parseJquery(this),e=d.panel("isWindow"),f=d.panel("isDialog"),g=f?"dialog":e?"window":"panel",h=i[g];if(a.isFunction(h)&&h.apply(this,arguments),!d.panel("inLayout")){var j=d.panel("options");j.minWidth=a.isNumeric(j.minWidth)?j.minWidth:w.minHeight,j.maxWidth=a.isNumeric(j.maxWidth)?j.maxWidth:w.maxWidth,j.minHeight=a.isNumeric(j.minHeight)?j.minHeight:w.minHeight,j.maxHeight=a.isNumeric(j.maxHeight)?j.maxHeight:w.maxHeight;var k=!1;b>j.maxWidth&&(b=j.maxWidth,k=!0),b<j.minWidth&&(b=j.minWidth,k=!0),c>j.maxHeight&&(c=j.maxHeight,k=!0),c<j.minHeight&&(c=j.minHeight,k=!0),k&&!j.fit&&d[g]("resize",{width:b,height:c})}},k={panel:a.fn.panel.defaults.onMove,window:a.fn.window.defaults.onMove,dialog:a.fn.dialog.defaults.onMove},l=function(b,c){var d=a.util.parseJquery(this),e=d.panel("isWindow"),f=d.panel("isDialog"),g=f?"dialog":e?"window":"panel",h=k[g],i=d.panel("options");if(a.isFunction(h)&&h.apply(this,arguments),i.maximized)return d[g]("restore");if(i.inContainer){var j=d.panel("panel"),l=j.parent(),m=l.is("body"),n=a.extend({},m?a.util.windowSize():{width:l.innerWidth(),height:l.innerHeight()}),o=a.isNumeric(i.width)?i.width:j.outerWidth(),p=a.isNumeric(i.height)?i.height:j.outerHeight(),q=!1;return 0>b&&(b=0,q=!0),0>c&&(c=0,q=!0),q?d[g]("move",{left:b,top:c}):(b+o>n.width&&b>0&&(b=n.width-o,q=!0),c+p>n.height&&c>0&&(c=n.height-p,q=!0),q?d[g]("move",{left:b,top:c}):void 0)}},m=function(b){var c=a.util.parseJquery(b),d=c.panel("body"),e=c.panel("panel");return d.hasClass("layout-body")&&e.hasClass("layout-panel")},n=function(b){var c=a.util.parseJquery(b),d=c.panel("panel"),e=d.parent(),f=e.parent();return e.hasClass("tabs-panels")&&f.hasClass("tabs-container")},o=function(b){var c=a.util.parseJquery(b),d=c.panel("panel"),e=d.parent();return e.hasClass("accordion")&&a.data(e[0],"accordion")?!0:!1},p=function(b){var c=a.util.parseJquery(b),d=c.panel("body");return d.hasClass("window-body")&&d.parent().hasClass("window")},q=function(b){var c=a.util.parseJquery(b),d=c.panel("body");return p(b)&&(d.children("div.panel").children("div.panel-body.dialog-content").length?!0:!1)},r=a.fn.panel;a.fn.panel=function(d){return"string"==typeof d?r.apply(this,arguments):(d=d||{},this.each(function(){var e=a.util.parseJquery(this),f=a.extend({},a.fn.panel.parseOptions(this),d);(f.plain||f.fieldset)&&(f.collapsible=!0),b(f),r.call(e,f),c(this)}))},a.union(a.fn.panel,r);var s=a.fn.panel.methods.refresh,t=a.fn.panel.methods.header,u=a.fn.panel.methods.setTitle,v=a.fn.panel.extensions.methods={inLayout:function(a){return m(a[0])},inTabs:function(a){return n(a[0])},inAccordion:function(a){return o(a[0])},isWindow:function(a){return p(a[0])},isDialog:function(a){return q(a[0])},iframe:function(a){return e(a[0])},refresh:function(a,b){return a.each(function(){d(this,b)})},header:function(a){return f(a[0])},setTitle:function(a,b){return a.each(function(){g(this,b)})}},w=a.fn.panel.extensions.defaults={plain:!1,fieldset:!1,iniframe:!1,fitWidth:!1,minWidth:0,maxWidth:1e4,minHeight:0,maxHeight:1e4,onResize:j,inContainer:!0,onMove:l};a.extend(a.fn.panel.defaults,w),a.extend(a.fn.panel.methods,v);var x="iframe.panel-iframe { margin: 0px; padding: 0px; width: 100%; height: 100%; border: 0px; overflow: auto; }";a.util.addCss(x)}(jQuery),function(a){a.extend(a.fn.layout.methods,{isVisible:function(b,c){var d=a.data(b[0],"layout").panels,e=d[c];return e&&e.length?e.panel("panel").is(":visible"):!1},hidden:function(b,c){return b.each(function(){function b(b,c,f){var g=c.substring(0,1),h=c.substring(1),i="expand"+g.toUpperCase()+h;e[i]?a(b).layout("isVisible",i)?(d.regionState[c]=1,e[i].panel("close")):a(b).layout("isVisible",c)&&(d.regionState[c]=0,e[c].panel("close")):e[c].panel("close"),f&&a(b).layout("resize")}var d=a.data(this,"layout").options,e=a.data(this,"layout").panels;d.regionState||(d.regionState={});var f=c;"all"==f.toLowerCase()?(b(this,"east",!1),b(this,"north",!1),b(this,"west",!1),b(this,"south",!0)):b(this,f,!0)})},show:function(b,c){return b.each(function(){function b(b,c,f){var g=c.substring(0,1),h=c.substring(1),i="expand"+g.toUpperCase()+h;e[i]?a(b).layout("isVisible",i)||a(b).layout("isVisible",c)||(1==d.regionState[c]?e[i].panel("open"):e[c].panel("open")):e[c].panel("open"),f&&a(b).layout("resize")}var d=a.data(this,"layout").options,e=a.data(this,"layout").panels,f=c;"all"==f.toLowerCase()?(b(this,"east",!1),b(this,"north",!1),b(this,"west",!1),b(this,"south",!0)):b(this,f,!0)})}})}(jQuery),function(a){function b(b,c){return a("#"+b).length>0?void 0:a("<style>"+c+"</style>").attr("id",b).attr("type","text/css").appendTo("head")}a.extend({mask:function(c){c=c||{};var d=a.extend({},{target:"body",loadMsg:a.fn.datagrid.defaults.loadMsg},c);this.unmask(d),"body"!=d.target&&"static"==a(d.target).css("position")&&a(d.target).addClass("mask-relative");var e=(a('<div class="datagrid-mask" style="display:block;"></div>').appendTo(d.target),a('<div class="datagrid-mask-msg" style="display:none; left: 50%;"></div>').html(d.loadMsg).appendTo(d.target));setTimeout(function(){e.css("marginLeft",-e.outerWidth()/2).show()},5);var f=".mask-relative {position: relative !important;}";b("mask_css",f)},unmask:function(b){var c=b.target||"body";a(">div.datagrid-mask-msg",c).remove(),a(">div.datagrid-mask",c).remove(),a(b.target).removeClass("mask-relative")}})}(jQuery),function(a,b){function c(b){var c=a.util.parseJquery(b),d=c.tabs("options"),e=d.tabPosition;a.isNumeric(d.lineHeight)&&d.lineHeight>0&&(a.array.contains(["top","bottom","left","right"],e)||(e="top"),c.children("div.tabs-panels").css("padding-"+e,d.lineHeight.toString()+"px").children().children().css("border-"+e+"-width","1px"))}function d(b,c,e,f,g){return a.array.map(f,function(f){if(!f||a.util.isString(f))return f;var h=a.extend({},f);return h.id=a.isFunction(f.id)?f.id.call(h,b,c,e,g):f.id,h.text=a.isFunction(f.text)?f.text.call(h,b,c,e,g):f.text,h.iconCls=a.isFunction(f.iconCls)?f.iconCls.call(h,b,c,e,g):f.iconCls,h.disabled=a.isFunction(f.disabled)?f.disabled.call(h,b,c,e,g):f.disabled,h.hideOnClick=a.isFunction(f.hideOnClick)?f.hideOnClick.call(h,b,c,e,g):f.hideOnClick,h.onclick=a.isFunction(f.onclick)?function(a,b,d){f.onclick.call(this,a,c,e,g,b,d)}:f.onclick,h.handler=a.isFunction(f.handler)?function(a,b,d){f.handler.call(this,a,c,e,g,b,d)}:f.handler,h.children&&h.children.length&&(h.children=d(b,c,e,h.children,g)),h})}function e(b,d){d=a.extend({tab:null,options:null},d);var e=a.util.parseJquery(b),f=(e.tabs("options"),e.tabs("getTabIndex",d.tab)),g=a.union({},d.options,a.fn.tabs.extensions.panelOptions),h=g.tools,i=g.onLoad,j={iconCls:"icon-mini-refresh",handler:function(){var b=a(this).parent().prev().find("span.tabs-title").text();b&&a.util.exec(function(){e.tabs("refresh",b)})}};g.refreshable&&g.refreshButton&&(g.tools=a.array.likeArray(g.tools)?a.array.merge([],g.tools,j):[j]),a.string.isNullOrWhiteSpace(g.href)&&a.string.isNullOrWhiteSpace(g.content)||!g.selected&&e.tabs("getSelected")!=d.tab||g.iniframe||(a.easyui.messager.progress({title:"操作提醒",msg:"正在加载...",interval:100}),g.onLoad=function(){a.isFunction(i)&&i.apply(this,arguments),a.util.exec(function(){a.easyui.messager.progress("close")}),a.util.parseJquery(this).panel("options").onLoad=i});var k=L.call(e,e,{tab:d.tab,options:g});g=e.tabs("getTab",f).panel("options"),g.tools=h,c(b);var l=e.find(">div.tabs-header>div.tabs-wrap>ul.tabs>li").eq(f).off("dblclick.closeOnDblClick").on("dblclick.closeOnDblClick",function(){g.closeOnDblClick&&g.closable&&e.tabs("close",g.title)});return g.closeOnDblClick&&g.closable&&l.attr("title","双击此选项卡标题可以将其关闭"),k}function f(b,c){var d=a.util.parseJquery(b),e=d.tabs("options"),f=d.tabs("getTab",c),g=f.panel("options"),h=d.tabs("getTabIndex",f);if(a.string.isNullOrWhiteSpace(g.href)&&a.string.isNullOrWhiteSpace(g.content)){var i=f.find("iframe"),j=i.attr("src");return void i.attr("src",j)}d.tabs("update",{tab:f,options:g}),a.isFunction(e.onRefresh)&&e.onRefresh.call(b,e.title,h)}function g(b,c){var d=a.util.parseJquery(b),e=d.tabs("getSelected"),f=d.tabs("getTabIndex",e),g=d.tabs("getTab",c),h=d.tabs("getTabIndex",g);return h==f}function h(b,c){var d=a.util.parseJquery(b),e=d.tabs("getTab",c),f=e.panel("options");return f.closable}function i(b,c){var d=a("<table></table>").css({width:"95%",height:"100%"}),e=a("<input type='text' style='width: 98%;'/>"),f=a("<input type='text' style='width: 98%;'/>"),g=a("<input id='refreshable' type='checkbox' checked='true' />"),h=a("<input id='iniframe' type='checkbox' />"),i=a("<label>是否可刷新</label>"),j=a("<label>是否嵌至 IFRAME(浏览器内部窗体) 中</label>"),k=a("<tr></tr>").append("<td width='24%' align='right'>选项卡标题：</td>").appendTo(d),l=a("<tr></tr>").append("<td width='24%' align='right'>路径(href)：</td>").appendTo(d),m=a("<tr></tr>").appendTo(d);a("<td></td>").append(e).appendTo(k),a("<td></td>").append(f).appendTo(l),a("<td width='24%' align='right'></td>").append(g).append(i).appendTo(m),a("<td align='right'></td>").append(h).append(j).appendTo(m),c=c||0;var n=a.util.parseJquery(b),o=a.isNumeric(c)?c:n.tabs("getTabIndex",n.tabs("getTab",c)),p=n.find(">div.tabs-header>div.tabs-wrap>ul.tabs>li:eq("+o+")"),q=p.offset(),r=a.extend({},{left:q.left+10,top:q.top+10}),s=a.extend({iconCls:"icon-standard-application-form",title:"新建选项卡 - 设置参数",width:400,height:165,maximizable:!1,resizable:!1,autoVCenter:!1,autoHCenter:!1,enableSaveButton:!1,topMost:!1,applyButtonText:"打开",onApply:function(b){var c=e.val(),d=f.val();d=d||a.fn.tabs.extensions.panelOptions.href,a.string.isNullOrWhiteSpace(c)&&(c="新建选项卡");for(var i=0;n.tabs("getTab",c+=i?i:"");)i++;if(a.string.isNullOrWhiteSpace(d))return a.easyui.messager.show("操作提醒","请输入要创建的选项卡的路径！","info"),void f.focus();var j=h.prop("checked"),k=g.prop("checked");n.tabs("add",{title:c,href:d,refreshable:k,closable:!0,iniframe:j}),b.dialog("close")},content:d},r),t=a.easyui.showDialog(s);a.util.exec(function(){var a=t.find(">div.dialog-button>a:first");e.keydown(function(a){13==a.which&&f.focus()}),f.keydown(function(a){13==a.which&&g.focus()}),g.keydown(function(a){13==a.which&&h.focus()}),h.keydown(function(b){13==b.which&&a.focus()}),i.click(function(){g.click()}),j.click(function(){h.click()}),a.focus(),e.focus()})}function j(b,c){for(var d=a.util.parseJquery(b),e=d.tabs("getTab",c),f=e.panel("options"),g=a.extend({},f,{selected:!0,closable:!0}),h=2,i=g.title;d.tabs("getTab",g.title=i+"-"+h.toString());)h++;d.tabs("add",g)}function k(b,c){var d=(a.util.parseJquery(b),tabs.tabs("getTab",c)),e=d.panel("options");return e}function l(b){var c=a.util.parseJquery(b),d=c.tabs("getSelected"),e=d.panel("options");return e}function m(b){var c=a.util.parseJquery(b),d=c.tabs("getSelected"),e=c.tabs("getTabIndex",d);return e}function n(b){var c=a.util.parseJquery(b),d=c.tabs("getSelectedOption"),e=d.title;return e}function o(b,c){var d=a.util.parseJquery(b),e=a.isNumeric(c)?c:d.tabs("getTabIndex",d.tabs("getTab",c)),f=d.tabs("tabs");return a.array.range(f,0,e)}function p(b,c){var d=a.util.parseJquery(b),e=a.isNumeric(c)?c:d.tabs("getTabIndex",d.tabs("getTab",c)),f=d.tabs("tabs");return a.array.range(f,e+1)}function q(b,c){var d=a.util.parseJquery(b),e=a.isNumeric(c)?c:d.tabs("getTabIndex",d.tabs("getTab",c)),f=d.tabs("tabs");return a.array.merge(a.array.range(f,0,e),a.array.range(f,e+1))}function r(b){var c=a.util.parseJquery(b),d=c.tabs("tabs");return a.array.filter(d,M)}function s(b,c){var d=a.util.parseJquery(b),e=d.tabs("leftTabs",c);return a.array.filter(e,M)}function t(b,c){var d=a.util.parseJquery(b),e=d.tabs("rightTabs",c);return a.array.filter(e,M)}function u(b,c){var d=a.util.parseJquery(b),e=d.tabs("otherTabs",c);return a.array.filter(e,M)}function v(b,c){var d=a.util.parseJquery(b),e=d.tabs("leftTabs",c);a.each(e,function(){d.tabs("close",d.tabs("getTabIndex",this))})}function w(b,c){var d=a.util.parseJquery(b),e=d.tabs("rightTabs",c);a.each(e,function(){d.tabs("close",d.tabs("getTabIndex",this))})}function x(b,c){var d=a.util.parseJquery(b),e=d.tabs("otherTabs",c);a.each(e,function(){d.tabs("close",d.tabs("getTabIndex",this))})}function y(b){var c=a.util.parseJquery(b),d=c.tabs("tabs");a.each(a.array.clone(d),function(){c.tabs("close",c.tabs("getTabIndex",this))})}function z(b,c){var d=a.util.parseJquery(b),e=d.tabs("getTab",c);if(e&&e.panel("options").closable){var f=a.isNumeric(c)?c:d.tabs("getTabIndex",e);d.tabs("close",f)}}function A(b,c){var d=a.util.parseJquery(b),e=d.tabs("leftClosableTabs",c);a.each(a.array.clone(e),function(){d.tabs("close",d.tabs("getTabIndex",this))})}function B(b,c){var d=a.util.parseJquery(b),e=d.tabs("rightClosableTabs",c);a.each(a.array.clone(e),function(){d.tabs("close",d.tabs("getTabIndex",this))})}function C(b,c){var d=a.util.parseJquery(b),e=d.tabs("otherClosableTabs",c);a.each(a.array.clone(e),function(){d.tabs("close",d.tabs("getTabIndex",this))})}function D(b,c){var d=a.util.parseJquery(b),e=d.tabs("closableTabs",c);a.each(a.array.clone(e),function(){d.tabs("close",d.tabs("getTabIndex",this))})}function E(b,c){c=c||0;var d=a.util.parseJquery(b),e=d.tabs("getTab",c),f=e.panel("options"),g=a.isNumeric(c)?c:d.tabs("getTabIndex",e),h=d.find(">div.tabs-header>div.tabs-wrap>ul.tabs>li:eq("+g+")"),i=h.offset(),j=a.extend({},{left:i.left+10,top:i.top+10});a.easyui.showOption(f,{iconCls:"icon-standard-application-form",title:"显示选项卡 "+f.title+" 的 option 值",left:j.left,top:j.top,topMost:!1})}function F(c,d){if(d&&d.source!=b&&d.target!=b&&d.point){var e=d.source,f=d.target,g=a.array.contains(["before","after"],d.point)?d.point:"before",h=a.util.parseJquery(c),i=h.tabs("tabs"),j=h.tabs("getTab",e),k=h.tabs("getTab",f),l=h.tabs("getTabIndex",j),m=j.panel("header"),n=k.panel("header");if(j&&k){a.array.removeAt(i,l);var o=a.array.indexOf(i,k);a.array.insert(i,"before"==g?o:o+1,j),j=j.panel("panel"),k=k.panel("panel"),k[g](j),n[g](m)}}}function G(c,d){var e=d.target,f=a.util.parseJquery(c);d.target=b,f.tabs("add",d);var g=f.tabs("tabs");f.tabs("move",{source:g.length-1,target:e,point:"before"})}function H(b,c){if(c&&(c.which||a.isNumeric(c.which))&&c.title){var d=a.util.parseJquery(b),e=d.tabs("getTab",c.which);e.panel("setTitle",c.title)}}function I(b,c){c=c&&!a.util.isTopMost?!0:!1;var d,e=a.util.parseJquery(b),f=e.currentTabs();if(!c&&f.length)d=e.currentTabIndex(),d>-1&&f.tabs("close",d);
else{var g=a.util.parent.$;e=g.util.parseJquery(a.util.currentFrame),f=e.currentTabs(),f.length&&(d=e.currentTabIndex(),d>-1&&f.tabs("close",d))}}a.fn.tabs.extensions={};var J=a.fn.tabs.defaults.onContextMenu,K=function(b,c,e){a.isFunction(J)&&J.apply(this,arguments);var f=a.util.parseJquery(this),g=f.tabs("options");if(g.enableConextMenu){b.preventDefault();var h=f.tabs("getTab",e),i=h.panel("options"),j=f.tabs("leftClosableTabs",e),k=f.tabs("rightClosableTabs",e),l=f.tabs("otherClosableTabs",e),m=f.tabs("closableTabs"),n=(f.tabs("isSelected",e),{text:"显示选项卡的 option",iconCls:"icon-standard-application-form",disabled:!g.showOption,handler:function(){f.tabs("showOption",e)}}),o={text:"关闭选项卡",iconCls:"icon-standard-application-form-delete",disabled:!i.closable,handler:function(){f.tabs("closeClosable",e)}},p={text:"关闭其他选项卡",iconCls:"icon-standard-cancel",disabled:!l.length,handler:function(){f.tabs("closeOtherClosable",e)}},q={text:"刷新选项卡",iconCls:"icon-standard-table-refresh",disabled:!i.refreshable,handler:function(){f.tabs("refresh",e)}},r={text:"关闭左侧选项卡",iconCls:"icon-standard-tab-close-left",disabled:!j.length,handler:function(){f.tabs("closeLeftClosable",e)}},s={text:"关闭右侧选项卡",iconCls:"icon-standard-tab-close-right",disabled:!k.length,handler:function(){f.tabs("closeRightClosable",e)}},t={text:"关闭所有选项卡",iconCls:"icon-standard-cross",disabled:!m.length,handler:function(){f.tabs("closeAllClosable")}},u={text:"新建选项卡",iconCls:"icon-standard-tab-add",disabled:!g.enableNewTabMenu,handler:function(){f.tabs("newTab",e)}},v={text:"重复选项卡",iconCls:"icon-standard-control-repeat",disabled:!i.repeatable,handler:function(){f.tabs("repeat",e)}},w=[];if(a.array.likeArray(g.contextMenu)&&!a.util.isString(g.contextMenu)&&a.array.merge(w,g.contextMenu),g.showOption&&a.array.merge(w,"-",n),a.array.merge(w,i.closable?["-",o,p]:["-",p]),i.refreshable&&a.array.merge(w,"-",q),a.array.merge(w,"-",r,s,t),i.repeatable||g.enableNewTabMenu){var x=[];g.enableNewTabMenu&&x.push(u),i.repeatable&&x.push(v),a.array.merge(w,"-",x)}w=d(b,c,e,w,f),"-"==w[0]&&a.array.removeAt(w,0),a.easyui.showMenu({left:b.pageX,top:b.pageY,items:w})}},L=a.fn.tabs.methods.update,M=function(b){if(a.util.isJqueryObject(b)&&b.length){var c=a.data(b[0],"panel");return c&&c.options&&c.options.closable}return!1},N=(a.fn.tabs.extensions.panelOptions={iniframe:!1,repeatable:!1,refreshButton:!1,lazyload:!1,refreshable:!0,closeOnDblClick:!0,href:null},a.fn.tabs.extensions.methods={update:function(a,b){return a.each(function(){e(this,b)})},refresh:function(a,b){return a.each(function(){f(this,b)})},isSelected:function(a,b){return g(a[0],b)},isClosable:function(a,b){return h(a[0],b)},newTab:function(a,b){return a.each(function(){i(this,b)})},repeat:function(a,b){return a.each(function(){j(this,b)})},getTabOption:function(a,b){return k(a[0],b)},getSelectedOption:function(a){return l(a[0])},getSelectedIndex:function(a){return m(a[0])},getSelectedTitle:function(a){return n(a[0])},leftTabs:function(a,b){return o(a[0],b)},rightTabs:function(a,b){return p(a[0],b)},otherTabs:function(a,b){return q(a[0],b)},closableTabs:function(a){return r(a[0])},leftClosableTabs:function(a,b){return s(a[0],b)},rightClosableTabs:function(a,b){return t(a[0],b)},otherClosableTabs:function(a,b){return u(a[0],b)},closeLeft:function(a,b){return a.each(function(){v(this,b)})},closeRight:function(a,b){return a.each(function(){w(this,b)})},closeOther:function(a,b){return a.each(function(){x(this,b)})},closeAll:function(a){return a.each(function(){y(this)})},closeClosable:function(a,b){return a.each(function(){z(this,b)})},closeLeftClosable:function(a,b){return a.each(function(){A(this,b)})},closeRightClosable:function(a,b){return a.each(function(){B(this,b)})},closeOtherClosable:function(a,b){return a.each(function(){C(this,b)})},closeAllClosable:function(a){return a.each(function(){D(this)})},showOption:function(a,b){return a.each(function(){E(this,b)})},move:function(a,b){return a.each(function(){F(this,b)})},insert:function(a,b){return a.each(function(){G(this,b)})},setTitle:function(a,b){return a.each(function(){H(this,b)})}}),O=a.fn.tabs.extensions.defaults={lineHeight:0,enableConextMenu:!0,enableNewTabMenu:!1,onRefresh:function(){},contextMenu:null,onContextMenu:K,showOption:!1};a.extend(a.fn.tabs.defaults,O),a.extend(a.fn.tabs.methods,N),a.fn.extend({closeCurrentTab:function(a){return this.each(function(){I(this,a)})}})}(jQuery),function(a){a.fn.form.extensions={};var b=function(b,c){var d=a.util.parseJquery(b);return d.serializeObject(c)},c=(a.fn.form.methods.submit,function(b){for(var c,d,c=b,e=c.elements,f=e.length,g=0,h=0;f>g;++g,h=0)switch(c=e[g],c.type){case"text":case"hidden":case"password":case"textarea":if(a(c).val()!=a(c).attr("defaultValue")&&a(c).hasClass("combo-value"))return!0;if(c.defaultValue!=c.value&&!a(c).hasClass("combo-text"))return!0;break;case"radio":case"checkbox":if(c.defaultChecked!=c.checked)return!0;break;case"select-one":h=1;case"select-multiple":for(d=c.options;h<d.length;++h)if(d[h].defaultSelected!=d[h].selected)return!0}return!1}),d=function(b,c){function d(c){for(var d in c){var i=c[d],j=e(d,i);if(!j.length){var k=g.find('input[numberboxName="'+d+'"]');k.length?k.numberbox("setValue",i):(a('input[name="'+d+'"]',g).val(i),a('textarea[name="'+d+'"]',g).val(i),a('select[name="'+d+'"]',g).val(i),a('span[name="'+d+'"]',g).text(i),a('label[name="'+d+'"]',g).text(i),a('div[name="'+d+'"]',g).text(i))}f(d,i)}h.onLoadSuccess.call(b,c),g.form("validate")}function e(b,c){var d=g.find('input[name="'+b+'"][type=radio], input[name="'+b+'"][type=checkbox]');return d._propAttr("checked",!1),d.each(function(){var b=a(this);(b.val()==String(c)||a.inArray(b.val(),c)>=0)&&b._propAttr("checked",!0)}),d}function f(b,c){var d=a.fn.form.comboList,e=g.find('[comboName="'+b+'"]');if(e.length)for(var f=0;f<d.length;f++){var h=d[f];if(e.hasClass(h+"-f"))return void(e[h]("options").multiple?e[h]("setValues",c):e[h]("setValue",c))}}var g=a.util.parseJquery(b);a.data(b,"form")||a.data(b,"form",{options:a.extend({},a.fn.form.defaults)});var h=a.data(b,"form").options;if("string"==typeof c){var i={};if(0==h.onBeforeLoad.call(b,i))return;a.ajax({url:c,data:i,dataType:"json",success:function(a){d(a)},error:function(){h.onLoadError.apply(b,arguments)}})}else d(c)},e=a.fn.form.extensions.methods={getData:function(a,c){return b(a[0],c)},isChanged:function(a){return c(a[0])},load:function(a,b){return a.each(function(){d(this,b)})}},f=a.fn.form.extensions.defaults={};a.extend(a.fn.form.defaults,f),a.extend(a.fn.form.methods,e),a.fn.form.comboList=["combobox","combotree","combogrid","datetimebox","datebox","combo"]}(jQuery),function(a,b){function c(b){var c=a.util.parseJquery(b),e=c.validatebox("options");e._initialized||(d(b,e.prompt,e),e.autoFocus&&a.util.exec(function(){c.focus()}),e._initialized=!0)}function d(b,c,d){var e=a.util.parseJquery(b);d=d||e.validatebox("options"),d.prompt=c,a.html5.testProp("placeholder",e[0].nodeName)?e.attr("placeholder",c):(a.isFunction(!d.promptFocus)||(d.promptFocus=function(){e.hasClass("validatebox-prompt")&&(e.removeClass("validatebox-prompt"),e.val()==d.prompt&&e.val(""))},e.focus(d.promptFocus)),a.isFunction(!d.promptBlur)||(d.promptBlur=function(){a.string.isNullOrEmpty(e.val())&&e.addClass("validatebox-prompt").val(d.prompt)},e.blur(d.promptBlur)),a.string.isNullOrEmpty(e.val())&&e.addClass("validatebox-prompt").val(d.prompt))}function e(b){var c=a.util.parseJquery(b);return c.hasClass("validatebox-prompt")&&c.removeClass("validatebox-prompt").val(""),g.call(c,c)}a.fn.validatebox.extensions={};var f={engNum:{validator:function(a){return/^[0-9a-zA-Z]*$/.test(a)},message:"请输入英文字母或数字"},chsEngNum:{validator:function(a){return/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9])*$/.test(a)},message:"只允许汉字、英文字母或数字。"},code:{validator:function(a){return/^[\u0391-\uFFE5\w]+$/.test(a)},message:"只允许汉字、英文字母、数字及下划线."},name:{validator:function(a){return a.isUserName()},message:"用户名不合法(字母开头，允许6-16字节，允许字母数字下划线)"},minLength:{validator:function(a,b){return f.length.validator(a,[b[0]])},message:"最少输入 {0} 个字符."},maxLength:{validator:function(a,b){return f.length.validator(a,[0,b[0]])},message:"最多输入 {0} 个字符."},length:{validator:function(b,c){var d=a.trim(b).length,e=c[0],f=c[1];return(!e||d>=e)&&(!f||f>=d)},message:"输入内容长度必须介于 {0} 和 {1} 个字符数之间."},contains:{validator:function(b,c){return a.string.contains(b,c[0])},message:"输入的内容必须包含 {0}."},startsWith:{validator:function(b,c){return a.string.startsWith(b,c[0])},message:"输入的内容必须以 {0} 作为起始字符."},endsWith:{validator:function(b,c){return a.string.endsWith(b,c[0])},message:"输入的内容必须以 {0} 作为起始字符."},longDate:{validator:function(b){return a.string.isLongDate(b)},message:"输入的内容必须是长日期时间(yyyy-MM-dd hh:mm:ss)格式."},shortDate:{validator:function(b){return a.string.isShortDate(b)},message:"输入的内容必须是短日期(yyyy-MM-dd)格式."},date:{validator:function(b){return a.string.isDate(b)},message:"输入的内容必须是长日期时间(yyyy-MM-dd hh:mm:ss)或短日期(yyyy-MM-dd)格式."},tel:{validator:function(b){return a.string.isTel(b)},message:"输入的内容必须是电话号码(中国)格式."},mobile:{validator:function(b){return a.string.isMobile(b)},message:"输入的内容必须是移动电话号码(中国)格式."},telOrMobile:{validator:function(b){return a.string.isTelOrMobile(b)},message:"输入的内容必须是电话号码(中国)或移动电话号码(中国)格式."},fax:{validator:function(b){return a.string.isFax(b)},message:"输入的内容必须是传真号码(中国)格式."},email:{validator:function(b){return a.string.isEmail(b)},message:"输入的内容必须是电子邮箱(Email)地址格式."},zipCode:{validator:function(b){return a.string.isZipCode(b)},message:"输入的内容必须是邮政编码(中国)格式."},existChinese:{validator:function(b){return a.string.existChinese(b)},message:"输入的内容必须是包含中文汉字."},chinese:{validator:function(b){return a.string.isChinese(b)},message:"输入的内容必须是纯中文汉字."},english:{validator:function(b){return a.string.isEnglish(b)},message:"输入的内容必须是纯英文字母."},fileName:{validator:function(b){return a.string.isFileName(b)},message:'输入的内容必须是合法的文件名(不能包含字符 \\/:*?"<>|).'},ipv4:{validator:function(b){return a.string.isIPv4(b)},message:"输入的内容必须是正确的 IP地址v4 格式."},url:{validator:function(b){return a.string.isUrl(b)},message:"输入的内容必须是正确的 url 格式."},ipv4url:{validator:function(b){return a.string.isUrlOrIPv4(b)},message:"输入的内容必须是正确的 IP地址v4 或 url 格式."},currency:{validator:function(b){return a.string.isCurrency(b)},message:"输入的内容必须是正确的货币金额(阿拉伯数字表示法)格式."},qq:{validator:function(b){return a.string.isQQ(b)},message:"输入的内容必须是正确 QQ 号码格式."},msn:{validator:function(b){return a.string.isMSN(b)},message:"输入的内容必须是正确 MSN 账户名格式."},unNormal:{validator:function(b){return a.string.isUnNormal(b)},message:"输入的内容必须是不包含空格和非法字符Z."},carNo:{validator:function(b){return a.string.isCarNo(b)},message:"输入的内容必须是合法的汽车车牌号码格式."},carEngineNo:{validator:function(b){return a.string.isCarEngineNo(b)},message:"输入的内容必须是合法的汽车发动机序列号格式."},idCard:{validator:function(b){return a.string.isIDCard(b)},message:"输入的内容必须是合法的身份证号码(中国)格式."},integer:{validator:function(b){return a.string.isInteger(b)},message:"输入的内容必须是合法的整数格式."},integerRange:{validator:function(b,c){return a.string.isInteger(b)&&(c[0]||b>=c[0])&&(c[1]||b<=c[1])},message:"输入的内容必须是合法的整数格式且值介于 {0} 与 {1} 之间."},numeric:{validator:function(c,d){return a.string.isNumeric(c,d?d[0]:b)},message:"输入的内容必须是指定类型的数字格式."},numericRange:{validator:function(c,d){return a.string.isNumeric(c,d?d[2]:b)&&(d[0]||c>=d[0])&&(d[1]||c<=d[1])},message:"输入的内容必须是指定类型的数字格式且介于 {0} 与 {1} 之间."},color:{validator:function(b){return a.string.isColor(b)},message:"输入的内容必须是正确的 颜色(#FFFFFF形式) 格式."},password:{validator:function(b){return a.string.isSafePassword(b)},message:"输入的内容必须是安全的密码字符(由字符和数字组成，至少 6 位)格式."},equals:{validator:function(b,c){var d=c[0],e=c[1];if(e)switch(String(e).toLowerCase()){case"jquery":case"dom":d=a.util.parseJquery(d).val();break;case"id":d=a.util.parseJquery("#"+d).val();break;case"string":}return b===d},message:"输入的内容不匹配."}};a.extend(a.fn.validatebox.defaults.rules,f);var g=a.fn.validatebox.methods.isValid,h=a.fn.validatebox;a.fn.validatebox=function(b){return"string"==typeof b?h.apply(this,arguments):(b=b||{},this.each(function(){var d=a.util.parseJquery(this),e=a.extend({},a.fn.validatebox.parseOptions(this),b);h.call(d,e),c(this)}))},a.union(a.fn.validatebox,h);var i=a.fn.validatebox.extensions.methods={setPrompt:function(a,b){return a.each(function(){d(this,b)})},validate:function(a){return a.each(function(){e(this)})},isValid:function(a){return e(a[0])}},j=a.fn.validatebox.extensions.defaults={prompt:null,autoFocus:!1};a.extend(a.fn.validatebox.defaults,j),a.extend(a.fn.validatebox.methods,i);var k=".validatebox-prompt{ color: #ccc; }";a.util.addCss(k);var l=a.fn.val;a.fn.val=function(b){var c,d;if(this.length>0&&this.is(".validatebox-text.validatebox-prompt")&&!a.html5.testProp("placeholder",this[0].nodeName)){if(d=this.validatebox("options"),0==arguments.length)return c=l.apply(this,arguments),c==d.prompt?"":c;b&&b!=d.prompt&&this.removeClass("validatebox-prompt")}return l.apply(this,arguments)}}(jQuery),function(a){function b(b,c){var d=a.util.parseJquery(b),e=a.data(b,"combo"),f=e.combo,g=f.find("span.combo-arrow").removeAttr("class").addClass("combo-arrow");c&&g.addClass(c),d.combo("options").iconCls=c}function c(b,c){var d=a.util.parseJquery(b),e=d.combo("options"),f=d.combo("textbox");e.required=f.validatebox("options").required=c}function d(b){var c=a(b),d=c.combo("options");a.isFunction(d.onBeforeDestroy)&&0==d.onBeforeDestroy.call(b)||(g.call(b,c),a.isFunction(d.onDestroy)&&d.onDestroy.call(b))}function e(b){return a.data(b,"combo").combo}function f(b){var c=a.util.parseJquery(b),d=a.data(b,"combo"),e=c.combo("options"),f=d.panel,g=d.combo,h=g.find(".combo-arrow"),i=e.extensions?e.extensions:e.extensions={};i._initialized||(c.combo("textbox").focus(function(){e.autoShowPanel&&f.is(":hidden")&&c.combo("showPanel")}),h.unbind("click.combo").bind("click.combo",function(){f.is(":visible")?c.combo("hidePanel"):(a("div.combo-panel:visible").panel("close"),c.combo("showPanel"),c.combo("textbox").focus())}),e.iconCls&&c.combo("setIcon",e.iconCls),a.util.browser.msie&&g._outerWidth()!=e.width&&a.util.exec(function(){c.combo("resize",e.width)}),i._initialized=!0)}a.fn.combo.extensions={};var g=a.fn.combo.methods.destroy,h=a.fn.combo;a.fn.combo=function(a){return"string"==typeof a?h.apply(this,arguments):h.apply(this,arguments).each(function(){f(this)})},a.union(a.fn.combo,h);var i=a.fn.combo.extensions.defaults={iconCls:null,autoShowPanel:!0,onBeforeDestroy:function(){},onDestroy:function(){}},j=a.fn.combo.extensions.methods={setIcon:function(a,c){return a.each(function(){b(this,c)})},setRequired:function(a,b){return a.each(function(){c(this,b)})},destroy:function(a){return a.each(function(){d(this)})},combo:function(a){return e(a[0])}};a.extend(a.fn.combo.defaults,i),a.extend(a.fn.combo.methods,j)}(jQuery),function(a){function b(c,d,e){return a.array.map(d,function(d){if(!d||a.util.isString(d))return d;var f=a.extend({},d);return f.id=a.isFunction(d.id)?d.id.call(f,c,e):d.id,f.text=a.isFunction(d.text)?d.text.call(f,c,e):d.text,f.iconCls=a.isFunction(d.iconCls)?d.iconCls.call(f,c,e):d.iconCls,f.disabled=a.isFunction(d.disabled)?d.disabled.call(f,c,e):d.disabled,f.hideOnClick=a.isFunction(d.hideOnClick)?d.hideOnClick.call(f,c,e):d.hideOnClick,f.onclick=a.isFunction(d.onclick)?function(a,b,c){d.onclick.call(this,a,e,b,c)}:d.onclick,f.handler=a.isFunction(d.handler)?function(a,b,c){d.handler.call(this,a,e,b,c)}:d.handler,f.children&&f.children.length&&(f.children=b(c,f.children,e)),f})}a.fn.window.extensions={};var c=function(c){var d=a.util.parseJquery(c),e=a.data(c,"window"),f=d.window("options");if(f._initialized||(d.window("header").on({dblclick:function(){var a=d.window("options");a.autoRestore&&(a.maximized?d.window("restore"):a.maximizable&&d.window("maximize"))},contextmenu:function(c){var e=d.window("options");if(e.enableHeaderContextMenu){c.preventDefault();var f=[{text:"最大化",iconCls:"panel-tool-max",disabled:!e.maximized&&e.maximizable?!1:!0,onclick:function(){d.window("maximize")}},{text:"恢复",iconCls:"panel-tool-restore",disabled:e.maximized?!1:!0,onclick:function(){d.window("restore")}},"-",{text:"关闭",iconCls:"panel-tool-close",disabled:!e.closable,onclick:function(){d.window("close")}}],g=a.array.likeArray(e.headerContextMenu)?e.headerContextMenu:[];g.length&&a.array.insertRange(f,0,a.util.merge([],g,"-")),f=b(c,f,d),a.easyui.showMenu({items:f,left:c.pageX,top:c.pageY})}}}),f._initialized=!0),f.draggable){var g=e.window.draggable("options"),h=g.onStartDrag,i=g.onStopDrag;g.onStartDrag=function(){h.apply(this,arguments),d.window("body").addClass("window-body-hidden").children().addClass("window-body-hidden-proxy")},g.onStopDrag=function(){i.apply(this,arguments),d.window("body").removeClass("window-body-hidden").children().removeClass("window-body-hidden-proxy")}}},d=a.fn.window;a.fn.window=function(b){return"string"==typeof b?d.apply(this,arguments):(b=b||{},this.each(function(){var e=a.util.parseJquery(this);d.call(e,b),c(this)}))},a.union(a.fn.window,d);var e=a.fn.window.extensions.methods={},f=a.fn.window.extensions.defaults=a.extend({},{autoHCenter:!0,autoVCenter:!0,autoCloseOnEsc:!0,autoRestore:!0,enableHeaderContextMenu:!0,headerContextMenu:null});a.extend(a.fn.window.defaults,f),a.extend(a.fn.window.methods,e),a(function(){a(window).resize(function(){a(".panel-body.window-body").each(function(){var b=a(this),c=b.window("options");if(c&&c.draggable)if(c.autoHCenter||c.autoVCenter){var d=c.autoHCenter&&c.autoVCenter?"center":c.autoHCenter?"hcenter":"vcenter";b.window(d)}else c.inContainer&&b.window("move")})}),a(document).keydown(function(b){27==b.which&&a("div.window-mask:last").prevAll("div.panel.window:first").children(".panel-body.window-body").each(function(){var b=a(this),c=b.window("options");c&&c.closable&&c.autoCloseOnEsc&&!b.window("header").find(".panel-tool a").attr("disabled")&&a.util.exec(function(){b.window("close")})})}),a("body").on("click","div.window-mask:last",function(){a(this).prevAll("div.panel.window:first").shine()})});var g=".window-body-hidden { background-color: #95b8e7; filter: alpha(opacity=60); opacity: 0.6; }.window-body-hidden-proxy { visibility: hidden; }.window-proxy { background-color: #0e2d5f; filter: alpha(opacity=60); opacity: 0.6; }";a.util.addCss(g)}(jQuery),function(a,b){function c(b,c,f){f=f||(c._extensionsDatagrid?c._extensionsDatagrid:c._extensionsDatagrid={}),Jb(b,f);var g=b.datagrid("getData"),h=f.oldData;if(g!=h&&(f.filterData=[]),d(b,c),c.columnFilter){f.oldData=g;var i=b.datagrid("getPanel").find("div.datagrid-view div.datagrid-header"),k=i.find("table.datagrid-htable tr.datagrid-header-row"),l=k.find("td[field]").filter(function(){var b=a(this),c=b.attr("colspan");return c&&"1"!=c||b.find("div.datagrid-header-check,div.datagrid-header-rownumber").length?!1:!0}),m=c.columnFilter=a.extend({panelHeight:100,position:"top"},c.columnFilter),n=a.array.contains(["top","bottom"],m.position)?m.position:"top",o=(m.panelHeight=a.isNumeric(m.panelHeight)&&m.panelHeight>=60?m.panelHeight:60,i.height(),b.datagrid("getRows"));l.each(function(){var d=a(this).addClass("datagrid-header-filter").removeClass("datagrid-header-filter-top datagrid-header-filter-bottom"),g=(d.find("div.datagrid-cell").addClass("datagrid-header-filter-cell"),d.attr("field")),h=b.datagrid("getColumnOption",g),i=h.width,j=(a("<hr />").addClass("datagrid-header-filter-line")["top"==n?"prependTo":"appendTo"](this),a("<div></div>").attr("field",g).addClass("datagrid-header-filter-container").css({height:m.panelHeight,width:i})["top"==n?"prependTo":"appendTo"](this));d.addClass("top"==n?"datagrid-header-filter-top":"datagrid-header-filter-bottom"),g&&e(b,c,f,j,h,o,l)}),f.filterData&&f.filterData.length?b.datagrid("hideRows",f.filterData):j(b,c,f,o,l)}}function d(b,c){if(c.columnFilter){var d=b.datagrid("getPanel").find("div.datagrid-view div.datagrid-header table.datagrid-htable tr.datagrid-header-row td[field]").filter(function(){var b=a(this),c=b.attr("colspan");return c&&"1"!=c||b.find("div.datagrid-header-check,div.datagrid-header-rownumber").length?!1:!0});d.removeClass("datagrid-header-filter datagrid-header-filter-top datagrid-header-filter-bottom").find("div.datagrid-cell").removeClass("datagrid-header-filter-cell"),d.find("hr.datagrid-header-filter-line,div.datagrid-header-filter-container").remove();var e=b.datagrid("getColumnFields","all");b.datagrid("fixColumnSize",e[e.length-1])}}function e(b,c,d,e,i,j,k){if(i.filterable){var l=i.field,m=b.datagrid("getDistinctColumnData",l),n=a.array.contains(["checkbox","livebox","caps","lower","none"],i.filter)?i.filter:"checkbox",o=i.precision,p=i.step;switch(n){case"checkbox":f(b,d,e,l,j,m);break;case"livebox":g(b,e,l,j);break;case"caps":h(b,e,l,p,o,j,m,"<=",c.columnFilter.panelHeight,k);break;case"lower":h(b,e,l,p,o,j,m,">=",c.columnFilter.panelHeight,k);break;case"none":}}}function f(b,c,d,e,f,g){a.each(g,function(g,h){var i=a("<div></div>").addClass("datagrid-header-filter-item").attr("text",h).appendTo(d),j=(a("<div></div>").addClass("datagrid-header-filter-item-text").text(h).appendTo(i),a("<div></div>").addClass("datagrid-header-filter-item-icon").appendTo(i),function(){var d=a.array.filter(f,function(a){return a[e]==h}),g=a.array.filter(c.filterData,function(a){return a[e]==h});b.datagrid(g.length?"showRows":"hideRows",d)});i.click(j)})}function g(b,c,d,e){a("<div></div>").addClass("datagrid-header-filter-livebox-text").text("模糊过滤：").appendTo(c);var f=a("<input />").addClass("datagrid-header-filter-livebox").appendTo(c),g=a("<a />").linkbutton({plain:!0,iconCls:"icon-search"}).appendTo(c).click(function(){b.datagrid("showRows",!0);var c=f.val();if(a.string.isNullOrEmpty(c))return void f.focus();var g=a.array.filter(e,function(a){return-1==String(a[d]).indexOf(c)});b.datagrid("hideRows",g),f.focus()});a("<a />").linkbutton({plain:!0,iconCls:"icon-undo"}).appendTo(c).click(function(){var a=f.val();a?(f.val("").focus(),g.click()):f.focus()}),f.keypress(function(a){13==a.which&&g.click()})}function h(b,c,d,e,f,g,h,j,k,l){var m=a.array.map(h,function(b){return b=parseFloat(b),a.isNumeric(b)?b:0}),n=m.length?a.array.min(m):0,o=m.length?a.array.max(m):0,p=m.length?a.array.max(m,function(b,c){return a.util.compare(a.number.precision(b),a.number.precision(c))}):0,q=m.length?a.number.precision(p):0,r=k-45,s=a("<div></div>").addClass("datagrid-header-filter-itemwrap").text(j).appendTo(c),t=a("<div></div>").addClass("datagrid-header-filter-sliderwrap").css({height:r+10})["<="==j?"appendTo":"prependTo"](c),u=a("<input />").addClass("datagrid-header-filter-numeric").appendTo(s),v=a("<input />").addClass("datagrid-header-filter-slider").appendTo(t),w=function(a){i(b,d,g,a,j,u,v,l)};u.numberbox({value:"<="==j?o:n,min:n,max:o,precision:f,onChange:w}),u.keypress(function(b){if(13==b.which){var c=u.val();u.numberbox("setValue",a.isNumeric(c)?c:0)}}),v.slider({height:r,mode:"v",showTip:!0,value:"<="==j?o:n,min:n,max:o,rule:[n,"|",o],step:e,onSlideEnd:w,tipFormatter:function(b){return a.number.round(b||0,q)}})}function i(b,c,d,e,f,g,h,i){var j=i||b.datagrid("getPanel").find("div.datagrid-view div.datagrid-header table.datagrid-htable tr.datagrid-header-row td[field]").filter(function(){var b=a(this),c=b.attr("colspan");return c&&"1"!=c||b.find("div.datagrid-header-check,div.datagrid-header-rownumber").length?!1:!0}),k=j.filter(function(){return a(this).attr("field")==c});g=g?g:k.find(".datagrid-header-filter-numeric"),h=h?h:k.find(".datagrid-header-filter-slider");var l=a.array.filter(d,function(b){return b=parseFloat(b[c]),b=a.isNumeric(b)?b:0,">="==f?e>b:b>e});b.datagrid("showRows",!0).datagrid("hideRows",l),g.numberbox("setValue",e),h.slider("setValue",e)}function j(b,c,d,e,f){c.columnFilter&&(f=f||b.datagrid("getPanel").find("div.datagrid-view div.datagrid-header table.datagrid-htable tr.datagrid-header-row td[field]").filter(function(){var b=a(this),c=b.attr("colspan");return c&&"1"!=c||b.find("div.datagrid-header-check,div.datagrid-header-rownumber").length?!1:!0}),f.each(function(){var c=a(this),f=c.attr("field");k(b,d,e,c,f)}))}function k(b,c,d,e,f){var g=g=b.datagrid("getColumnOption",f),h=(g.precision,a.array.contains(["checkbox","livebox","caps","lower","none"],g.filter)?g.filter:"checkbox");switch(h){case"checkbox":l(b,c,d,e,f);break;case"livebox":n(b,c,d,e,f);break;case"caps":o(b,c,d,e,f);break;case"lower":p(b,c,d,e,f);break;case"none":}}function l(b,c,d,e,f){e.find("div.datagrid-header-filter-item").each(function(){var b=a(this),e=b.attr("text"),g=b.find("div.datagrid-header-filter-item-icon"),h=a.array.sum(d,function(a){return a[f]==e?1:0}),i=a.array.sum(c.filterData,function(a){return a[f]==e?1:0}),j=0==i?"tree-checkbox1":i>=h?"tree-checkbox0":"tree-checkbox2";a.easyui.tooltip.init(b,{content:(a.string.isNullOrEmpty(e)?"空白":e)+": 共"+h+"个元素"}),m(g,j)})}function m(a,b){a.removeClass("tree-checkbox0 tree-checkbox1 tree-checkbox2").addClass(b)}function n(){}function o(){}function p(){}function q(b,c,d){d.onHeaderContextMenuBak=c.onHeaderContextMenu,c.onHeaderContextMenu=function(e,f){if(a.isFunction(d.onHeaderContextMenuBak)&&d.onHeaderContextMenuBak.apply(this,arguments),c.enableHeaderContextMenu){var g=a.fn.datagrid.extensions.parseContextMenuEventData(b,c,e),h=v(b,c,d,e,f,g);a.easyui.showMenu({items:h,left:e.pageX,top:e.pageY,hideDisabledMenu:c.hideDisabledMenu}),e.preventDefault()}}}function r(b,c,d){d.onRowContextMenuBak=c.onRowContextMenu,c.onRowContextMenu=function(e,f,g){if(a.isFunction(d.onRowContextMenuBak)&&d.onRowContextMenuBak.apply(this,arguments),c.selectOnRowContextMenu&&b.datagrid("selectRow",f),c.enableRowContextMenu){var h=a.fn.datagrid.extensions.parseContextMenuEventData(b,c,e),i=w(b,c,d,e,f,g,h);c.autoBindDblClickRow&&c.dblClickRowMenuIndex>=0&&a.util.likeArray(c.rowContextMenu)&&!a.util.isString(c.rowContextMenu)&&c.rowContextMenu.length>c.dblClickRowMenuIndex&&(i[c.dblClickRowMenuIndex].bold=!0),a.easyui.showMenu({items:i,left:e.pageX,top:e.pageY,hideDisabledMenu:c.hideDisabledMenu}),e.preventDefault()}}}function s(b,c,d){c.enableHeaderClickMenu&&b.datagrid("getPanel").find(".datagrid-view .datagrid-header table.datagrid-htable tr.datagrid-header-row td[field]").filter(function(){var b=a(this),c=b.attr("colspan");return c&&"1"!=c||b.find("div.datagrid-header-check,div.datagrid-header-rownumber").length?!1:!0}).find("div.datagrid-cell").each(function(){t(b,c,d,this)})}function t(b,c,d,e){e=a.util.parseJquery(e),e.off(".hoverArrow");var f=a("<span class='s-btn-downarrow datagrid-header-cell-arrow'>&nbsp;</span>").click(function(e){var g=a(this),h=g.offset(),i=g.outerHeight(),j=g.parent().parent().attr("field"),k=a.fn.datagrid.extensions.parseContextMenuEventData(b,c,e),l=v(b,c,d,e,j,k),m=a.easyui.showMenu({items:l,left:h.left,top:h.top+i}),n=m.menu("options"),o=n.onHide;return f.hidable=!1,n.onHide=function(){f.hidable=!0,f.removeClass("datagrid-header-cell-arrow-show"),o.apply(this,arguments)},!1}).prependTo(e);e.on({"mouseenter.hoverArrow":function(){f.addClass("datagrid-header-cell-arrow-show")},"mouseleave.hoverArrow":function(){(!a.util.isBoolean(f.hidable)||f.hidable)&&f.removeClass("datagrid-header-cell-arrow-show")}})}function u(b,c,d){d.onDblClickRowBak=c.onDblClickRow,c.onDblClickRow=function(e,f){a.isFunction(d.onDblClickRowBak)&&d.onDblClickRowBak.apply(this,arguments);var g=a.fn.datagrid.extensions.parseContextMenuEventData(b,c,null);if(items=w(b,c,d,null,e,f,g),c.autoBindDblClickRow&&c.dblClickRowMenuIndex>=0&&a.util.likeArray(c.rowContextMenu)&&!a.util.isString(c.rowContextMenu)&&c.rowContextMenu.length>c.dblClickRowMenuIndex){var h=items[c.dblClickRowMenuIndex],i=h.handler||h.onclick;return i(null,e,f,g,b,h,null)}c.autoEditing&&b.datagrid("beginEdit",e)}}function v(b,c,d,e,f,g){var h=[],i=a.util.likeArray(c.headerContextMenu)&&!a.util.isString(c.headerContextMenu)?c.headerContextMenu:[];i.length&&a.array.merge(h,i);var j=x(b,c,d,e,f,g);return j.length&&a.array.merge(h,"-",j),h=a.fn.datagrid.extensions.parseHeaderContextMenuMap(e,f,g,h,b),"-"==h[0]&&a.array.removeAt(h,0),h}function w(b,c,d,e,f,g,h){var i=[],j=a.util.likeArray(c.rowContextMenu)&&!a.util.isString(c.rowContextMenu)?c.rowContextMenu:[];j.length&&a.array.merge(i,j);var k=A(b,c,d,e,f,g,h);return k.length&&a.array.merge(i,"-",k),i=a.fn.datagrid.extensions.parseRowContextMenuMap(e,f,g,h,i,b),"-"==i[0]&&a.array.removeAt(i,0),i}function x(b,c,d,e,f,g){var h=[],i=c.exportMenu,j=b.datagrid("getColumnOption",f),k=b.datagrid("getColumnOption",f).sortable;"object"==typeof i&&(i=a.extend({current:!1,all:!1,submenu:!0},i));var l={text:"升序",iconCls:"icon-standard-hmenu-asc",disabled:1!=k,handler:function(){return b.datagrid("sort",{sortName:f,sortOrder:"asc"})}},m={text:"降序",iconCls:"icon-standard-hmenu-desc",disabled:1!=k,handler:function(){return b.datagrid("sort",{sortName:f,sortOrder:"desc"})}},n={text:"显示/隐藏列",iconCls:"icon-standard-application-view-columns",disabled:!1,children:[{text:"显示全部列",iconCls:function(){var b=d.fields?d.fields.length:0,c=a.array.sum(d.fieldOptions,function(a){return a.hidden?0:1});return c>=b?"tree-checkbox1":0==c?"tree-checkbox0":"tree-checkbox2"},hideOnClick:!1,handler:function(b,c,e,f,g,h){a.each(d.fields,function(){f.datagrid("showColumn",this)}),a(this).parent().children("div.menu-item:not(:eq(1))").each(function(){h.menu("setIcon",{target:this,iconCls:"tree-checkbox1"}),h.menu("enableItem",this)})}},{text:"还原默认",iconCls:"icon-standard-application-view-tile",hideOnClick:!1,handler:function(b,c,e,f,g,h){a.each(d.fieldOptionsBackup,function(){f.datagrid(1==this.hidden?"hideColumn":"showColumn",this.field)});var i=a(this).parent();i.children("div.menu-item:gt(1)").each(function(){var b=a(this).text(),c=a.array.first(d.fieldOptions,function(a){return a.title==b});c&&h.menu("setIcon",{target:this,iconCls:c.hidden?"tree-checkbox0":"tree-checkbox1"}),h.menu("enableItem",this)}),i.children("div.menu-item:first").each(function(){var b=d.fields?d.fields.length:0,c=a.array.sum(d.fieldOptions,function(a){return a.hidden?0:1});h.menu("setIcon",{target:this,iconCls:c>=b?"tree-checkbox1":0==c?"tree-checkbox0":"tree-checkbox2"})})}},"-"]},o={text:"过滤/显示",iconCls:"icon-standard-application-view-list",disabled:!j.filterable,children:[]},p={text:"导出当前页",iconCls:"icon-standard-page-white-put",disabled:!(1==i||1==i.current),handler:function(){return b.datagrid("exportExcel",!1)}},q={text:"导出全部",iconCls:"icon-standard-page-white-stack",disabled:!(1==i||1==i.all),handler:function(){return b.datagrid("exportExcel",!0)}};a.util.merge(n.children,y(b,c,d,e,f,g)),j.filterable&&a.util.merge(o.children,z(b,c,d,e,f,g)),a.util.merge(h,[l,m,"-",n,o]);var r=[p,q];return i&&a.array.merge(h,"-","object"!=typeof i||i.submenu?{text:"导出数据",iconCls:"icon-standard-page-save",children:r}:r),h}function y(b,c,d){return a.array.map(d.fieldOptions,function(b){var c=function(c,e,f,g,h,i){var j=a.util.parseJquery(this),k=j.parent().find(".menu-item:gt(1) .tree-checkbox1").length;if((1!=k||b.hidden)&&b.hidable){g.datagrid(b.hidden?"showColumn":"hideColumn",b.field),i.menu("setIcon",{target:this,iconCls:b.hidden?"tree-checkbox0":"tree-checkbox1"}),k=a.array.sum(d.fieldOptions,function(a){return a.hidden?0:1});var l=d.fields?d.fields.length:0;i.menu("setIcon",{target:j.parent().children("div.menu-item:first"),iconCls:k>=l?"tree-checkbox1":0==k?"tree-checkbox0":"tree-checkbox2"});var m=j.parent().find(".menu-item:gt(1)").filter(function(){return a(".tree-checkbox1",this).length?!0:!1});m.each(function(){i.menu(m.length>1?"enableItem":"disableItem",this)})}};return{text:b.title||b.field,iconCls:b.hidden?"tree-checkbox0":"tree-checkbox1",hideOnClick:!1,disabled:b.hidable?!1:!0,handler:c}})}function z(b,c,d,e,f){var g=b.datagrid("getRows"),h=b.datagrid("getDistinctColumnData",f),i=[{text:"全部",hideOnClick:!1,iconCls:d.filterData&&d.filterData.length?d.filterData.length>=g.length?"tree-checkbox0":"tree-checkbox2":"tree-checkbox1",handler:function(b,c,e,f,g,h){d.filterData&&d.filterData.length?f.datagrid("showRows",!0):f.datagrid("hideRows",!0),a(this).parent().children("div.menu-item[hideOnClick=false]").each(function(){h.menu("setIcon",{target:this,iconCls:d.filterData&&d.filterData.length?"tree-checkbox0":"tree-checkbox1"})
})}},"-"],j=h.length>=15,k=j?a.array.left(h,10):h,l=a.array.map(k,function(b){var c=a.array.filter(g,function(a){return a[f]==b}),e=c.length,h=a.array.sum(d.filterData,function(a){return a[f]==b?1:0}),i=h?h>=e?"tree-checkbox0":"tree-checkbox2":"tree-checkbox1",j=function(e,f,h,i,j,k){var l=a.array.sum(d.filterData,function(a){return a[f]==b?1:0});i.datagrid(l?"showRows":"hideRows",c),k.menu("setIcon",{target:this,iconCls:l?"tree-checkbox1":"tree-checkbox0"}),a(this).parent().children("div.menu-item:first").each(function(){k.menu("setIcon",{target:this,iconCls:d.filterData&&d.filterData.length?d.filterData.length>=g.length?"tree-checkbox0":"tree-checkbox2":"tree-checkbox1"})})};return{text:b,iconCls:i,hideOnClick:!1,handler:j}});if(a.array.merge(i,l),j){var m=b.datagrid("getColumnOption",f),n=m.title?m.title:m.field,o=function(){var c=a("<input />").attr({type:"button",value:"全部选择"}).click(function(){b.datagrid("showRows",!0),a(this).parent().find(":checkbox").each(function(){this.checked=!0})}),i=a("<input />").attr({type:"button",value:"全部不选"}).click(function(){b.datagrid("hideRows",!0),a(this).parent().find(":checkbox").each(function(){this.checked=!1})});a("<div></div>").append("<div>列："+n+"，共"+h.length+"项</div><hr />").css({padding:"10px"}).append(c).append(i).append("<hr />").each(function(){var c=a(this),e=a("<ul></ul>").css({"list-style-type":"decimal","padding-left":"40px","line-height":"18px"}).appendTo(c);a.each(h,function(c,h){var i="itemCheckbox_"+a.util.guid("N"),j=!a.array.some(d.filterData,function(a){return a[f]==h}),k=a("<li></li>").appendTo(e),l=a("<input />").attr({type:"checkbox",id:i,checked:j}).appendTo(k),m=(a("<label></label>").attr("for",i).text(h).appendTo(k),function(){var c=a.array.filter(g,function(a){return a[f]==h}),e=a.array.sum(d.filterData,function(a){return a[f]==h?1:0});b.datagrid(e?"showRows":"hideRows",c)});l.click(m)})}).dialog({title:"过滤/显示",iconCls:"icon-standard-application-view-detail",height:260,width:220,left:e.pageX,top:e.pageY,collapsible:!1,minimizable:!1,maximizable:!1,closable:!0,modal:!0,resizable:!0,onClose:function(){a.util.parseJquery(this).dialog("destroy")}}).dialog("open")};a.array.merge(i,["-",{text:"处理更多(共"+h.length+"项)...",iconCls:"icon-standard-application-view-detail",handler:o}])}return i}function A(b,c,d,e,f,g,h){var i=[],j=c.pagingMenu,k=c.moveMenu,l=c.exportMenu;"object"==typeof j&&(j=a.extend({disabled:!1,submenu:!0},j)),"object"==typeof k&&(k=a.extend({up:!1,down:!1,submenu:!0},k)),"object"==typeof l&&(l=a.extend({current:!1,all:!1,submenu:!0},l));var m={text:"刷新当前页",iconCls:"pagination-load",disabled:!c.refreshMenu,handler:function(){b.datagrid("reload")}},n={text:"首页",iconCls:"pagination-first",disabled:function(){return!c.pagination||h.page<=1},handler:function(){h.page>1&&h.pager.pagination("select",1)}},o={text:"上一页",iconCls:"pagination-prev",disabled:function(){return!c.pagination||h.page<=1},handler:function(){h.page>1&&h.pager.pagination("select",h.page-1)}},p={text:"下一页",iconCls:"pagination-next",disabled:function(){return!c.pagination||h.page>=h.pageCount},handler:function(){h.page<h.pageCount&&h.pager.pagination("select",h.page+1)}},q={text:"末页",iconCls:"pagination-last",disabled:function(){return!c.pagination||h.page>=h.pageCount},handler:function(){h.page<h.pageCount&&h.pager.pagination("select",h.pageCount)}},r={text:"移至最上",iconCls:"icon-standard-arrow-up",disabled:!(1==k||1==k.top),handler:function(){b.datagrid("moveRow",{source:f,target:0,point:"top"})}},s={text:"上移",iconCls:"icon-standard-up",disabled:!(1==k||1==k.up),handler:function(){b.datagrid("shiftRow",{point:"up",index:f})}},t={text:"下移",iconCls:"icon-standard-down",disabled:!(1==k||1==k.down),handler:function(){b.datagrid("shiftRow",{point:"down",index:f})}},u={text:"移至最下",iconCls:"icon-standard-arrow-down",disabled:!(1==k||1==k.bottom),handler:function(){var a=b.datagrid("getRows");b.datagrid("moveRow",{source:f,target:a.length-1,point:"bottom"})}},v={text:"导出当前页",iconCls:"icon-standard-page-white-put",disabled:!(1==l||1==l.current),handler:function(){return b.datagrid("exportExcel",!1)}},w={text:"导出全部",iconCls:"icon-standard-page-white-stack",disabled:!(1==l||1==l.all),handler:function(){return b.datagrid("exportExcel",!0)}};i.push(m);var x=[n,o,p,q],y=[r,s,"-",t,u],z=[v,w];return j&&a.array.merge(i,"-","object"!=typeof j||j.submenu?{text:"翻页",iconCls:"",disabled:!(1==j||!j.disabled),children:x}:x),k&&a.array.merge(i,"-","object"!=typeof k||k.submenu?{text:"上/下移动",iconCls:"",disabled:!k,children:y}:y),l&&a.array.merge(i,"-","object"!=typeof l||l.submenu?{text:"导出数据",iconCls:"icon-standard-page-save",disabled:!l,children:z}:z),i}a.fn.datagrid.extensions={};var B=a.fn.datagrid.methods.updateRow,C=a.fn.datagrid.methods.appendRow,D=a.fn.datagrid.methods.insertRow,E=function(b,d){if(d&&d.row&&a.isNumeric(d.index)){var e=a.util.parseJquery(b),f=e.datagrid("options");a.isFunction(f.onBeforeUpdateRow)&&0==f.onBeforeUpdateRow.call(b,d.index,d.row)||(B.call(e,e,d),c(e,f),Kb(e,f),Mb(e,f,d.index,d.row),a.isFunction(f.onUpdateRow)&&f.onUpdateRow.call(b,d.index,d.row))}},F=function(b,d){if(d){var e=a.util.parseJquery(b),f=e.datagrid("options");if(!a.isFunction(f.onBeforeAppendRow)||0!=f.onBeforeAppendRow.call(b,d)){C.call(e,e,d);var g=e.datagrid("getRows"),h=g.length-1;c(e,f),Kb(e,f),Mb(e,f,h,d),a.isFunction(f.onAppendRow)&&f.onAppendRow.call(b,d)}}},G=function(b,d){if(d&&d.row&&a.isNumeric(d.index)){var e=a.util.parseJquery(b),f=e.datagrid("options");a.isFunction(f.onBeforeInsertRow)&&0==f.onBeforeInsertRow.call(b,d.index,d.row)||(D.call(e,e,d),c(e,f),Kb(e,f),Mb(e,f,d.index,d.row),a.isFunction(f.onInsertRow)&&f.onInsertRow.call(b,d.index,d.row))}},H=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getChecked"),f=a.array.map(e,function(a){return d.datagrid("getRowIndex",a)});return a.array.contains(f,c)},I=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getSelections"),f=a.array.map(e,function(a){return d.datagrid("getRowIndex",a)});return a.array.contains(f,c)},J=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getColumnFields"),f=d.datagrid("getColumnFields",!0);f&&f.length&&a.array.contains(e,c)&&!a.array.contains(f,c)&&d.datagrid("moveColumn",{source:c,target:f[f.length-1],point:"after"})},K=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getColumnFields"),f=d.datagrid("getColumnFields",!0);e&&e.length&&!a.array.contains(e,c)&&a.array.contains(f,c)&&d.datagrid("moveColumn",{source:c,target:e[0],point:"before"})},L=function(b,c){if(c&&a.isNumeric(c.source)&&a.isNumeric(c.target)&&c.source!=c.target&&c.point){a.array.contains(["top","bottom"],c.point)||(c.point="top");var d=a.util.parseJquery(b),e=d.datagrid("options"),f=d.datagrid("getRows"),g=f[c.source],h=f[c.target];if(g&&h&&(!a.isFunction(e.onBeforeDrop)||0!=e.onBeforeDrop.call(b,h,g,c.point))){var i=d.datagrid("popRow",c.source),j=d.datagrid("getRowIndex",h);switch(f=d.datagrid("getRows"),c.point){case"top":d.datagrid("insertRow",{index:j,row:i});break;case"bottom":j++>=f.length?d.datagrid("appendRow",i):d.datagrid("insertRow",{index:j,row:i})}i&&a.isFunction(e.onDrop)&&e.onDrop.call(b,h,g,c.point)}}},M=function(b,c){if(c&&a.isNumeric(c.index)&&c.point&&a.array.contains(["up","down"],c.point)){var d=a.util.parseJquery(b),e=(d.datagrid("options"),"up"==c.point?c.index-1:c.index+1),f="up"==c.point?"top":"bottom";d.datagrid("moveRow",{source:c.index,target:e,point:f})}},N=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getRows"),f=c+1;return e[f]?e[f]:null},O=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getRows"),f=c-1;return e[f]?e[f]:null},P=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getRows"),f=e[c];return f?(d.datagrid("deleteRow",c),f):null},Q=function(b){function c(a,b){var c=a.draggable("proxy").find("span.tree-dnd-icon");c.removeClass("tree-dnd-yes tree-dnd-no").addClass(b?"tree-dnd-yes":"tree-dnd-no")}var d=a.util.parseJquery(b),e=d.datagrid("options");d.datagrid("getPanel").find("div.datagrid-view div.datagrid-body table.datagrid-btable tr.datagrid-row").draggable({disabled:!1,revert:!0,cursor:"default",deltaX:10,deltaY:5,proxy:function(b){var c=a.util.parseJquery(b),e=parseInt(c.attr("datagrid-row-index")),f=d.datagrid("getRowDom",e).clone(),g=a("<tr></tr>").addClass("datagrid-row datagrid-row-selected");a("<td><span class='tree-dnd-icon tree-dnd-no' ></span></td>").appendTo(g);var h=f.find("td").each(function(a){6>a&&g.append(this)});return h.length>6&&a("<td>...</td>").css("width","40px").appendTo(g),a("<table></table>").addClass("tree-node-proxy").appendTo("body").append(g).hide()},onBeforeDrag:function(c){var f=a.util.parseJquery(this),g=parseInt(f.attr("datagrid-row-index")),h=d.datagrid("getRowData",g);return a.isFunction(e.onBeforeDrag)&&0==e.onBeforeDrag.call(b,g,h)?!1:1!=c.which?!1:"checkbox"==c.target.type?!1:void 0},onStartDrag:function(){var c=a.util.parseJquery(this),f=parseInt(c.attr("datagrid-row-index")),g=d.datagrid("getRowData",f);c.draggable("proxy").css({left:-1e4,top:-1e4}),a.isFunction(e.onBeforeDrag)&&e.onStartDrag.call(b,f,g)},onStopDrag:function(){var c=a.util.parseJquery(this),f=parseInt(c.attr("datagrid-row-index")),g=d.datagrid("getRowData",f);a.isFunction(e.onStopDrag)&&e.onStopDrag.call(b,f,g)},onDrag:function(b){var c=b.pageX,d=b.pageY,e=b.data.startX,f=b.data.startY,g=Math.sqrt((c-e)*(c-e)+(d-f)*(d-f));g>15&&a(this).draggable("proxy").show(),this.pageY=b.pageY}}).droppable({accept:"tr.datagrid-row",onDragEnter:function(f,g){var h=a.util.parseJquery(this),i=a.util.parseJquery(g),j=parseInt(h.attr("datagrid-row-index")),k=parseInt(i.attr("datagrid-row-index")),l=d.datagrid("getRowData",j),m=d.datagrid("getRowData",k),n=d.datagrid("getRowDom",j),o=n.find("td"),p=h.data("dnd"),q={droper:h,drager:i,droperIndex:j,dragerIndex:k,droperRow:l,dragerRow:m,droperRowDom:n,mark:o};p?a.extend(p,q):h.data("dnd",q),a.isFunction(e.onDragEnter)&&0==e.onDragEnter.call(b,l,m)&&(c(i,!1),o.removeClass("datagrid-header-cell-top datagrid-header-cell-bottom"),h.droppable("disable"))},onDragOver:function(d,f){var g=a.util.parseJquery(this),h=g.data("dnd"),i=h.drager,j=h.droperRow,k=h.dragerRow,l=h.mark;if(!g.droppable("options").disabled){var m=f.pageY,n=g.offset().top,o=n+g.outerHeight();c(i,!0),l.removeClass("datagrid-header-cell-top datagrid-header-cell-bottom"),l.addClass(m>n+(o-n)/2?"datagrid-header-cell-bottom":"datagrid-header-cell-top"),0==e.onDragOver.call(b,j,k)&&(c(i,!1),l.removeClass("datagrid-header-cell-top datagrid-header-cell-bottom"),g.droppable("disable"))}},onDragLeave:function(){var d=a.util.parseJquery(this),f=d.data("dnd"),g=f.drager,h=f.droperRow,i=f.dragerRow,j=f.mark;c(g,!1),j.removeClass("datagrid-header-cell-top datagrid-header-cell-bottom"),a.isFunction(e.onDragLeave)&&e.onDragLeave.call(b,h,i)},onDrop:function(){var b=a.util.parseJquery(this),c=b.data("dnd"),e=c.droperIndex,f=c.dragerIndex,g=c.mark,h=g.hasClass("datagrid-header-cell-top")?"top":"bottom";d.datagrid("moveRow",{target:e,source:f,point:h}),g.removeClass("datagrid-header-cell-top datagrid-header-cell-bottom")}}),e.dndRow=!0},R=function(b){var c=a.util.parseJquery(b),d=c.datagrid("options");c.datagrid("getPanel").find("div.datagrid-view div.datagrid-body table.datagrid-btable tr.datagrid-row").draggable("disable"),d.dndRow=!1},S=function(b,c){var d=a.util.parseJquery(b),e=a.array.merge([],d.datagrid("getColumnFields",!0),d.datagrid("getColumnFields",!1)),f=a.array.indexOf(e,c);return-1==f||f+1>=e.length?null:d.datagrid("getColumnOption",e[f+1])},T=function(b,c){var d=a.util.parseJquery(b),e=a.array.merge([],d.datagrid("getColumnFields",!0),d.datagrid("getColumnFields",!1)),f=a.array.indexOf(e,c);return 1>f?null:d.datagrid("getColumnOption",e[f-1])},U=function(c,d){if(d&&d.source&&d.target&&d.source!=d.target&&d.point){a.array.contains(["before","after"],d.point)||(d.point="before");var e=a.util.parseJquery(c);if(!e.datagrid("hasMuliRowHeader")){var f,g,h=e.datagrid("options"),i=e.datagrid("getColumnFields"),j=e.datagrid("getColumnFields",!0);if(a.array.contains(i,d.source)&&(f=!1),f==b&&a.array.contains(j,d.source)&&(f=!0),a.array.contains(i,d.target)&&(g=!1),g==b&&a.array.contains(j,d.target)&&(g=!0),f!=b&&g!=b&&(!a.isFunction(h.onBeforeMoveColumn)||0!=h.onBeforeMoveColumn.call(c,d.source,d.target,d.point))){var k=e.datagrid("getPanel"),l=k.find("div.datagrid-view"),m=l.find("div.datagrid-view1"),n=l.find("div.datagrid-view2"),o=m.find("table.datagrid-htable tr.datagrid-header-row"),p=n.find("table.datagrid-htable tr.datagrid-header-row"),q=m.find("table.datagrid-btable tr.datagrid-row"),r=n.find("table.datagrid-btable tr.datagrid-row"),s=f?o.find("td[field="+d.source+"]"):p.find("td[field="+d.source+"]"),t=g?o.find("td[field="+d.target+"]"):p.find("td[field="+d.target+"]"),u=f?q:r,v=g?q:r;if(u.length==v.length){t[d.point](s),v.each(function(b){var c=a(this).find("td[field="+d.target+"]"),e=a(u[b]).find("td[field="+d.source+"]");c[d.point](e)});var w=e.datagrid("getColumnOption",d.source),x=e.datagrid("getColumnOption",d.target),y=f?h.frozenColumns[0]:h.columns[0],z=g?h.frozenColumns[0]:h.columns[0],A=h._extensionsDatagrid?h._extensionsDatagrid:h._extensionsDatagrid={};a.array.remove(y,w);var B=a.array.indexOf(z,x);if(B>-1&&a.array.insert(z,"before"==d.point?B:B+1,w),e.datagrid("fixColumnSize"),f&&(g||(B=a.array.indexOf(A.fields,d.target),a.array.insert(A.fields,"before"==d.point?B:B+1,d.source),a.array.insert(A.fieldOptions,"before"==d.point?B:B+1,w),a.array.insert(A.fieldOptionsBackup,"before"==d.point?B:B+1,a.extend({},w)))),!f)if(B=a.array.indexOf(A.fields,d.source),g)a.array.removeAt(A.fields,B),a.array.removeAt(A.fieldOptions,B),a.array.removeAt(A.fieldOptionsBackup,B);else{var C=A.fieldOptions[B],D=A.fieldOptionsBackup[B];a.array.removeAt(A.fields,B),a.array.removeAt(A.fieldOptions,B),a.array.removeAt(A.fieldOptionsBackup,B),B=a.array.indexOf(A.fields,d.target),a.array.insert(A.fields,"before"==d.point?B:B+1,d.source),a.array.insert(A.fieldOptions,"before"==d.point?B:B+1,C),a.array.insert(A.fieldOptionsBackup,"before"==d.point?B:B+1,D)}a.isFunction(h.onMoveColumn)&&h.onMoveColumn.call(c,d.source,d.target,d.point)}}}}},V=function(b,c){if(c&&c.field&&c.point){a.array.contains(["before","after"],c.point)||(c.point="before");var d=a.util.parseJquery(b),e=d.datagrid("getColumnFields","all"),f=a.array.indexOf(e,c.field);if(!(-1==f||"before"==c.point&&0==f||"after"==c.point&&f==e.length-1)){var b=e["before"==c.point?f-1:f+1];d.datagrid("moveColumn",{source:c.field,target:b,point:c.point})}}},W=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("options"),f=e._extensionsDatagrid?e._extensionsDatagrid:e._extensionsDatagrid={};a.isFunction(e.onBeforeDeleteColumn)&&0==e.onBeforeDeleteColumn.call(b,c)||(Y(e,c,f),d.datagrid("getColumnDom",{field:c,header:!0}).remove(),a.isFunction(e.onDeleteColumn)&&e.onDeleteColumn.call(b,c))},X=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getColumnOption",c);return e&&d.datagrid("deleteColumn",c),e},Y=a.fn.datagrid.extensions.removeField=function(c,d,e){var f,g,h=-1,i=-1;a.array.likeArray(c.frozenColumns)&&(a.each(c.frozenColumns,function(b,c){if(a.array.likeArray(this))a.each(this,function(a,b){return b.field==d?(i=a,!1):void 0});else if(c.field==d)return i=b,!1;return i>-1?(h=b,!1):void 0}),i>-1&&(g=!0)),g==b&&a.array.likeArray(c.columns)&&(a.each(c.columns,function(b,c){if(a.array.likeArray(this))a.each(this,function(a,b){return b.field==d?(i=a,!1):void 0});else if(c.field==d)return i=b,!1;return i>-1?(h=b,!1):void 0}),i>-1&&(g=!1)),i>-1&&(f=g?c.frozenColumns:c.columns,f=h>-1?f[h]:f,a.array.removeAt(f,i),index=a.array.indexOf(e.fields,d),a.array.remove(e.fields,d),a.array.removeAt(e.fieldOptions,index),a.array.removeAt(e.fieldOptionsBackup,index))},Z=function(b){var c=a.util.parseJquery(b),d=c.datagrid("options");return d.columns&&d.columns.length>1&&d.columns[1].length>0||d.frozenColumns&&d.frozenColumns.length>1&&d.frozenColumns[1].length>0},$=function(c,d){var e,f=a.util.parseJquery(c),g=f.datagrid("getRows");return a.isFunction(d)?e=a.array.filter(g,d):a.array.likeArray(d)&&!a.util.isString(d)?(e=a.array.map(d,function(a){return _(c,a,f,g)}),e=a.array.filter(e,function(a){return a!=b&&null!=a})):e=[_(c,d,f,g)],e},_=function(b,c,d,e){var f=d||a.util.parseJquery(b),g=(e||f.datagrid("getRows"),f.datagrid("options"));return a.array.first(e,a.isFunction(c)?c:function(a){return a[g.idField]==c})},ab=a.fn.datagrid.methods.deleteRow,bb=function(b,c){var d,e=a.util.parseJquery(b),f=a.isFunction(c);if(f){var g=e.datagrid("getRows"),h=a.array.first(g,c);h&&ab.call(e,e,h)}else d=a.isNumeric(c)?c:e.datagrid("getRowIndex",c),a.isNumeric(d)&&d>-1&&ab.call(e,e,d)},cb=function(b,c){var d=a.array.likeArray(c)&&!a.util.isString(c);if(d)return void a.each(c,function(a,c){bb(b,c)});if(a.isFunction(c)){var e=a.util.parseJquery(b),f=e.datagrid("getRows");a.each(f,function(a){if(1==c.call(this,this,a,f)){var b=e.datagrid("getRowIndex",this);ab.call(e,e,b)}})}},db=function(b,c){if(c&&c.field&&c.title){var d=a.util.parseJquery(b),e=d.datagrid("getColumnOption",c.field),f=c.field,g=c.title,h=d.datagrid("getPanel"),i=h.find("div.datagrid-view div.datagrid-header tr.datagrid-header-row td[field="+f+"]");i.length&&(i.find("div.datagrid-cell span:first").html(g),e.title=g)}},eb=function(c,d){if(d&&d.field&&d.width&&a.isNumeric(d.width)){var e=(a.data(c,"datagrid"),a.util.parseJquery(c)),f=e.datagrid("options"),g=e.datagrid("getColumnOption",d.field),h=d.field,i=d.width,j=e.datagrid("getPanel").find("div.datagrid-view div.datagrid-header tr.datagrid-header-row td[field="+h+"] div.datagrid-cell");if(j.length){var k=j._outerWidth()-parseInt(j[0].style.width);j.css("height",""),g.width=i,g.boxWidth=i-k,g.auto=b,j.width(g.boxWidth),e.datagrid("fixColumnSize",h),e.datagrid("fitColumns"),f.onResizeColumn.call(c,h,i)}}},fb=function(b,c){c=c||{},c=a.extend({sortName:null,sortOrder:"asc"},c);var d=a.util.parseJquery(b),e=a.data(b,"datagrid"),f=d.datagrid("options"),g=d.datagrid("getColumnOption",c.sortName);if(g&&!a.isEmptyObject(g)&&g.sortable&&!e.resizing){f.sortName=c.sortName,f.sortOrder=c.sortOrder;var h="datagrid-sort-"+f.sortOrder,i=d.datagrid("getPanel").find(".datagrid-view .datagrid-header td div.datagrid-cell"),j=d.datagrid("getPanel").find(".datagrid-view .datagrid-header td[field='"+c.sortName+"'] div.datagrid-cell");if(i.length&&j.length){if(i.removeClass("datagrid-sort-asc datagrid-sort-desc"),j.addClass(h),f.remoteSort)d.datagrid("reload");else{var k=a.data(b,"datagrid").data;d.datagrid("loadData",k)}f.onSortColumn.call(b,f.sortName,f.sortOrder)}}};a.fn.datagrid.extensions.parseOffset=function(b){var c={enable:b?!0:!1};return c.enable&&a.extend(c,b),c.width=a.isNumeric(c.width)?c.width:0,c.height=a.isNumeric(c.height)?c.height:0,c};var gb=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("options"),f=e._extensionsDatagrid?e._extensionsDatagrid:e._extensionsDatagrid={};e.offset=f.offset=a.fn.datagrid.extensions.parseOffset(c),f.offset&&f.offset.enable&&(a.isFunction(f.offsetFunction)||(f.offsetFunction=function(){if(f.offset.enable){var b=a.util.windowSize();d.datagrid("resize",{width:b.width+f.offset.width,height:b.height+f.offset.height})}},a(window).resize(f.offsetFunction)),f.offsetFunction())},hb=function(b,c){if(a.string.isNullOrEmpty(c))return a();var d=a.util.parseJquery(b),e=d.datagrid("getPanel"),f=!a.string.isString(c),g=f?c.field:c,h=f?c.header:!1,i=e.find("div.datagrid-view tr.datagrid-row td[field="+g+"]");return h&&(i=i.add(e.find("div.datagrid-view tr.datagrid-header-row td[field="+g+"]"))),i},ib=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getRows");return a.array.map(e,function(a){return a[c]})},jb=function(b,c){if(!a.isNumeric(c)||0>c)return a();var d=a.util.parseJquery(b),e=d.datagrid("getPanel");return e.find("div.datagrid-view div.datagrid-body table.datagrid-btable tr.datagrid-row[datagrid-row-index="+c+"]")},kb=function(c,d){if(!a.isNumeric(d)||0>d)return b;var e=a.util.parseJquery(c),f=e.datagrid("getRows");return f[d]},lb=function(b,c){if(!c||!c.field||!a.isNumeric(c.index)||c.index<0)return a();var d=a.util.parseJquery(b),e=d.datagrid("getRowDom",c.index);return e.find("td[field="+c.field+"] .datagrid-cell")},mb=function(b,c){if(c&&c.field&&a.isNumeric(c.index)&&!(c.index<0)){var d=a.util.parseJquery(b),e=d.datagrid("getRowData",c.index);return e[c.field]}},nb=function(c,d){var e=a.util.parseJquery(c),f=e.datagrid("getCellDom",d);return f&&f.length?f.text():b},ob=a.fn.datagrid.methods.getColumnFields,pb=function(c,d){var e=a.util.parseJquery(c);return null==d||d==b||a.util.isBoolean(d)?ob.call(e,e,d):a.util.isString(d)?a.array.merge([],ob.call(e,e,!0),ob.call(e,e,!1)):void 0},qb=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getColumnFields","all");if(!a.array.contains(e,c))return[];var f=d.datagrid("getRows"),g=a.array.clone(f);return a.array.distinct(g,function(a,b){return a[c]==b[c]}),g},rb=function(b,c){var d=a.util.parseJquery(b),e=d.datagrid("getColumnFields","all");if(!a.array.contains(e,c))return[];var f=d.datagrid("getColumnData",c);return a.array.distinct(f,function(a,b){return a==b}),f},sb=function(b,c){var d=a.util.parseJquery(b),e=pb(b,c);return a.array.map(e,function(a){return d.datagrid("getColumnOption",a)})},tb=function(b,c){var d=sb(b,c);return a.array.filter(d,function(a){return a.hidden?!0:!1})},ub=function(b,c){var d=sb(b,c);return a.array.filter(d,function(a){return a.hidden?!1:!0})},vb=function(b,c){var d=tb(b,c);return a.array.map(d,function(a){return a.field})},wb=function(b,c){var d=ub(b,c);return a.array.map(d,function(a){return a.field})},xb=function(c,d,e,f,g,h,i){var k=e||a.util.parseJquery(c),l=g||k.datagrid("getRows"),m=a.isFunction(d)?_(c,d,k,l):d,n=k.datagrid("getRowIndex",m),i=null==i||i==b||1==i?!0:!1;if(n>-1){var o=f||k.datagrid("options"),p=k.datagrid("getRowData",n),q=h||(o._extensionsDatagrid?o._extensionsDatagrid:o._extensionsDatagrid={});q.filterData=a.isArray(q.filterData)?q.filterData:q.filterData=[],k.datagrid("getRowDom",n).show(),a.array.remove(q.filterData,p),i&&j(k,o,q,l)}},yb=function(c,d,e,f,g,h,i){var k=e||a.util.parseJquery(c),l=g||k.datagrid("getRows"),m=a.isFunction(d)?_(c,d,k,l):d,n=k.datagrid("getRowIndex",m),i=null==i||i==b||1==i?!0:!1;if(n>-1){var o=f||k.datagrid("options"),p=k.datagrid("getRowData",n),q=h||(o._extensionsDatagrid?o._extensionsDatagrid:o._extensionsDatagrid={});q.filterData=a.isArray(q.filterData)?q.filterData:[],k.datagrid("unselectRow",n).datagrid("uncheckRow",n).datagrid("getRowDom",n).hide(),a.array.attach(q.filterData,p),i&&j(k,o,q,l)}},zb=function(b,c){var d,e=a.util.parseJquery(b),f=e.datagrid("options"),g=e.datagrid("getRows"),h=f._extensionsDatagrid?f._extensionsDatagrid:f._extensionsDatagrid={};if(c===!0){h.filterData=[];var i=e.datagrid("getPanel"),k=i.find("div.datagrid-header-filter-item-icon");i.find(".datagrid-view .datagrid-body tr.datagrid-row").show(),m(k,"tree-checkbox1")}else d=a.isFunction(c)?a.array.filter(g,c):a.array.likeArray(c)&&!a.util.isString(c)?c:[c];d&&(a.each(d,function(a,c){xb(b,c,e,f,g,h,!1)}),j(e,f,h,g))},Ab=function(b,c){var d,e=a.util.parseJquery(b),f=e.datagrid("options"),g=e.datagrid("getRows"),h=f._extensionsDatagrid?f._extensionsDatagrid:f._extensionsDatagrid={};if(c===!0){e.datagrid("unselectAll").datagrid("uncheckAll"),h.filterData=a.array.clone(g);var i=e.datagrid("getPanel"),k=i.find("div.datagrid-header-filter-item-icon");i.find(".datagrid-view .datagrid-body tr.datagrid-row").hide(),m(k,"tree-checkbox0")}else d=a.isFunction(c)?a.array.filter(g,c):a.array.likeArray(c)&&!a.util.isString(c)?c:[c];d&&(a.each(d,function(a,c){yb(b,c,e,f,g,h,!1)}),j(e,f,h,g))},Bb=function(b){var c=a.util.parseJquery(b),d=c.datagrid("options"),e=d._extensionsDatagrid?d._extensionsDatagrid:d._extensionsDatagrid={};return e.filterData},Cb=function(b){var c=a.util.parseJquery(b),d=c.datagrid("options"),e=c.datagrid("getRows"),f=d._extensionsDatagrid?d._extensionsDatagrid:d._extensionsDatagrid={},g=a.isArray(f.filterData)?f.filterData:[];return a.array.filter(e,function(b){return a.array.contains(g,b)?!1:!0})},Db=function(b,e){var f=a.util.parseJquery(b),g=f.datagrid("options"),h=g._extensionsDatagrid?g._extensionsDatagrid:g._extensionsDatagrid={},i=f.datagrid("getPanel"),j="div.datagrid-view div.datagrid-header tr.datagrid-header-row div.datagrid-header-filter-container";if(e)g.columnFilter=e,c(f,g,h),a.util.exec(function(){i.find(j).hide().slideDown("slow")});else{var k=i.find(j),l=k.length,m=0;k.slideUp("slow",function(){++m==l&&(d(f,g),g.columnFilter=e)})}},Eb=function(b,c){var d=a.util.parseJquery(b);if(a.util.isBoolean(c))return void d.datagrid(c?"showRows":"hideRows",!0);if(c&&c.field){var e=c.field,f=c.value,g=a.array.likeArray(f)&&!a.util.isString(f),h=g?function(b){return a.array.contains(f,b[e])}:function(a){return f==a[e]},i=d.datagrid("findRows",h);d.datagrid(c.selected?"showRows":"hideRows",i)}},Fb=function(b,c){{var d=a.util.parseJquery(b),e=a.data(d[0],"datagrid");e.options}e.highlightField&&d.datagrid("getColumnDom",{field:e.highlightField,header:!0}).removeClass("datagrid-row-over"),d.datagrid("getColumnDom",{field:c,header:!0}).filter(function(){return!a(this).parent().hasClass("datagrid-row-selected")}).addClass("datagrid-row-over"),e.highlightField=c},Gb=function(b,c){var d,e,f,g=a.util.parseJquery(b),h=g.datagrid("getPanel"),i=c,j=!1,k=!0;a.isPlainObject(c)?(i=c.value,e=c.field,j=c.regular,k=c.ignoreCase,d=h.find("div.datagrid-body tr.datagrid-row td["+(e?"field="+e:"field")+"] div.datagrid-cell")):d=h.find("div.datagrid-body tr.datagrid-row td[field] div.datagrid-cell"),f=j?new RegExp(i,k?"gm":"igm"):i,d.each(function(){var b=a(this);if(b.find("span.datagrid-cell-hightlight").replaceWith(function(){return a(this).text()}),i){var c=b.html();c&&b.html(a.string.replaceAll(c,i,"<span class='datagrid-cell-hightlight'>"+i+"</span>"))}})},Hb=function(b,c){c=a.string.toBoolean(c),alert("导出"+(c?"全部":"当前页")+"数据")},Ib=a.fn.datagrid.extensions.initColumnExtendProperty=function(c){(null==c.tooltip||c.tooltip==b)&&(c.tooltip=!1),null!=c.filterable&&c.filterable!=b&&a.util.isBoolean(c.filterable)||(c.filterable=!0),null!=c.hidable&&c.hidable!=b&&a.util.isBoolean(c.hidable)||(c.hidable=!0),null!=c.filter&&c.filter!=b&&a.util.isString(c.filter)||(c.filter="checkbox"),null!=c.precision&&c.precision!=b&&a.isNumeric(c.precision)||(c.precision=1),null!=c.step&&c.step!=b&&a.isNumeric(c.step)||(c.step=1)},Jb=a.fn.datagrid.extensions.initColumnExtendProperties=function(b,c){if(!c._initializedExtendProperties){var d=b.datagrid("getColumns","all");a.each(d,function(){Ib(this)}),c._initializedExtendProperties=!0}},Kb=a.fn.datagrid.extensions.initRowDndExtensions=function(a,b){b=b||a.datagrid("options"),b.dndRow&&a.datagrid("enableRowDnd")};a.fn.datagrid.extensions.parseHeaderContextMenuMap=function(b,c,d,e,f){return a.array.map(e,function(e){if(!e||a.util.isString(e))return e;var g=a.extend({},e);return g.id=a.isFunction(e.id)?e.id.call(g,b,c,d,f):e.id,g.text=a.isFunction(e.text)?e.text.call(g,b,c,d,f):e.text,g.iconCls=a.isFunction(e.iconCls)?e.iconCls.call(g,b,c,d,f):e.iconCls,g.disabled=a.isFunction(e.disabled)?e.disabled.call(g,b,c,d,f):e.disabled,g.hideOnClick=a.isFunction(e.hideOnClick)?e.hideOnClick.call(g,b,c,d,f):e.hideOnClick,g.onclick=a.isFunction(e.onclick)?function(a,b,g){e.onclick.call(this,a,c,d,f,b,g)}:e.onclick,g.handler=a.isFunction(e.handler)?function(a,b,g){e.handler.call(this,a,c,d,f,b,g)}:e.handler,g.children&&g.children.length&&(g.children=a.fn.datagrid.extensions.parseHeaderContextMenuMap(b,c,d,g.children,f)),g})},a.fn.datagrid.extensions.parseRowContextMenuMap=function(b,c,d,e,f,g){return a.array.map(f,function(f){if(!f||a.util.isString(f))return f;var h=a.extend({},f);return h.id=a.isFunction(f.id)?f.id.call(h,b,c,d,e,g):f.id,h.text=a.isFunction(f.text)?f.text.call(h,b,c,d,e,g):f.text,h.iconCls=a.isFunction(f.iconCls)?f.iconCls.call(h,b,c,d,e,g):f.iconCls,h.disabled=a.isFunction(f.disabled)?f.disabled.call(h,b,c,d,e,g):f.disabled,h.hideOnClick=a.isFunction(f.hideOnClick)?f.hideOnClick.call(h,b,c,d,e,g):f.hideOnClick,h.onclick=a.isFunction(f.onclick)?function(a,b,h){f.onclick.call(this,a,c,d,e,g,b,h)}:f.onclick,h.handler=a.isFunction(f.handler)?function(a,b,h){f.handler.call(this,a,c,d,e,g,b,h)}:f.handler,h.children&&h.children.length&&(h.children=a.fn.datagrid.extensions.parseRowContextMenuMap(b,c,d,e,h.children,g)),h})},a.fn.datagrid.extensions.parseContextMenuEventData=function(b,c,d){var e=a.fn.datagrid.extensions.parseRemoteQueryParams(c),f=a.fn.datagrid.extensions.parsePaginationParams(b,c);return a.extend({},e,f,{e:d,grid:b})},a.fn.datagrid.extensions.parsePaginationParams=function(b,c){var d={};if(c.pagination)try{var e=b.datagrid("getPager"),f=e.pagination("options"),g=f.total,h=Math.ceil(parseFloat(g)/parseFloat(f.pageSize));a.extend(d,{pager:e,total:g,pageCount:h})}catch(i){}return d},a.fn.datagrid.extensions.parseRemoteQueryParams=function(b){var c=a.extend({},b.queryParams);return b.pagination&&a.extend(c,{page:b.pageNumber,rows:b.pageSize}),b.sortName&&a.extend(c,{sort:b.sortName,order:b.sortOrder}),c=a.fn.datagrid.extensions.parsePagingQueryParams(b,c)};var Lb=function(b,c){var d=b.datagrid("getRows");b.datagrid("getPanel").find("div.datagrid-view div.datagrid-body table.datagrid-btable tr.datagrid-row").each(function(){var e=a(this),f=parseInt(e.attr("datagrid-row-index")),g=d[f];Mb(b,c,f,g,e)})},Mb=function(b,c,d,e,f){function g(){var c=b.datagrid("getColumns","all"),e=a("<table></table>").css({padding:"5px"});return a.each(c,function(a,c){if(c&&c.field&&c.title){var f=b.datagrid("getCellDisplay",{field:c.field,index:d});e.append("<tr><td style='text-align: right; width: 150px;'>"+c.title+":</td><td style='width: 250px;'>"+f+"</td></tr>")}}),e}if(f=f||b.datagrid("getRowDom",d),c.rowTooltip){var h=function(){var b=a(this),h=a.isFunction(c.rowTooltip)?c.rowTooltip.call(f,d,e):g(e);b.tooltip("update",h)};f.each(function(){a.easyui.tooltip.init(this,{onShow:h})})}else f.children("td[field]").each(function(){var c=a(this),f=c.attr("field"),g=b.datagrid("getColumnOption",f);if(g&&g.tooltip){var h=c.find("div.datagrid-cell"),i=function(){var b=a(this),c=a.isFunction(g.tooltip)?g.tooltip.call(h,e[f],d,e):e[f];b.tooltip("update",c)};a.easyui.tooltip.init(h,{onShow:i})}})},Nb=function(b,c,d){if(c.extEditing){var e=b.datagrid("getRowDom",d);if(e.length){var f=b.datagrid("getPanel").find("div.datagrid-view"),g=f.find("div.datagrid-view1"),h=f.find("div.datagrid-view2"),i=h.find("div.datagrid-body"),j=g.outerWidth(),k=(f.position(),o>0?o:0);i.css("position","relative");var l=e.outerHeight(),m=e.position().top+l+i.scrollTop()-h.find("div.datagrid-header").outerHeight(),n=a("<div></div>").addClass("dialog-button datagrid-rowediting-panel").appendTo(i).css("top",m).attr("datagrid-row-index",d);a("<a></a>").linkbutton({plain:!1,iconCls:"icon-ok",text:"保存"}).appendTo(n).click(function(){b.datagrid("endEdit",d)}),a("<a></a>").linkbutton({plain:!1,iconCls:"icon-cancel",text:"取消"}).appendTo(n).click(function(){b.datagrid("cancelEdit",d)});var o=(c.width-n.outerWidth())/2-j,k=o>0?o:0;n.css("left",k)}}},Ob=function(a,b,c){b=b||a.datagrid("getPanel").find("div.datagrid-view div.datagrid-view2 div.datagrid-body"),b.find("div.datagrid-rowediting-panel[datagrid-row-index="+c+"]").remove()},Pb=function(a,b,c){b.extEditing&&(body=a.datagrid("getPanel").find("div.datagrid-view div.datagrid-view2 div.datagrid-body"),Ob(a,body,c))},Qb=function(a,b,c){var d=b._extensionsDatagrid?b._extensionsDatagrid:b._extensionsDatagrid={};b.singleEditing&&a.datagrid("endEdit",d.lastEditingIndex),d.lastEditingIndex=c},Rb=a.fn.datagrid.extensions.initExtensions=function(b,d){function e(){Jb(b,i)}function f(){b.datagrid("setOffset",d.offset)}function g(){q(b,d,i),r(b,d,i),s(b,d,i)}function h(){u(b,d,i)}var i=d._extensionsDatagrid?d._extensionsDatagrid:d._extensionsDatagrid={};if(!i._initialized){var j=b.datagrid("getColumnFields",!1);i.fields=a.array.filter(j,function(a){return b.datagrid("getColumnOption",a).title?!0:!1
}),i.fieldOptions=a.array.map(i.fields,function(a){return b.datagrid("getColumnOption",a)}),i.fieldOptionsBackup=a.array.map(i.fieldOptions,function(b){return a.extend({},b)}),i.filterData=[],e(),f(),g(),h();var k=b.datagrid("getRows");k&&k.length||c(b,d,i),i._initialized=!0}};a.fn.datagrid.extensions.parseOrderbyParams=function(b,c){return b=a.string.isNullOrWhiteSpace(b)?"":a.trim(b),c=a.string.isNullOrWhiteSpace(c)?"":a.trim(c),c=c.toLowerCase(),"asc"!=c&&"desc"!=c&&(c="asc"),a.trim(b+" "+c)},a.fn.datagrid.extensions.parsePagingQueryParams=function(b,c){var d=a.util.parseMapFunction(c);return b.pagination&&(d.pageNumber=d.page,d.pageSize=d.rows,d.pageIndex=d.pageNumber-1),d.orderby=a.fn.datagrid.extensions.parseOrderbyParams(d.sort,d.order),d};var Sb=a.fn.datagrid.extensions.clearFilterData=function(a){var b=a._extensionsDatagrid?a._extensionsDatagrid:a._extensionsDatagrid={};b.filterData=[]},Tb=a.fn.datagrid.extensions.loader=function(b,c,d){var e=a.util.parseJquery(this),f=e.datagrid("options");return Rb(e,f),f.url?(b=a.fn.datagrid.extensions.parsePagingQueryParams(f,b),void a.ajax({type:f.method,url:f.url,data:b,dataType:"json",success:function(a){Sb(f),c(a)},error:function(){d.apply(this,arguments)}})):!1},Ub=function(b){return b?a.isArray(b)?{total:b.length,rows:b}:b:{total:0,rows:[]}},Vb=a.fn.datagrid.defaults.onLoadSuccess,Wb=a.fn.datagrid.extensions.onLoadSuccess=function(){a.isFunction(Vb)&&Vb.apply(this,arguments);var b=a.util.parseJquery(this),d=b.datagrid("options"),e=d._extensionsDatagrid?d._extensionsDatagrid:d._extensionsDatagrid={};c(b,d,e),Kb(b,d),Lb(b,d)},Xb=a.fn.datagrid.defaults.onResizeColumn,Yb=a.fn.datagrid.extensions.onResizeColumn=function(b){a.isFunction(Xb)&&Xb.apply(this,arguments);var c=a.util.parseJquery(this),d=c.datagrid("options");if(d.columnFilter){var e=c.datagrid("getPanel"),f=c.datagrid("getColumnOption",b),g=e.find("div.datagrid-header-filter-container[field="+b+"]");g.width(f.width)}},Zb=a.fn.datagrid.defaults.onBeforeEdit,$b=a.fn.datagrid.extensions.onBeforeEdit=function(b){a.isFunction(Zb)&&Zb.apply(this,arguments);var c=a.util.parseJquery(this),d=c.datagrid("options");Nb(c,d,b),Qb(c,d,b),c.datagrid("getPanel").find("div.datagrid-view div.datagrid-body table.datagrid-btable tr.datagrid-row").draggable("disable")},_b=a.fn.datagrid.defaults.onAfterEdit,ac=a.fn.datagrid.extensions.onAfterEdit=function(b,d){a.isFunction(_b)&&_b.apply(this,arguments);var e=a.util.parseJquery(this),f=e.datagrid("options"),g=f._extensionsDatagrid?f._extensionsDatagrid:f._extensionsDatagrid={};Pb(e,f,b),c(e,f,g),Kb(e,f),Mb(e,f,b,d)},bc=a.fn.datagrid.defaults.onCancelEdit,cc=a.fn.datagrid.extensions.onCancelEdit=function(b,c){a.isFunction(bc)&&bc.apply(this,arguments);var d=a.util.parseJquery(this),e=d.datagrid("options");Pb(d,e,b),Kb(d,e),Mb(d,e,b,c)},dc=a.fn.datagrid.extensions.methods={updateRow:function(a,b){return a.each(function(){E(this,b)})},appendRow:function(a,b){return a.each(function(){F(this,b)})},insertRow:function(a,b){return a.each(function(){G(this,b)})},isChecked:function(a,b){return H(a[0],b)},isSelected:function(a,b){return I(a[0],b)},freezeColumn:function(a,b){return a.each(function(){J(this,b)})},unfreezeColumn:function(a,b){return a.each(function(){K(this,b)})},moveRow:function(a,b){return a.each(function(){L(this,b)})},shiftRow:function(a,b){return a.each(function(){M(this,b)})},nextRow:function(a,b){return N(a[0],b)},prevRow:function(a,b){return O(a[0],b)},popRow:function(a,b){return P(a[0],b)},enableRowDnd:function(a){return a.each(function(){Q(this)})},disableRowDnd:function(a){return a.each(function(){R(this)})},moveColumn:function(a,b){return a.each(function(){U(this,b)})},shiftColumn:function(a,b){return a.each(function(){V(this,b)})},nextColumn:function(a,b){return S(a[0],b)},prevColumn:function(a,b){return T(a[0],b)},deleteColumn:function(a,b){return a.each(function(){W(this,b)})},popColumn:function(a){return X(a[0],param)},getColumnDom:function(a,b){return hb(a[0],b)},getColumnData:function(a,b){return ib(a[0],b)},getRowDom:function(a,b){return jb(a[0],b)},getRowData:function(a,b){return kb(a[0],b)},getCellDom:function(a,b){return lb(a[0],b)},getCellData:function(a,b){return mb(a[0],b)},getCellDisplay:function(a,b){return nb(a[0],b)},getColumnFields:function(a,b){return pb(a[0],b)},getDistinctRows:function(a,b){return qb(a[0],b)},getDistinctColumnData:function(a,b){return rb(a[0],b)},getColumns:function(a,b){return sb(a[0],b)},getHiddenColumns:function(a,b){return tb(a[0],b)},getVisibleColumns:function(a,b){return ub(a[0],b)},getHiddenColumnFields:function(a,b){return vb(a[0],b)},getVisibleColumnFields:function(a,b){return wb(a[0],b)},showRow:function(a,b){return a.each(function(){xb(this,b)})},hideRow:function(a,b){return a.each(function(){yb(this,b)})},showRows:function(a,b){return a.each(function(){zb(this,b)})},hideRows:function(a,b){return a.each(function(){Ab(this,b)})},getHiddenRows:function(a){return Bb(a[0])},getVisibleRows:function(a){return Cb(a[0])},highlightColumn:function(a,b){return a.each(function(){Fb(this,b)})},livesearch:function(a,b){return a.each(function(){Gb(this,b)})},hasMuliRowHeader:function(a){return Z(a[0])},findRow:function(a,b){return _(a[0],b)},findRows:function(a,b){return $(a[0],b)},deleteRow:function(a,b){return a.each(function(){bb(this,b)})},deleteRows:function(a,b){return a.each(function(){cb(this,b)})},sort:function(a,b){return a.each(function(){fb(this,b)})},setColumnTitle:function(a,b){return a.each(function(){db(this,b)})},setColumnWidth:function(a,b){return a.each(function(){eb(this,b)})},setOffset:function(a,b){return a.each(function(){gb(this,b)})},setColumnFilter:function(a,b){return a.each(function(){Db(this,b)})},columnFilterSelect:function(a,b){return a.each(function(){Eb(this,b)})},exportExcel:function(a,b){return a.each(function(){Hb(this,b)})}},ec=a.fn.datagrid.extensions.defaults={offset:null,loadFilter:Ub,autoBindDblClickRow:!0,dblClickRowMenuIndex:0,exportMenu:!1,selectOnRowContextMenu:!1,hideDisabledMenu:!1,headerContextMenu:null,rowContextMenu:null,enableHeaderClickMenu:!0,enableHeaderContextMenu:!0,enableRowContextMenu:!0,moveMenu:!1,pagingMenu:!1,refreshMenu:!0,dndRow:!1,rowTooltip:!1,extEditing:!1,autoEditing:!1,singleEditing:!0,columnFilter:null,loader:Tb,onLoadSuccess:Wb,onResizeColumn:Yb,onBeforeEdit:$b,onAfterEdit:ac,onCancelEdit:cc,onBeforeDeleteColumn:function(){},onDeleteColumn:function(){},onBeforeMoveColumn:function(){},onMoveColumn:function(){},onBeforeDrop:function(){},onDrop:function(){},onBeforeDrag:function(){},onStartDrag:function(){},onStopDrag:function(){},onDragEnter:function(){},onDragOver:function(){},onDragLeave:function(){},onBeforeUpdateRow:function(){},onUpdateRow:function(){},onBeforeAppendRow:function(){},onAppendRow:function(){},onBeforeInsertRow:function(){},onBeforeRow:function(){}};a.extend(a.fn.datagrid.defaults,ec),a.extend(a.fn.datagrid.methods,dc);var fc=".datagrid-rowediting-panel { position: absolute; display: block; border: 1px solid #ddd; padding: 5px 5px; }.datagrid-body td.datagrid-header-cell-top { border-top-color: red; border-top-width: 2px; border-top-style: dotted; }.datagrid-body td.datagrid-header-cell-bottom { border-bottom-color: red; border-bottom-width: 2px; border-bottom-style: dotted; }.datagrid-cell-hightlight { font-weight: bold; background-color: Yellow; }.datagrid-header-cell-arrow { float: right; cursor: pointer; border-left-style: dotted; display: none; border-left-width: 0px; }.datagrid-header-cell-arrow-show { display: inline; border-left-width: 1px; }.datagrid-header-filter { text-align: center; overflow: auto; }.datagrid-header-filter-top { vertical-align: top; }.datagrid-header-filter-bottom { vertical-align: bottom; }.datagrid-header-filter-cell { white-space: nowrap; }.datagrid-header-filter-line { border-width: 0px; border-top-width: 1px; border-style: dotted; border-color: #ccc; margin-top: 3px; margin-bottom: 3px; }.datagrid-header-filter-container { padding-top: 5px; overflow: auto; font-size: 11px; text-align: left; }.datagrid-header-filter-livebox-text { margin-left: 10px; margin-top: 10px; overflow: auto; font-size: 11px; text-align: left; }.datagrid-header-filter-livebox { margin-left: 10px; width: 60px; height: 12px; font-size: 11px; }.datagrid-header-filter-item { overflow: hidden; padding: 0px; margin: 0px; cursor: pointer; white-space: nowrap; margin: 2px; }.datagrid-header-filter-item:hover { filter: alpha(opacity=60); opacity: 0.6; }.datagrid-header-filter-item-text { padding-left: 20px; float: left; }.datagrid-header-filter-item-icon { left: 2px; top: 50%; width: 16px; height: 16px; margin-top: -3px; }.datagrid-header-filter-itemwrap { overflow: hidden; padding-left: 5px; white-space: nowrap; height: 20px; }.datagrid-header-filter-slider { }.datagrid-header-filter-sliderwrap { overflow: hidden; padding-left: 30px; padding-top: 15px; }.datagrid-header-filter-sliderwrap .slider-rulelabel span { font-size: 11px; }.datagrid-header-filter-numeric { width: 60px; height: 12px; font-size: 11px; }";a.util.addCss(fc)}(jQuery),$.extend($.fn.datagrid.defaults.editors,{datebox:{init:function(a,b){var c=$('<input type="text">').appendTo(a);return c.datebox(b),c},getValue:function(a){return $(a).datebox("getValue")},setValue:function(a,b){var c=function(a){if(null==a||""==a)return"";var b,c=/^(\d{4})(-|\/)(\d{1,2})(-|\/)\d{1,2}\s+\d{1,2}:\d{1,2}:\d{1,2}$/;if(a instanceof Date)b=a;else{if(c.test(a)){var d=/^\d{4}(-|\/)\d{1,2}(-|\/)/;return b=new Date(a.replace(d,RegExp.$1+"/"+RegExp.$3+"/")),b.format("yyyy-MM-dd hh:mm:ss")}b=new Date(a),isNaN(b)&&(a=a.replace(/\/Date\((-?\d+)\)\//,"$1"),b=new Date,b.setTime(a))}return b.format("yyyy-MM-dd")};$(a).datebox("setValue",c(b))},destroy:function(a){$(a).datebox("destroy")},resize:function(a,b){$(a).datebox("resize",b)}},textbutton:{init:function(a,b){var c=$('<input type="text" class="datagrid-editable-input" />');return c.appendTo(a),c.iptSearch(b),c},getValue:function(a){return $(a).val()},setValue:function(a,b){$(a).val(b)},resize:function(a,b){$(a)._outerWidth(b)._outerHeight(22),$(a).parent()._outerWidth(b)}},combogrid:{init:function(a,b){var c=$('<input type="text" class="datagrid-editable-input">').appendTo(a);return c.combogrid(b),c},destroy:function(a){$(a).combogrid("destroy")},getValue:function(a){return $(a).combogrid("getValue")},setValue:function(a,b){$(a).combogrid("setValue",b)},resize:function(a,b){$(a).combogrid("resize",b)}},readonlytext:{init:function(a){var b=$('<input type="text" class="datagrid-editable-input  readonly" readOnly="readOnly">').appendTo(a);return b},getValue:function(a){return $(a).val()},setValue:function(a,b){$(a).val(b)},resize:function(a,b){$(a)._outerWidth(b)._outerHeight(22),$(a).parent()._outerWidth(b)}}}),function(a,b){var c={},d=function(){return a.apply(this,arguments)};d.fn=d.prototype={},d.easyui=c,c.getTopEasyuiMessager=function(){return a.util.isTopMost?a.messager:a.util.$&&a.util.$.messager?a.util.$.messager:a.messager},c.messager=c.getTopEasyuiMessager(),c.getTopEasyuiTooltip=function(){return a.util.isTopMost?a.fn.tooltip:a.util.$&&a.util.$.fn&&a.util.$.fn.tooltip?a.util.$.fn.tooltip:a.fn.tooltip},c.tooltip=a.fn.tooltip,c.tooltip.init=function(b,c){var d=a.util.parseJquery(b);d.mouseover(function(){d.tooltip(a.extend({trackMouse:!0},c,{onHide:function(){a.isFunction(c.onHide)&&c.onHide.apply(this,arguments),d.tooltip("destroy")}})).tooltip("show")})};var e={error:"messager-error",info:"messager-info",question:"messager-question",warning:"messager-warning"},f=a.messager.show,g=a.messager.alert,h=a.messager.confirm,i=a.messager.prompt,j={title:"操作提醒",confirm:"您确认要进行该操作？",prompt:"请输入相应内容：",icon:"info",loading:"正在加载，请稍等..."};a.messager.show=function(b){var c=a.util.isString(b)||a.util.isBoolean(b)||a.isNumeric(b);if(c)return a.messager.show(1==arguments.length?{msg:String(b)}:{title:b,msg:arguments[1],icon:arguments[2],position:arguments[3]});var d=a.extend({},a.messager.defaults,{title:"操作提醒",timeout:4e3,showType:"slide"}),g={topLeft:{right:"",left:0,top:document.body.scrollTop+document.documentElement.scrollTop,bottom:""},topCenter:{right:"",top:document.body.scrollTop+document.documentElement.scrollTop,bottom:""},topRight:{left:"",right:0,top:document.body.scrollTop+document.documentElement.scrollTop,bottom:""},centerLeft:{left:0,right:"",bottom:""},center:{right:"",bottom:""},centerRight:{left:"",right:0,bottom:""},bottomLeft:{left:0,right:"",top:"",bottom:-document.body.scrollTop-document.documentElement.scrollTop},bottomCenter:{right:"",top:"",bottom:-document.body.scrollTop-document.documentElement.scrollTop},bottomRight:{left:"",right:0,top:"",bottom:-document.body.scrollTop-document.documentElement.scrollTop}},h=a.extend({},d,b);h.style=g[b.position]?g[b.position]:g.topCenter;var i=e[h.icon]?e[h.icon]:e.info;return h.msg="<div class='messager-icon "+i+"'></div><div>"+h.msg+"</div>",f(h)},a.union(a.messager.show,f),a.messager.alert=function(){return 1==arguments.length?g(j.title,arguments[0],j.icon):2==arguments.length?a.isFunction(arguments[1])?g(j.title,arguments[0],j.icon,arguments[1]):arguments[1]in e?g(j.title,arguments[0],arguments[1]):g.apply(this,arguments):3==arguments.length&&a.isFunction(arguments[2])?arguments[1]in e?g(j.title,arguments[0],arguments[1],arguments[2]):g(arguments[0],arguments[1],j.icon,arguments[2]):g.apply(this,arguments)},a.messager.confirm=function(){return 1==arguments.length?a.isFunction(arguments[0])?h(j.title,j.confirm,arguments[0]):h(j.title,arguments[0]):2==arguments.length?a.isFunction(arguments[1])?h(j.title,arguments[0],arguments[1]):h(arguments[0],arguments[1]):h.apply(this,arguments)},a.messager.solicit=function(){var c=a.extend({},2==arguments.length?{title:j.title,msg:arguments[0],fn:arguments[1]}:{title:arguments[0],msg:arguments[1],fn:arguments[2]}),d=a.messager.confirm(c.title,c.msg,c.fn),e=d.window("options"),f=e.onClose;e.onClose=function(){a.isFunction(f)&&f.apply(this,arguments),a.isFunction(c.fn)&&c.fn.call(this,b)};var g=d.find(">div.messager-button").empty();return a("<a></a>").linkbutton({text:"是"}).css("margin-left","10px").click(function(){e.onClose=f,d.window("close"),a.isFunction(c.fn)&&c.fn.call(this,!0)}).appendTo(g),a("<a></a>").linkbutton({text:"否"}).css("margin-left","10px").click(function(){e.onClose=f,d.window("close"),a.isFunction(c.fn)&&c.fn.call(this,!1)}).appendTo(g),a("<a></a>").linkbutton({text:"取消"}).css("margin-left","10px").click(function(){e.onClose=f,d.window("close"),a.isFunction(c.fn)&&c.fn.call(this,b)}).appendTo(g),d},a.messager.prompt=function(){return 1==arguments.length?a.isFunction(arguments[0])?i(j.title,j.prompt,arguments[0]):i(j.title,j.prompt):2==arguments.length?a.isFunction(arguments[1])?i(j.title,arguments[0],arguments[1]):i(arguments[0],arguments[1]):i.apply(this,arguments)},c.loading=function(b){var c={msg:j.loading,locale:"body",topMost:!1};b=b||{},a.extend(c,b);var d=c.topMost?a.util.$:a,e=d.util.parseJquery(c.locale),f=e.children().map(function(){var b=a(this).css("z-index");return a.isNumeric(b)?parseInt(b):0}),g=a.array.max(f);e.addClass("mask-container");var h=d("<div></div>").addClass("datagrid-mask").css({display:"block","z-index":++g}).appendTo(e),i=d("<div></div>").addClass("datagrid-mask-msg").css({display:"block",left:"50%","z-index":++g}).html(c.msg).appendTo(e);return i.css("marginLeft",-i.outerWidth()/2),h.add(i)},c.loaded=function(b){var c={locale:"body",topMost:!1};1==arguments.length&&(a.isPlainObject(arguments[0])?a.extend(c,arguments[0]):a.util.isBoolean(arguments[0])?c.topMost=arguments[0]:c.locale=arguments[0]),2==arguments.length&&(a.util.isBoolean(arguments[0])?a.extend(c,{locale:arguments[1],topMost:arguments[0]}):a.extend(c,{locale:arguments[0],topMost:arguments[1]}));var d=c.topMost?a.util.$:a,b=d.util.parseJquery(c.locale);b.removeClass("mask-container"),b.children("div.datagrid-mask-msg,div.datagrid-mask").remove()},a.extend(a.fn.panel.defaults,{loadingMessage:j.loading}),a.extend(a.fn.window.defaults,{loadingMessage:j.loading}),a.extend(a.fn.dialog.defaults,{loadingMessage:j.loading}),a.extend(a.fn.combo.defaults,{missingMessage:a.fn.validatebox.defaults.missingMessage}),c.ajaxError=function(b){return arguments.length?(a.fn.form.defaults.onLoadError=b,a.fn.combobox.defaults.onLoadError=b,a.fn.combotree.defaults.onLoadError=b,a.fn.combogrid.defaults.onLoadError=b,a.fn.datagrid.defaults.onLoadError=b,a.fn.propertygrid.defaults.onLoadError=b,a.fn.tree.defaults.onLoadError=b,a.fn.treegrid.defaults.onLoadError=b,void a.ajaxSetup({error:b})):a.fn.form.defaults.onLoadError};var k=function(b){a.messager.progress("close"),c.messager!=a.messager&&c.messager.progress("close");var d=b&&!a.string.isNullOrWhiteSpace(b.responseText)?"如果该问题重复出现，请联系您的系统管理员并反馈该故障。<br />错误号："+b.status+"("+b.statusText+")；<hr />"+b.responseText:"系统出现了一个未指明的错误，如果该问题重复出现，请联系您的系统管理员并反馈该故障。";if(d.indexOf("lgn-form")>=0)return c.messager.alert("错误提醒","登录超时，请重新登录！","error"),void(top.location.href=location.href);var e=c.messager.alert("错误提醒",d,"error"),f=(e.window("options"),e.window("panel")),g=f.outerWidth(),h=f.outerHeight();_w=a(window).width()-20,_h=a(window).height()-20,(800>g||h>_h)&&e.window("resize",{width:800>g?800:g,height:h>_h?_h:h}),e.window("center")};c.ajaxError(k),a.ajaxSetup({dataFilter:function(b,c){return a.util.isString(c)&&"json"==c.toLowerCase(c)?a.string.toJSONString(b):b}}),d.fn.isEasyUI=function(b){if(a.array.contains(a.parser.plugins,b)||a.error(a.string.format("传入的参数 pluginName: {0} 不是 easyui 插件名。")),!this.length)return!1;var c=a.data(this[0],b);return c&&c.options?!0:!1},c.isEasyUI=function(b,c){return a.util.parseJquery(b).isEasyUI(c)},d.fn.currentPagination=function(){for(var b=this.closest(".pagination");b.length&&!a.data(b[0],"pagination");)b=b.parent().closest(".pagination");return b},d.fn.currentProgressbar=function(){for(var b=this.closest(".progressbar");b.length&&!a.data(b[0],"progressbar");)b=b.parent().closest(".progressbar");return b},d.fn.currentPanel=function(){for(var b=this.closest(".panel-body");b.length&&!a.data(b[0],"panel");)b=b.parent().closest(".panel-body");return b},d.fn.currentTabPanel=function(){for(var b=this.closest(".panel-body"),c=b.parent(),d=c.parent(),e=d.parent();b.length&&!(a.data(b[0],"panel")&&c.hasClass("panel")&&d.hasClass("tabs-panels")&&e.hasClass("tabs-container"));)b=b.parent().closest(".panel-body"),c=b.parent(),d=c.parent(),e=d.parent();return b},d.fn.currentTabIndex=function(){var a=this.currentTabPanel();return a.length?a.panel("panel").index():-1},d.fn.currentTabs=function(){for(var b=this.closest(".tabs-container");b.length&&!a.data(b[0],"tabs");)b=b.parent().closest(".tabs-container");return b},d.fn.currentAccordion=function(){for(var b=this.closest(".accordion");b.length&&!a.data(b[0],"accordion");)b=b.parent().closest(".accordion");return b},d.fn.currentAccPanel=function(){for(var b=this.closest(".panel-body"),c=b.parent(),d=panels.parent();b.length&&!(a.data(b[0],"panel")&&c.hasClass("panel")&&d.hasClass("accordion")&&a.data(d[0],"accordion"));)b=b.parent().closest(".panel-body"),c=b.parent(),d=panels.parent();return b},d.fn.currentLayout=function(){for(var b=this.closest(".layout");b.length&&!a.data(b[0],"layout");)b=b.closest(".layout");return b},d.fn.currentRegion=function(){for(var b=this.closest(".panel.layout-panel"),c=b.parent(),d=b.children(".panel-body");b.length&&(!c.hasClass("layout")||!a.data(d[0],"panel"));)b=b.parent().closest(".panel.layout-panel"),c=b.parent(),d=b.children(".panel-body");return d},d.fn.currentLinkbutton=function(){for(var b=this.closest(".l-btn");b.length&&!a.data(b[0],"linkbutton");)b=b.parent().closest(".layout");return b},d.fn.currentCalendar=function(){for(var b=this.closest(".calendar");b.length&&!a.data(b[0],"calendar");)b=b.parent().closest(".calendar");return b},d.fn.currentWindow=function(){for(var b=this.closest(".panel-body.window-body");b.length&&!a.data(b[0],"window");)b=b.parent().closest(".panel-body.window-body");return b},d.fn.currentDialog=function(){for(var b=this.closest(".panel-body.window-body");b.length&&!a.data(b[0],"dialog");)b=b.parent().closest(".panel-body.window-body");return b},d.fn.currentDatagrid=function(){for(var b=this.closest(".datagrid-wrap.panel-body"),c=b.find(">.datagrid-view>eq(2)");b.length&&!a.data(c[0],"datagrid");)b=b.parent().closest(".datagrid-wrap.panel-body"),c=b.find(">.datagrid-view>eq(2)");return c},d.fn.currentPropertygrid=function(){for(var b=this.closest(".datagrid-wrap.panel-body"),c=b.find(">.datagrid-view>eq(2)");b.length&&!a.data(c[0],"propertygrid");)b=b.parent().closest(".datagrid-wrap.panel-body"),c=b.find(">.datagrid-view>eq(2)");return c},d.fn.currentTree=function(){for(var b=this.closest(".tree");b.length&&!a.data(b[0],"tree");)b=b.parent().closest(".tree");return b},d.fn.currentTreegrid=function(){for(var b=this.closest(".datagrid-wrap.panel-body"),c=b.find(">.datagrid-view>eq(2)");b.length&&!a.data(c[0],"treegrid");)b=b.parent().closest(".datagrid-wrap.panel-body"),c=b.find(">.datagrid-view>eq(2)");return c},a.union(d),a.fn.union(d.fn);var l=".mask-container { position: relative; }";a.util.addCss(l)}(jQuery),function($,undefined){function init(a){function b(c){var d=[];return c.addClass("menu"),d.push(c),c.hasClass("menu-content")||c.children("div").each(function(){var c=$(this).children("div");if(c.length){c.insertAfter(a),this.submenu=c;var e=b(c);d=d.concat(e)}}),d}function c(b){var c=$.parser.parseOptions(b[0],["width"]).width;b.hasClass("menu-content")?b[0].originalWidth=c||b._outerWidth():(b[0].originalWidth=c||0,b.children("div").each(function(){var b=$(this);if(b.hasClass("menu-sep"));else{var c=$.extend({hideOnClick:!0},$.parser.parseOptions(this,["name","iconCls","href",{hideOnClick:"boolean"}]),{disabled:b.attr("disabled")?!0:undefined});b[0].itemName=c.name||"",b[0].itemHref=c.href||"",b[0].hideOnClick=c.hideOnClick==undefined||null==c.hideOnClick?!0:c.hideOnClick;var d=b.addClass("menu-item").html();b.empty().append($('<div class="menu-text"></div>').html(d)),c.iconCls&&$('<div class="menu-icon"></div>').addClass(c.iconCls).appendTo(b),c.disabled&&setDisabled(a,b[0],!0),b[0].submenu&&$('<div class="menu-rightarrow"></div>').appendTo(b),bindMenuItemEvent(a,b)}}),$('<div class="menu-line"></div>').prependTo(b)),setMenuWidth(a,b),b.hide(),bindMenuEvent(a,b)}var d=$(a).appendTo("body").addClass("menu-top");$(document).unbind(".menu").bind("mousedown.menu",function(a){var b=$("body>div.menu:visible"),c=$(a.target).closest("div.menu",b);c.length||$("body>div.menu-top:visible").menu("hide")});for(var e=b(d),f=0;f<e.length;f++)c(e[f])}function setMenuWidth(a,b){var c=$.data(a,"menu").options,d=b.css("display");b.css({display:"block",left:-1e4});var e=0;b.find("div.menu-text").each(function(){var a=$(this);e<a._outerWidth()&&(e=a._outerWidth()),a.closest("div.menu-item")._outerHeight(a._outerHeight()+2)}),e+=65,b._outerWidth(Math.max(b[0].originalWidth||0,e,c.minWidth)),b.css("display",d)}function bindMenuEvent(a,b){var c=$.data(a,"menu"),d=c.options;d.hideOnMouseLeave&&b.unbind(".menu").bind("mouseenter.menu",function(){c.timer&&(clearTimeout(c.timer),c.timer=null)}).bind("mouseleave.menu",function(){c.timer=setTimeout(function(){hideAll(a)},100)})}function bindMenuItemEvent(a,b){b.unbind(".menu"),b.bind("click.menu",function(){var b=$(this);if(!b.hasClass("menu-item-disabled")){if(!this.submenu){this.hideOnClick&&hideAll(a);var c=b.attr("href");c&&(location.href=c)}var d=$(a).menu("getItem",this);$.data(a,"menu").options.onClick.call(a,d)}}).bind("mouseenter.menu",function(){if(b.siblings().each(function(){this.submenu&&hideMenu(this.submenu),$(this).removeClass("menu-active")}),b.addClass("menu-active"),$(this).hasClass("menu-item-disabled"))return void b.addClass("menu-active-disabled");var c=b[0].submenu;c&&$(a).menu("show",{menu:c,parent:b})}).bind("mouseleave.menu",function(a){b.removeClass("menu-active menu-active-disabled");var c=b[0].submenu;c?a.pageX>=parseInt(c.css("left"))?b.addClass("menu-active"):hideMenu(c):b.removeClass("menu-active")})}function hideAll(a){var b=$.data(a,"menu");return b&&$(a).is(":visible")&&(hideMenu($(a)),b.options.onHide.call(a)),!1}function showMenu(a,b){var c,d;b=b||{};var e=$(b.menu||a);if(e.hasClass("menu-top")){var f=$.data(a,"menu").options;if($.extend(f,b),c=f.left,d=f.top,f.alignTo){var g=$(f.alignTo);c=g.offset().left,d=g.offset().top+g._outerHeight()}c+e.outerWidth()>$(window)._outerWidth()+$(document)._scrollLeft()&&(c=$(window)._outerWidth()+$(document).scrollLeft()-e.outerWidth()-5),d+e.outerHeight()>$(window)._outerHeight()+$(document).scrollTop()&&(d-=e.outerHeight())}else{var h=b.parent;c=h.offset().left+h.outerWidth()-2,c+e.outerWidth()+5>$(window)._outerWidth()+$(document).scrollLeft()&&(c=h.offset().left-e.outerWidth()+2);var d=h.offset().top-3;d+e.outerHeight()>$(window)._outerHeight()+$(document).scrollTop()&&(d=$(window)._outerHeight()+$(document).scrollTop()-e.outerHeight()-5)}var i=$("body").height()-10,j=e.outerHeight();e.css({left:c,top:d>0?d:0,height:j>i?i:"auto","overflow-y":j>i?"auto":"hidden"}),e.show(0,function(){e[0].shadow||(e[0].shadow=$('<div class="menu-shadow"></div>').insertAfter(e)),e[0].shadow.css({display:"block",zIndex:$.fn.menu.defaults.zIndex++,left:e.css("left"),top:e.css("top"),width:e.outerWidth(),height:e.outerHeight()}),e.css("z-index",$.fn.menu.defaults.zIndex++),e.hasClass("menu-top")&&$.data(e[0],"menu").options.onShow.call(e[0])})}function hideMenu(a){function b(a){a.stop(!0,!0),a[0].shadow&&a[0].shadow.hide(),a.hide()}a&&(b(a),a.find("div.menu-item").each(function(){this.submenu&&hideMenu(this.submenu),$(this).removeClass("menu-active")}))}function findItem(a,b){function c(f){f.children("div.menu-item").each(function(){var f=$(a).menu("getItem",this),g=e.empty().html(f.text).text();b==$.trim(g)?d=f:this.submenu&&!d&&c(this.submenu)})}var d=null,e=$("<div></div>");return c($(a)),e.remove(),d}function setDisabled(a,b,c){var d=$(b);c?(d.addClass("menu-item-disabled"),b.onclick&&(b.onclick1=b.onclick,b.onclick=null)):(d.removeClass("menu-item-disabled"),b.onclick1&&(b.onclick=b.onclick1,b.onclick1=null))}function appendItem(target,param){var menu=$(target);if(param.parent){if(!param.parent.submenu){var submenu=$('<div class="menu"><div class="menu-line"></div></div>').appendTo("body");submenu.hide(),param.parent.submenu=submenu,$('<div class="menu-rightarrow"></div>').appendTo(param.parent)}menu=param.parent.submenu}var item=$('<div class="menu-item"></div>').appendTo(menu);$('<div class="menu-text"></div>').html(param.text).appendTo(item),param.iconCls&&$('<div class="menu-icon"></div>').addClass(param.iconCls).appendTo(item),param.id&&item.attr("id",param.id),param.name&&(item[0].itemName=param.name),param.href&&(item[0].itemHref=param.href),param.onclick&&("string"==typeof param.onclick?item.attr("onclick",param.onclick):item[0].onclick=eval(param.onclick)),param.handler&&(item[0].onclick=eval(param.handler)),bindMenuItemEvent(target,item),param.disabled&&setDisabled(target,item[0],!0),bindMenuEvent(target,menu),setMenuWidth(target,menu)}function removeItem(a,b){function c(a){if(a.submenu){a.submenu.children("div.menu-item").each(function(){c(this)});var b=a.submenu[0].shadow;b&&b.remove(),a.submenu.remove()}$(a).remove()}c(b)}function destroyMenu(a){$(a).children("div.menu-item").each(function(){removeItem(a,this)}),a.shadow&&a.shadow.remove(),$(a).remove()}$.fn.menu=function(a,b){return"string"==typeof a?$.fn.menu.methods[a](this,b):(a=a||{},this.each(function(){var b=$.data(this,"menu");b?$.extend(b.options,a):(b=$.data(this,"menu",{options:$.extend({},$.fn.menu.defaults,$.fn.menu.parseOptions(this),a)}),init(this)),$(this).css({left:b.options.left,top:b.options.top})}))},$.fn.menu.methods={options:function(a){return $.data(a[0],"menu").options},show:function(a,b){return a.each(function(){showMenu(this,b)})},hide:function(a){return a.each(function(){hideAll(this)})},destroy:function(a){return a.each(function(){destroyMenu(this)})},setText:function(a,b){return a.each(function(){$(b.target).children("div.menu-text").html(b.text)})},setIcon:function(a,b){return a.each(function(){var a=$(this).menu("getItem",b.target);a.iconCls?$(a.target).children("div.menu-icon").removeClass(a.iconCls).addClass(b.iconCls):$('<div class="menu-icon"></div>').addClass(b.iconCls).appendTo(b.target)})},getItem:function(a,b){var c=$(b),d={target:b,id:c.attr("id"),text:$.trim(c.children("div.menu-text").html()),disabled:c.hasClass("menu-item-disabled"),name:b.itemName,href:b.itemHref,hideOnClick:b.hideOnClick,onclick:b.onclick},e=c.children("div.menu-icon");if(e.length){for(var f=[],g=e.attr("class").split(" "),h=0;h<g.length;h++)"menu-icon"!=g[h]&&f.push(g[h]);d.iconCls=f.join(" ")}return d},findItem:function(a,b){return findItem(a[0],b)},appendItem:function(a,b){return a.each(function(){appendItem(this,b)})},removeItem:function(a,b){return a.each(function(){removeItem(this,b)})},enableItem:function(a,b){return a.each(function(){setDisabled(this,b,!1)})},disableItem:function(a,b){return a.each(function(){setDisabled(this,b,!0)})}},$.fn.menu.parseOptions=function(a){return $.extend({},$.parser.parseOptions(a,["left","top",{minWidth:"number",hideOnMouseLeave:"boolean"}]))},$.fn.menu.defaults={zIndex:11e4,left:0,top:0,minWidth:120,onShow:function(){},onHide:function(){},onClick:function(){},hideOnMouseLeave:!0};var buildMenu=function(a){var b=$.util.guid("N",12),c="easyui_menu_id_"+b,d="easyui_menu_name_"+b,e=$.extend({},$.fn.menu.defaults,{id:c,name:d,left:window.event?window.event.clientX:0,top:window.event?window.event.clientY:0,items:null,hideDisabledMenu:!1,hideOnMouseLeave:!1,minWidth:140},a||{});e.items=$.array.isArray(e.items)?e.items:[];var f=$("<div></div>").attr({id:c,name:d}).appendTo("body");return e.items.length||e.items.push({text:"当前无菜单项",disabled:!0}),$.each(e.items,function(a,b){e.hideDisabledMenu&&b.disabled||appendItemToMenu(f,b,c,f)}),{menu:f,options:e}},appendItemToMenu=function(a,b,c,d){if($.util.isString(b)&&"-"==$.trim(b))return void $("<div></div>").addClass("menu-sep").appendTo(a);var e=$.util.guid("N",12),f=c+"_"+e;b=b||{},b=$.extend({id:f,text:"",iconCls:null,href:null,disabled:!1,onclick:null,handler:null,bold:!1,style:null,children:null,hideDisabledMenu:!1,hideOnClick:!0},b);var g=b.onclick,h=b.handler;if(b.onclick=undefined,b.handler=undefined,b=$.util.parseMapFunction(b),b.onclick=g,b.handler=h,!b.hideDisabledMenu||!b.disabled){var i=$("<div></div>").attr({id:b.id,iconCls:b.iconCls,href:b.href,disabled:b.disabled,hideOnClick:b.hideOnClick}).appendTo(a);if(b.style&&i.css(b.style),$.isFunction(b.handler)){var h=b.handler;b.onclick=function(a,b,c){h.call(this,a,b,c)}}$.isFunction(b.onclick)&&i.click(function(a){i.hasClass("menu-item-disabled")||b.onclick.call(this,a,b,d)});var j=b.children&&b.children.length?!0:!1,k=$("<span></span>").text(b.text).appendTo(i);if(b.bold&&k.css("font-weight","bold"),j){var l=$("<div></div>").appendTo(i);$.each(b.children,function(a,c){var e=$.util.isString(c)&&"-"==$.trim(c)?c:$.extend({hideDisabledMenu:b.hideDisabledMenu},c);appendItemToMenu(l,e,f,d)})}}};$.extend($.easyui,{createMenu:buildMenu,showMenu:function(a){var b=a||{},c=$.fn.menu.defaults.onHide,d=b.onHide;b.onHide=function(){var a=$.util.parseJquery(this);$.isFunction(c)&&c.apply(this,arguments),$.isFunction(d)&&d.apply(this,arguments),$.util.exec(function(){a.menu("destroy")})};var e=buildMenu(b);return e.menu.menu(e.options).menu("show",{left:e.options.left,top:e.options.top}),e.menu}})}(jQuery),window.jQuery&&($.fn.pagination&&($.fn.pagination.defaults.beforePageText="第",$.fn.pagination.defaults.afterPageText="共{pages}页",$.fn.pagination.defaults.displayMsg="显示{from}到{to},共{total}记录"),$.fn.datagrid&&($.fn.datagrid.defaults.loadMsg="正在处理，请稍待。。。"),$.fn.treegrid&&$.fn.datagrid&&($.fn.treegrid.defaults.loadMsg=$.fn.datagrid.defaults.loadMsg),$.messager&&($.messager.defaults.ok="确定",$.messager.defaults.cancel="取消"),$.fn.validatebox&&($.fn.validatebox.defaults.missingMessage="该输入项为必输项",$.fn.validatebox.defaults.rules.email.message="请输入有效的电子邮件地址",$.fn.validatebox.defaults.rules.url.message="请输入有效的URL地址",$.fn.validatebox.defaults.rules.length.message="输入内容长度必须介于{0}和{1}之间",$.fn.validatebox.defaults.rules.remote.message="请修正该字段"),$.fn.numberbox&&($.fn.numberbox.defaults.missingMessage="该输入项为必输项"),$.fn.combobox&&($.fn.combobox.defaults.missingMessage="该输入项为必输项"),$.fn.combotree&&($.fn.combotree.defaults.missingMessage="该输入项为必输项"),$.fn.combogrid&&($.fn.combogrid.defaults.missingMessage="该输入项为必输项"));
